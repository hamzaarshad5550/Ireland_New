{"ast":null,"code":"import React,{useState}from'react';import{useStripe,useElements,CardElement}from'@stripe/react-stripe-js';import{CreditCard,Lock,AlertCircle,CheckCircle}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const StripePayment=_ref=>{let{amount,onPaymentSuccess,onPaymentError,isProcessing,setIsProcessing,bookingData}=_ref;const stripe=useStripe();const elements=useElements();const[error,setError]=useState(null);const[cardComplete,setCardComplete]=useState(false);const handleSubmit=async event=>{event.preventDefault();if(!stripe||!elements){return;}const card=elements.getElement(CardElement);if(!card){return;}setIsProcessing(true);setError(null);try{// Create payment method\nconst{error:paymentMethodError,paymentMethod}=await stripe.createPaymentMethod({type:'card',card:card,billing_details:{name:bookingData.fullName||\"\".concat(bookingData.firstName,\" \").concat(bookingData.lastName),email:bookingData.email,phone:bookingData.phoneNumber}});if(paymentMethodError){setError(paymentMethodError.message);setIsProcessing(false);onPaymentError(paymentMethodError.message);return;}// In a real implementation, you would send the payment method to your backend\n// to create a payment intent and confirm the payment\n// For demo purposes, we'll simulate a successful payment\nsetTimeout(()=>{setIsProcessing(false);onPaymentSuccess({paymentMethodId:paymentMethod.id,amount:amount,currency:'eur'});},2000);}catch(err){setError(err.message);setIsProcessing(false);onPaymentError(err.message);}};const handleCardChange=event=>{setCardComplete(event.complete);if(event.error){setError(event.error.message);}else{setError(null);}};const cardElementOptions={style:{base:{fontSize:'16px',color:'#1f2937',fontFamily:'system-ui, sans-serif','::placeholder':{color:'#9ca3af'},iconColor:'#0f766e'},invalid:{color:'#ef4444',iconColor:'#ef4444'}},hidePostalCode:false};const formatAmount=amount=>{return new Intl.NumberFormat('en-IE',{style:'currency',currency:'EUR'}).format(amount);};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg border border-gray-200 shadow-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 mb-4\",children:[/*#__PURE__*/_jsx(CreditCard,{className:\"h-5 w-5 text-teal-600\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:\"Payment Information\"}),/*#__PURE__*/_jsx(Lock,{className:\"h-4 w-4 text-gray-400\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 p-3 bg-teal-50 rounded-lg border border-teal-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-teal-800\",children:\"Consultation Fee:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-lg font-bold text-teal-900\",children:formatAmount(amount)})]})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Card Details\"}),/*#__PURE__*/_jsx(\"div\",{className:\"p-3 border border-gray-300 rounded-lg focus-within:border-teal-500 focus-within:ring-1 focus-within:ring-teal-500\",children:/*#__PURE__*/_jsx(CardElement,{options:cardElementOptions,onChange:handleCardChange})})]}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"h-4 w-4 text-red-500 flex-shrink-0\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-red-700\",children:error})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:!stripe||!cardComplete||isProcessing,className:\"w-full py-3 px-4 rounded-lg font-medium transition-all flex items-center justify-center space-x-2 \".concat(!stripe||!cardComplete||isProcessing?'bg-gray-300 text-gray-500 cursor-not-allowed':'bg-teal-600 hover:bg-teal-700 text-white shadow-md hover:shadow-lg'),children:isProcessing?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Processing Payment...\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Lock,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Pay \",formatAmount(amount)]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 flex items-center justify-center space-x-2 text-xs text-gray-500\",children:[/*#__PURE__*/_jsx(Lock,{className:\"h-3 w-3\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Secured by Stripe \\u2022 Your payment information is encrypted\"})]})]});};export default StripePayment;","map":{"version":3,"names":["React","useState","useStripe","useElements","CardElement","CreditCard","Lock","AlertCircle","CheckCircle","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","StripePayment","_ref","amount","onPaymentSuccess","onPaymentError","isProcessing","setIsProcessing","bookingData","stripe","elements","error","setError","cardComplete","setCardComplete","handleSubmit","event","preventDefault","card","getElement","paymentMethodError","paymentMethod","createPaymentMethod","type","billing_details","name","fullName","concat","firstName","lastName","email","phone","phoneNumber","message","setTimeout","paymentMethodId","id","currency","err","handleCardChange","complete","cardElementOptions","style","base","fontSize","color","fontFamily","iconColor","invalid","hidePostalCode","formatAmount","Intl","NumberFormat","format","className","children","onSubmit","options","onChange","disabled"],"sources":["D:/AI Project/spectrum-ire-booking/spectrum-ire-booking/src/components/StripePayment.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useStripe, useElements, CardElement } from '@stripe/react-stripe-js';\nimport { CreditCard, Lock, AlertCircle, CheckCircle } from 'lucide-react';\n\nconst StripePayment = ({ \n  amount, \n  onPaymentSuccess, \n  onPaymentError, \n  isProcessing, \n  setIsProcessing,\n  bookingData \n}) => {\n  const stripe = useStripe();\n  const elements = useElements();\n  const [error, setError] = useState(null);\n  const [cardComplete, setCardComplete] = useState(false);\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n\n    if (!stripe || !elements) {\n      return;\n    }\n\n    const card = elements.getElement(CardElement);\n\n    if (!card) {\n      return;\n    }\n\n    setIsProcessing(true);\n    setError(null);\n\n    try {\n      // Create payment method\n      const { error: paymentMethodError, paymentMethod } = await stripe.createPaymentMethod({\n        type: 'card',\n        card: card,\n        billing_details: {\n          name: bookingData.fullName || `${bookingData.firstName} ${bookingData.lastName}`,\n          email: bookingData.email,\n          phone: bookingData.phoneNumber,\n        },\n      });\n\n      if (paymentMethodError) {\n        setError(paymentMethodError.message);\n        setIsProcessing(false);\n        onPaymentError(paymentMethodError.message);\n        return;\n      }\n\n      // In a real implementation, you would send the payment method to your backend\n      // to create a payment intent and confirm the payment\n      \n      // For demo purposes, we'll simulate a successful payment\n      setTimeout(() => {\n        setIsProcessing(false);\n        onPaymentSuccess({\n          paymentMethodId: paymentMethod.id,\n          amount: amount,\n          currency: 'eur'\n        });\n      }, 2000);\n\n    } catch (err) {\n      setError(err.message);\n      setIsProcessing(false);\n      onPaymentError(err.message);\n    }\n  };\n\n  const handleCardChange = (event) => {\n    setCardComplete(event.complete);\n    if (event.error) {\n      setError(event.error.message);\n    } else {\n      setError(null);\n    }\n  };\n\n  const cardElementOptions = {\n    style: {\n      base: {\n        fontSize: '16px',\n        color: '#1f2937',\n        fontFamily: 'system-ui, sans-serif',\n        '::placeholder': {\n          color: '#9ca3af',\n        },\n        iconColor: '#0f766e',\n      },\n      invalid: {\n        color: '#ef4444',\n        iconColor: '#ef4444',\n      },\n    },\n    hidePostalCode: false,\n  };\n\n  const formatAmount = (amount) => {\n    return new Intl.NumberFormat('en-IE', {\n      style: 'currency',\n      currency: 'EUR'\n    }).format(amount);\n  };\n\n  return (\n    <div className=\"bg-white p-6 rounded-lg border border-gray-200 shadow-sm\">\n      <div className=\"flex items-center space-x-2 mb-4\">\n        <CreditCard className=\"h-5 w-5 text-teal-600\" />\n        <h3 className=\"text-lg font-semibold text-gray-900\">Payment Information</h3>\n        <Lock className=\"h-4 w-4 text-gray-400\" />\n      </div>\n\n      <div className=\"mb-4 p-3 bg-teal-50 rounded-lg border border-teal-200\">\n        <div className=\"flex justify-between items-center\">\n          <span className=\"text-sm font-medium text-teal-800\">Consultation Fee:</span>\n          <span className=\"text-lg font-bold text-teal-900\">{formatAmount(amount)}</span>\n        </div>\n      </div>\n\n      <form onSubmit={handleSubmit}>\n        <div className=\"mb-4\">\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            Card Details\n          </label>\n          <div className=\"p-3 border border-gray-300 rounded-lg focus-within:border-teal-500 focus-within:ring-1 focus-within:ring-teal-500\">\n            <CardElement \n              options={cardElementOptions}\n              onChange={handleCardChange}\n            />\n          </div>\n        </div>\n\n        {error && (\n          <div className=\"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center space-x-2\">\n            <AlertCircle className=\"h-4 w-4 text-red-500 flex-shrink-0\" />\n            <span className=\"text-sm text-red-700\">{error}</span>\n          </div>\n        )}\n\n        <button\n          type=\"submit\"\n          disabled={!stripe || !cardComplete || isProcessing}\n          className={`w-full py-3 px-4 rounded-lg font-medium transition-all flex items-center justify-center space-x-2 ${\n            !stripe || !cardComplete || isProcessing\n              ? 'bg-gray-300 text-gray-500 cursor-not-allowed'\n              : 'bg-teal-600 hover:bg-teal-700 text-white shadow-md hover:shadow-lg'\n          }`}\n        >\n          {isProcessing ? (\n            <>\n              <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\n              <span>Processing Payment...</span>\n            </>\n          ) : (\n            <>\n              <Lock className=\"h-4 w-4\" />\n              <span>Pay {formatAmount(amount)}</span>\n            </>\n          )}\n        </button>\n      </form>\n\n      <div className=\"mt-4 flex items-center justify-center space-x-2 text-xs text-gray-500\">\n        <Lock className=\"h-3 w-3\" />\n        <span>Secured by Stripe â€¢ Your payment information is encrypted</span>\n      </div>\n    </div>\n  );\n};\n\nexport default StripePayment;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}