{"ast":null,"code":"import _objectSpread from\"D:/AI Project/spectrum-ire-booking/spectrum-ire-booking/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useRef,useEffect}from'react';import{MapPin,Phone,Users,Video,Star,Palette,Check,Search,CreditCard,Lock}from'lucide-react';import{WEBHOOK_CONFIG,createWebhookRequestBody,makeWebhookRequest}from'./config/webhooks';import{Elements}from'@stripe/react-stripe-js';import{stripePromise,STRIPE_CONFIG,formatAmount}from'./config/stripe';import StripePayment from'./components/StripePayment';// Multiple theme configurations\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const themes={ocean:{name:'Ocean Blue',primary:'from-blue-600 to-blue-700',primarySolid:'bg-blue-600',primaryHover:'hover:bg-blue-700',accent:'text-blue-600',accentBg:'bg-blue-50',border:'border-blue-200',text:'text-blue-800',gradient:'from-blue-400 to-blue-600'},sunset:{name:'Sunset Orange',primary:'from-orange-500 to-red-500',primarySolid:'bg-orange-500',primaryHover:'hover:bg-orange-600',accent:'text-orange-600',accentBg:'bg-orange-50',border:'border-orange-200',text:'text-orange-800',gradient:'from-orange-400 to-red-500'},forest:{name:'Forest Green',primary:'from-emerald-600 to-green-700',primarySolid:'bg-emerald-600',primaryHover:'hover:bg-emerald-700',accent:'text-emerald-600',accentBg:'bg-emerald-50',border:'border-emerald-200',text:'text-emerald-800',gradient:'from-emerald-400 to-green-600'},lavender:{name:'Lavender Purple',primary:'from-purple-600 to-violet-700',primarySolid:'bg-purple-600',primaryHover:'hover:bg-purple-700',accent:'text-purple-600',accentBg:'bg-purple-50',border:'border-purple-200',text:'text-purple-800',gradient:'from-purple-400 to-violet-600'},rose:{name:'Rose Pink',primary:'from-pink-500 to-rose-600',primarySolid:'bg-pink-500',primaryHover:'hover:bg-pink-600',accent:'text-pink-600',accentBg:'bg-pink-50',border:'border-pink-200',text:'text-pink-800',gradient:'from-pink-400 to-rose-500'},midnight:{name:'Midnight Dark',primary:'from-slate-700 to-slate-900',primarySolid:'bg-slate-700',primaryHover:'hover:bg-slate-800',accent:'text-slate-700',accentBg:'bg-slate-50',border:'border-slate-200',text:'text-slate-800',gradient:'from-slate-500 to-slate-700'},teal:{name:'Teal Wave',primary:'from-teal-600 to-cyan-700',primarySolid:'bg-teal-600',primaryHover:'hover:bg-teal-700',accent:'text-teal-600',accentBg:'bg-teal-50',border:'border-teal-200',text:'text-teal-800',gradient:'from-teal-400 to-cyan-600'},amber:{name:'Golden Amber',primary:'from-amber-500 to-yellow-600',primarySolid:'bg-amber-500',primaryHover:'hover:bg-amber-600',accent:'text-amber-600',accentBg:'bg-amber-50',border:'border-amber-200',text:'text-amber-800',gradient:'from-amber-400 to-yellow-500'}};export default function CareHQBooking(){const[currentStep,setCurrentStep]=useState(1);const[selectedClinic,setSelectedClinic]=useState(null);const[selectedSlot,setSelectedSlot]=useState(null);const[currentTheme,setCurrentTheme]=useState(()=>{// Load theme from localStorage or default to 'teal'\nconst savedTheme=localStorage.getItem('careHQTheme');return savedTheme&&themes[savedTheme]?savedTheme:'teal';});const[showThemeSelector,setShowThemeSelector]=useState(false);const[formData,setFormData]=useState({reasonForContact:'',firstName:'',lastName:'',fullName:'',dateOfBirth:'',phoneNumber:'',email:'',city:'',postcode:'',symptoms:'',// GMS Number field\ngmsNumber:'',// GP and Surgery fields\ngp:'',surgery:'',// GMS Expiry field\ngmsExpiry:'',// Appointment Type field\nappointmentType:'',// Eircode field\neircode:'',// Home Location fields\nhomeBuilding:'',homeStreet:'',homeCity:'',homeCountry:'',homePostcode:'',homeEircode:'',// Current Location fields\ncurrentBuilding:'',currentStreet:'',currentCity:'',currentCountry:'',currentPostcode:'',currentEircode:''// Payment fields removed - using Stripe instead\n});const[useHomeAsCurrentLocation,setUseHomeAsCurrentLocation]=useState(false);const[isLoadingEircode,setIsLoadingEircode]=useState(false);const[isLoadingLocation,setIsLoadingLocation]=useState(false);const[eircodeError,setEircodeError]=useState('');const[showSuccessPopup,setShowSuccessPopup]=useState(false);const[bookingReference,setBookingReference]=useState('');const[showSignInPopup,setShowSignInPopup]=useState(false);const[webhookResponse,setWebhookResponse]=useState(null);const[isLoadingWebhook,setIsLoadingWebhook]=useState(false);// Dropdown data from n8n webhook\nconst[dropdownData,setDropdownData]=useState({gender:[],doctors:[],surgeries:[],appointmentTypes:[]});const[isLoadingDropdowns,setIsLoadingDropdowns]=useState(false);// Payment-related state\nconst[paymentAmount,setPaymentAmount]=useState(50);// Default consultation fee\nconst[isProcessingPayment,setIsProcessingPayment]=useState(false);const[paymentError,setPaymentError]=useState(null);const[paymentSuccess,setPaymentSuccess]=useState(false);// Calculate payment amount based on appointment type\nconst calculatePaymentAmount=()=>{if(isVirtualAppointment()){return 35;// Virtual consultations\n}else if(selectedClinic!==null&&selectedClinic!==void 0&&selectedClinic.price){return parseInt(selectedClinic.price.replace(/[^0-9]/g,''))||45;}return 45;// Default face-to-face consultation\n};// Update payment amount when appointment type or clinic changes\nuseEffect(()=>{const newAmount=calculatePaymentAmount();setPaymentAmount(newAmount);},[formData.appointmentType,selectedClinic]);const theme=themes[currentTheme];const clinics=[{id:1,name:'CareHQ Medical Centre',distance:'2.5 km',price:'Â£45',rating:4.8,slots:['17:00 - 17:15','17:15 - 17:30','17:30 - 17:45','17:45 - 18:00','18:00 - 18:15','18:15 - 18:30','18:30 - 18:45','18:45 - 19:00','19:00 - 19:15','19:15 - 19:30','19:30 - 19:45','19:45 - 20:00','20:00 - 20:15','20:15 - 20:30','20:30 - 20:45','20:45 - 21:00','21:00 - 21:15','21:15 - 21:30','21:30 - 21:45','21:45 - 22:00']},{id:2,name:'Downtown Health Clinic',distance:'3.8 km',price:'Â£40',rating:4.6,slots:['17:00 - 17:15','17:15 - 17:30','17:30 - 17:45','17:45 - 18:00','18:00 - 18:15','18:15 - 18:30','18:30 - 18:45','18:45 - 19:00','19:00 - 19:15','19:15 - 19:30','19:30 - 19:45','19:45 - 20:00','20:00 - 20:15','20:15 - 20:30','20:30 - 20:45','20:45 - 21:00','21:00 - 21:15','21:15 - 21:30']},{id:3,name:'City Care Medical',distance:'1.2 km',price:'Â£50',rating:4.9,slots:['17:00 - 17:15','17:15 - 17:30','17:30 - 17:45','17:45 - 18:00','18:00 - 18:15','18:15 - 18:30','18:30 - 18:45','18:45 - 19:00','19:00 - 19:15','19:15 - 19:30','19:30 - 19:45','19:45 - 20:00','20:00 - 20:15','20:15 - 20:30','20:30 - 20:45','20:45 - 21:00','21:00 - 21:15','21:30 - 21:45','21:45 - 22:00']},{id:4,name:'Wellness Center Plus',distance:'4.1 km',price:'Â£42',rating:4.7,slots:['17:00 - 17:15','17:15 - 17:30','17:30 - 17:45','17:45 - 18:00','18:00 - 18:15','18:15 - 18:30','18:30 - 18:45','18:45 - 19:00','19:00 - 19:15','19:15 - 19:30','19:30 - 19:45','19:45 - 20:00','20:00 - 20:15','20:15 - 20:30','20:30 - 20:45','20:45 - 21:00','21:00 - 21:15','21:15 - 21:30','21:30 - 21:45']},{id:5,name:'Prime Health Clinic',distance:'2.8 km',price:'Â£48',rating:4.8,slots:['17:00 - 17:15','17:15 - 17:30','17:30 - 17:45','17:45 - 18:00','18:00 - 18:15','18:15 - 18:30','18:30 - 18:45','18:45 - 19:00','19:00 - 19:15','19:15 - 19:30','19:30 - 19:45','19:45 - 20:00','20:00 - 20:15','20:15 - 20:30','20:30 - 20:45','20:45 - 21:00','21:00 - 21:15','21:15 - 21:30','21:30 - 21:45','21:45 - 22:00']}];// Debounce timer ref\nconst eircodeTimeoutRef=useRef(null);// WebhookDropdownCall function to fetch dropdown data from n8n\nconst WebhookDropdownCall=async()=>{setIsLoadingDropdowns(true);console.log('ðŸ”„ Starting WebhookDropdownCall...');try{const requestBody=createWebhookRequestBody(WEBHOOK_CONFIG.WORKFLOW_TYPES.LOOKUPS);console.log('ðŸ“¤ Request body:',requestBody);console.log('ðŸŒ Webhook URL:',WEBHOOK_CONFIG.LOOKUPS_WEBHOOK);const response=await makeWebhookRequest(WEBHOOK_CONFIG.LOOKUPS_WEBHOOK,requestBody);console.log('ðŸ“¥ Response status:',response.status);debugger;if(response.ok){var _parsedData$Gender,_parsedData$Doctors,_parsedData$Appointme;const data=await response.json();console.log('ðŸ“‹ Raw webhook response:',data);// Handle different response structures\nlet parsedData;// Check if response is an array (n8n often returns arrays)\nif(Array.isArray(data)&&data.length>0){console.log('ðŸ“¦ Response is an array, using first element...');const firstElement=data[0];// Check if the first element has a 'data' field with JSON string\nif(firstElement.data&&typeof firstElement.data==='string'){try{console.log('ðŸ” Parsing array[0].data as JSON string...');parsedData=JSON.parse(firstElement.data);console.log('âœ… Successfully parsed array[0].data:',parsedData);}catch(parseError){console.error('âŒ Error parsing array[0].data as JSON:',parseError);console.log('ðŸ“„ Raw array[0].data value:',firstElement.data);return;}}else{console.log('ðŸ“¦ Using array[0] as object...');parsedData=firstElement;}}// Check if data is in 'data' field as string (common n8n format)\nelse if(data.data&&typeof data.data==='string'){try{console.log('ðŸ” Parsing data.data as JSON string...');parsedData=JSON.parse(data.data);console.log('âœ… Successfully parsed data.data:',parsedData);}catch(parseError){console.error('âŒ Error parsing data.data as JSON:',parseError);console.log('ðŸ“„ Raw data.data value:',data.data);return;}}// Check if data is in 'data' field as object\nelse if(data.data&&typeof data.data==='object'){console.log('ðŸ“¦ Using data.data as object...');parsedData=data.data;}// Check if the response itself contains the arrays\nelse if(data.Gender||data.Doctors||data.AppointmentTypes){console.log('ðŸŽ¯ Using root data object...');parsedData=data;}else{console.error('âŒ Unexpected response structure:',data);return;}console.log('ðŸŽ‰ Final parsed data:',parsedData);console.log('ðŸ‘¥ Gender array length:',((_parsedData$Gender=parsedData.Gender)===null||_parsedData$Gender===void 0?void 0:_parsedData$Gender.length)||0);console.log('ðŸ‘¨â€âš•ï¸ Doctors array length:',((_parsedData$Doctors=parsedData.Doctors)===null||_parsedData$Doctors===void 0?void 0:_parsedData$Doctors.length)||0);console.log('ðŸ“‹ AppointmentTypes array length:',((_parsedData$Appointme=parsedData.AppointmentTypes)===null||_parsedData$Appointme===void 0?void 0:_parsedData$Appointme.length)||0);// Filter and clean the data\nconst cleanGender=(parsedData.Gender||[]).filter(item=>item.Id&&item.Id!==0&&item.GenderName&&item.GenderName.trim()!=='');const cleanDoctors=(parsedData.Doctors||[]).filter(item=>item.GPID&&item.GPID!==0&&item.GPName&&item.GPName.trim()!=='');const cleanAppointmentTypes=(parsedData.AppointmentTypes||[]).filter(item=>item.CaseTypeID&&item.CaseType&&item.CaseType.trim()!=='');// Handle surgeries - use provided Surgeries array or extract from doctors\nlet cleanSurgeries=[];if(parsedData.Surgeries&&Array.isArray(parsedData.Surgeries)){// Use provided Surgeries array if available\ncleanSurgeries=parsedData.Surgeries.filter(item=>item.SurgeryID&&item.SurgeryID!==0&&item.SurgeryName&&item.SurgeryName.trim()!=='');console.log('ðŸ¥ Using provided Surgeries array:',cleanSurgeries);}else{// Fallback: Extract unique surgeries from doctors array\nconsole.log('ðŸ¥ No Surgeries array found, extracting from doctors...');if(cleanDoctors&&Array.isArray(cleanDoctors)){const surgeryMap=new Map();cleanDoctors.forEach(doctor=>{if(doctor.SurgeryID&&doctor.SurgeryID!==0&&!surgeryMap.has(doctor.SurgeryID)){surgeryMap.set(doctor.SurgeryID,{SurgeryID:doctor.SurgeryID,SurgeryName:\"Surgery \".concat(doctor.SurgeryID)// Placeholder name since surgery names aren't provided\n});}});cleanSurgeries=Array.from(surgeryMap.values());}}// Update dropdown data state\nconst newDropdownData={gender:cleanGender,doctors:cleanDoctors,surgeries:cleanSurgeries,appointmentTypes:cleanAppointmentTypes};console.log('ðŸ’¾ Setting dropdown data:',newDropdownData);setDropdownData(newDropdownData);}else{const errorText=await response.text();console.error('âŒ Failed to fetch dropdown data:',response.status,response.statusText);console.error('ðŸ“„ Error response body:',errorText);}}catch(error){console.error('ðŸ’¥ Error fetching dropdown data:',error);console.error('ðŸ” Error details:',error.message);}finally{setIsLoadingDropdowns(false);console.log('âœ… WebhookDropdownCall completed');}};// Function to get filtered GPs based on selected surgery\nconst getFilteredGPs=()=>{if(!formData.surgery||formData.surgery===''||formData.surgery==='all'){// Show all GPs when no surgery selected or \"All\" is selected\nreturn dropdownData.doctors;}else{// Filter GPs by selected SurgeryID\nreturn dropdownData.doctors.filter(doctor=>doctor.SurgeryID&&doctor.SurgeryID.toString()===formData.surgery.toString());}};// Payment handler functions\nconst handlePaymentSuccess=paymentResult=>{console.log('ðŸ’³ Payment successful:',paymentResult);setPaymentSuccess(true);setPaymentError(null);// Generate booking reference and show success popup\nconst reference=\"SIR\".concat(Math.random().toString(36).substr(2,9).toUpperCase());setBookingReference(reference);setShowSuccessPopup(true);// You can add additional logic here like:\n// - Send booking confirmation to backend\n// - Update booking status\n// - Send confirmation email\n};const handlePaymentError=error=>{console.error('ðŸ’³ Payment failed:',error);setPaymentError(error);setPaymentSuccess(false);};// Load dropdown data on component mount\nuseEffect(()=>{WebhookDropdownCall();},[]);// Eircode sanitization function\nconst sanitizeEircode=eircode=>{if(!eircode)return'';// Remove all spaces and convert to uppercase\nreturn eircode.replace(/\\s+/g,'').toUpperCase();};// Comprehensive Eircode validation with routing key verification\nconst isValidEircodeFormat=eircode=>{const sanitized=sanitizeEircode(eircode);// Must be exactly 7 characters\nif(sanitized.length!==7)return false;// Irish Eircode format: 3 alphanumeric + 4 alphanumeric (e.g., D02XY45)\nconst eircodeRegex=/^[A-Z0-9]{3}[A-Z0-9]{4}$/;if(!eircodeRegex.test(sanitized))return false;// Validate routing key (first 3 characters) against known Irish routing keys\nconst routingKey=sanitized.substring(0,3);return isValidIrishRoutingKey(routingKey);};// Validate Irish routing keys based on official Eircode system\nconst isValidIrishRoutingKey=routingKey=>{// Official Irish Eircode routing keys by county/region\nconst validRoutingKeys=[// Dublin (D01-D24)\n'D01','D02','D03','D04','D05','D06','D07','D08','D09','D10','D11','D12','D13','D14','D15','D16','D17','D18','D20','D22','D24',// Cork (T12, T23, T45, P12, P31, P43, P51, P61, P72, P85)\n'T12','T23','T45','P12','P31','P43','P51','P61','P72','P85',// Galway (H91, H53, H54, H62, H65, H71, F92, F94)\n'H91','H53','H54','H62','H65','H71','F92','F94',// Limerick (V94, V95, V42, V14, V23, V35)\n'V94','V95','V42','V14','V23','V35',// Waterford (X91, X35, X42)\n'X91','X35','X42',// Kilkenny (R95, R32, R21)\n'R95','R32','R21',// Louth (A91, A92)\n'A91','A92',// Meath (C15, A83, A85)\n'C15','A83','A85',// Kildare (W23, R56, W91)\n'W23','R56','W91',// Wicklow (A98, A63, A67)\n'A98','A63','A67',// Wexford (Y35, Y25, Y21)\n'Y35','Y25','Y21',// Carlow (R93)\n'R93',// Laois (R32, R35)\n'R35',// Kerry (V92, V93, V31)\n'V92','V93','V31',// Clare (V95, V14, V15)\n'V15',// Tipperary (E41, E34, E25, E91)\n'E41','E34','E25','E91',// Sligo (F91, F26)\n'F91','F26',// Mayo (F23, F28, F12)\n'F23','F28','F12',// Roscommon (F42, F45)\n'F42','F45',// Leitrim (N41)\n'N41',// Longford (N39)\n'N39',// Westmeath (N37, N91)\n'N37','N91',// Offaly (R42)\n'R42',// Cavan (H12)\n'H12',// Monaghan (H18)\n'H18',// Donegal (F93)\n'F93'];return validRoutingKeys.includes(routingKey);};const handleInputChange=e=>{const{name,value}=e.target;const newFormData=_objectSpread(_objectSpread({},formData),{},{[name]:value});// Auto-update fullName when firstName or lastName changes\nif(name==='firstName'){newFormData.fullName=\"\".concat(value,\" \").concat(formData.lastName).trim();}else if(name==='lastName'){newFormData.fullName=\"\".concat(formData.firstName,\" \").concat(value).trim();}// Handle GP selection - automatically select corresponding surgery (GP -> Surgery)\nif(name==='gp'&&value){console.log('ðŸ”„ GP selected:',value);// Find the selected doctor and auto-populate surgery\nconst selectedDoctor=dropdownData.doctors.find(doctor=>doctor.GPID.toString()===value.toString());if(selectedDoctor&&selectedDoctor.SurgeryID){console.log('âœ… Auto-selecting surgery:',selectedDoctor.SurgeryID,'for GP:',selectedDoctor.GPName);newFormData.surgery=selectedDoctor.SurgeryID.toString();}else{console.log('âŒ No matching surgery found for GP:',value);newFormData.surgery='';}}// Handle Surgery selection - clear GP selection to force user to choose from filtered list\nif(name==='surgery'){console.log('ðŸ”„ Surgery selected:',value);// Clear GP selection when surgery changes so user can see filtered GPs\nnewFormData.gp='';if(value==='all'){console.log('ðŸ“‹ \"All Surgeries\" selected - showing all GPs');}else if(value){console.log('ðŸ¥ Specific surgery selected - filtering GPs for SurgeryID:',value);}}// If checkbox is checked and a home location field is being updated,\n// also update the corresponding current location field\nif(useHomeAsCurrentLocation){if(name==='homeBuilding')newFormData.currentBuilding=value;else if(name==='homeStreet')newFormData.currentStreet=value;else if(name==='homeCity')newFormData.currentCity=value;else if(name==='homeCountry')newFormData.currentCountry=value;else if(name==='homePostcode')newFormData.currentPostcode=value;else if(name==='homeEircode')newFormData.currentEircode=value;}setFormData(newFormData);// Trigger Eircode lookup when Eircode field changes\nif(name==='eircode'){// Clear previous timeout\nif(eircodeTimeoutRef.current){clearTimeout(eircodeTimeoutRef.current);}// Clear error when user starts typing\nsetEircodeError('');const sanitizedEircode=sanitizeEircode(value);if(value.length===0){// Clear current location fields when Eircode is cleared\nsetFormData(prev=>_objectSpread(_objectSpread({},prev),{},{currentBuilding:'',currentStreet:'',currentCity:'',currentCountry:'',currentPostcode:''}));}else if(sanitizedEircode.length>=6){// Debounce the API call - only trigger when we have enough characters\neircodeTimeoutRef.current=setTimeout(()=>{// Get the current value from the form data to ensure we're using the latest value\nconst currentEircode=sanitizeEircode(newFormData.eircode);if(currentEircode.length>=6){lookupEircode(currentEircode);}},1000);}}};const handleClinicSelect=clinic=>{if((selectedClinic===null||selectedClinic===void 0?void 0:selectedClinic.id)===clinic.id){setSelectedClinic(null);setSelectedSlot(null);}else{setSelectedClinic(clinic);setSelectedSlot(null);}};const handleSlotSelect=slot=>{setSelectedSlot(slot);};const handleThemeChange=themeKey=>{setCurrentTheme(themeKey);setShowThemeSelector(false);// Save theme to localStorage for persistence\nlocalStorage.setItem('careHQTheme',themeKey);};const handleUseHomeAsCurrentLocation=e=>{const isChecked=e.target.checked;setUseHomeAsCurrentLocation(isChecked);if(isChecked){// Copy home location fields to current location fields\nsetFormData(prev=>_objectSpread(_objectSpread({},prev),{},{currentBuilding:prev.homeBuilding,currentStreet:prev.homeStreet,currentCity:prev.homeCity,currentCountry:prev.homeCountry,currentPostcode:prev.homePostcode,currentEircode:prev.homeEircode}));}};// Helper function to check if appointment type requires clinic selection\nconst isVirtualAppointment=()=>{// Check if the appointment type is Video Consult or Phone Consult based on CaseType\nconst selectedAppointmentType=dropdownData.appointmentTypes.find(type=>type.CaseTypeID.toString()===formData.appointmentType.toString());if(selectedAppointmentType){const caseType=selectedAppointmentType.CaseType.toLowerCase();return caseType.includes('video')||caseType.includes('phone');}// Fallback to old logic for backward compatibility\nreturn formData.appointmentType==='vc'||formData.appointmentType==='pc';};// Generate random booking reference number\nconst generateBookingReference=()=>{const prefix='BK';const timestamp=Date.now().toString().slice(-6);const random=Math.floor(Math.random()*1000).toString().padStart(3,'0');return\"\".concat(prefix).concat(timestamp).concat(random);};// Handle booking completion\nconst handleCompleteBooking=()=>{const reference=generateBookingReference();setBookingReference(reference);setShowSuccessPopup(true);};// Handle success popup close\nconst handleSuccessPopupClose=()=>{setShowSuccessPopup(false);setCurrentStep(1);// Reset form data if needed\nsetSelectedClinic(null);setSelectedSlot(null);};// Webhook sign-in function\nconst handleSignIn=async()=>{setIsLoadingWebhook(true);setWebhookResponse(null);try{const requestBody=createWebhookRequestBody(WEBHOOK_CONFIG.WORKFLOW_TYPES.LOOKUPS);const response=await makeWebhookRequest(WEBHOOK_CONFIG.LOOKUPS_WEBHOOK,requestBody);if(response.ok){const data=await response.json();setWebhookResponse(data);setShowSignInPopup(true);}else{// Handle non-JSON responses or errors\nconst text=await response.text();setWebhookResponse({error:true,status:response.status,statusText:response.statusText,message:text||'Failed to connect to webhook'});setShowSignInPopup(true);}}catch(error){console.error('Webhook error:',error);setWebhookResponse({error:true,message:error.message||'Network error occurred',details:'Unable to connect to the webhook endpoint'});setShowSignInPopup(true);}finally{setIsLoadingWebhook(false);}};const handleSignInPopupClose=()=>{setShowSignInPopup(false);setWebhookResponse(null);};// Function to render JSON data as a table\nconst renderJsonAsTable=function(data){let parentKey=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';if(!data||typeof data!=='object'){return/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600 p-2\",children:String(data)});}if(Array.isArray(data)){return/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:data.map((item,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"border border-gray-200 rounded-lg overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 px-4 py-2 border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"h4\",{className:\"font-medium text-gray-700\",children:[\"Item \",index+1]})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-4\",children:renderJsonAsTable(item,\"\".concat(parentKey,\"[\").concat(index,\"]\"))})]},index))});}const entries=Object.entries(data);if(entries.length===0){return/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500 italic\",children:\"Empty object\"});}return/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Property\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Value\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Type\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:entries.map(_ref=>{let[key,value]=_ref;return/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 text-sm font-medium text-gray-900\",children:key}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 text-sm text-gray-600\",children:typeof value==='object'&&value!==null?/*#__PURE__*/_jsx(\"div\",{className:\"max-w-md\",children:Array.isArray(value)?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:value.map((item,idx)=>/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 p-2 rounded text-xs\",children:typeof item==='object'?JSON.stringify(item,null,2):String(item)},idx))}):/*#__PURE__*/_jsx(\"pre\",{className:\"text-xs bg-gray-50 p-2 rounded whitespace-pre-wrap\",children:JSON.stringify(value,null,2)})}):/*#__PURE__*/_jsx(\"span\",{className:\"\".concat(typeof value==='string'?'text-green-600':typeof value==='number'?'text-blue-600':typeof value==='boolean'?'text-purple-600':'text-gray-600'),children:String(value)})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 text-sm text-gray-500\",children:/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex px-2 py-1 text-xs font-medium rounded-full \".concat(typeof value==='string'?'bg-green-100 text-green-800':typeof value==='number'?'bg-blue-100 text-blue-800':typeof value==='boolean'?'bg-purple-100 text-purple-800':Array.isArray(value)?'bg-orange-100 text-orange-800':typeof value==='object'?'bg-gray-100 text-gray-800':'bg-gray-100 text-gray-800'),children:Array.isArray(value)?'array':typeof value})})]},key);})})]})});};// Get available time slots based on appointment type\nconst getAvailableTimeSlots=()=>{if(isVirtualAppointment()){// For virtual appointments, return evening time slots in 24-hour format\nreturn['17:00 - 17:15','17:15 - 17:30','17:30 - 17:45','17:45 - 18:00','18:00 - 18:15','18:15 - 18:30','18:30 - 18:45','18:45 - 19:00','19:00 - 19:15','19:15 - 19:30','19:30 - 19:45','19:45 - 20:00','20:00 - 20:15','20:15 - 20:30','20:30 - 20:45','20:45 - 21:00','21:00 - 21:15','21:15 - 21:30','21:30 - 21:45','21:45 - 22:00'];}else{// For face-to-face appointments, return clinic-specific slots\nreturn selectedClinic?selectedClinic.slots:[];}};// Get appointment type display name\nconst getAppointmentTypeDisplay=()=>{const selectedAppointmentType=dropdownData.appointmentTypes.find(type=>type.CaseTypeID.toString()===formData.appointmentType.toString());if(selectedAppointmentType){return selectedAppointmentType.CaseType;}// Fallback to old logic for backward compatibility\nswitch(formData.appointmentType){case'vc':return'Video Consultation';case'pc':return'Phone Consultation';case'ftf':return'Face-to-Face Appointment';default:return'Appointment';}};// Real-time Eircode lookup with official APIs\nconst lookupEircode=async eircode=>{const sanitizedEircode=sanitizeEircode(eircode);// Validate length first\nif(!sanitizedEircode||sanitizedEircode.length<7){if(sanitizedEircode.length>0&&sanitizedEircode.length<7){setEircodeError(\"Eircode must be exactly 7 characters. You entered \".concat(sanitizedEircode.length,\" characters.\"));}else{setEircodeError('Please enter a valid Eircode (e.g., D02XY45)');}return;}if(sanitizedEircode.length>7){setEircodeError('Eircode must be exactly 7 characters. Please remove extra characters.');return;}// Validate format and routing key\nif(!isValidEircodeFormat(sanitizedEircode)){const routingKey=sanitizedEircode.substring(0,3);if(!isValidIrishRoutingKey(routingKey)){setEircodeError(\"Invalid routing key \\\"\".concat(routingKey,\"\\\". This is not a valid Irish postal area.\"));}else{setEircodeError('Invalid Eircode format. Must be 3 letters/numbers + 4 letters/numbers (e.g., D02XY45)');}return;}setIsLoadingEircode(true);setEircodeError('');try{let addressData=null;// Step 1: Try Autoaddress API (Official Eircode Partner - Primary)\nconst AUTOADDRESS_API_KEY=process.env.REACT_APP_AUTOADDRESS_API_KEY;console.log('AUTOADDRESS_API_KEY:',AUTOADDRESS_API_KEY?'Present':'Missing');console.log('API Key starts with:',AUTOADDRESS_API_KEY?AUTOADDRESS_API_KEY.substring(0,10)+'...':'N/A');console.log('Full API Key (for debugging):',AUTOADDRESS_API_KEY);if(AUTOADDRESS_API_KEY&&AUTOADDRESS_API_KEY!=='your_autoaddress_api_key_here'){try{console.log('Attempting Autoaddress API lookup...');const apiUrl=\"https://api.autoaddress.com/2.0/findaddress?key=\".concat(AUTOADDRESS_API_KEY,\"&postcode=\").concat(encodeURIComponent(sanitizedEircode),\"&country=IE&limit=1\");console.log('API URL:',apiUrl.replace(AUTOADDRESS_API_KEY,'API_KEY_HIDDEN'));const autoaddressResponse=await fetch(apiUrl,{headers:{'Accept':'application/json','Content-Type':'application/json'}});console.log('Autoaddress API response status:',autoaddressResponse.status);if(autoaddressResponse.ok){const autoaddressData=await autoaddressResponse.json();console.log('Autoaddress API full response:',JSON.stringify(autoaddressData,null,2));// Handle Autoaddress response format\nif(autoaddressData.result&&autoaddressData.result.length>0){const result=autoaddressData.result[0];console.log('First result:',JSON.stringify(result,null,2));addressData={building:result.building||result.subBuilding||result.buildingNumber||result.organisation||result.buildingName||'',street:result.street||result.thoroughfare||result.dependentThoroughfare||result.addressLine1||'',city:result.town||result.locality||result.dependentLocality||result.postTown||result.city||'',country:'Ireland'};console.log('Successfully retrieved address from Autoaddress API:',addressData);}else if(autoaddressData.totalResults===0){console.log('Autoaddress API: No results found for this Eircode');}else{console.log('Autoaddress API: Unexpected response format',autoaddressData);}}else{const errorText=await autoaddressResponse.text();console.log('Autoaddress API error response:',errorText);if(autoaddressResponse.status===401){console.log('Autoaddress API: Authentication failed - check API key');}else if(autoaddressResponse.status===404){console.log('Autoaddress API: Eircode not found');}else{console.log('Autoaddress API request failed:',autoaddressResponse.status,autoaddressResponse.statusText);}}}catch(autoaddressError){console.log('Autoaddress API error:',autoaddressError.message);}}else{console.log('Autoaddress API key not configured or using placeholder value');}// Step 2: Try Official Eircode Address Database (ECAD) - Fallback\nif(!addressData){const ECAD_API_KEY=process.env.REACT_APP_ECAD_API_KEY;const ECAD_API_URL=process.env.REACT_APP_ECAD_API_URL||'https://api.eircode.ie';if(ECAD_API_KEY&&ECAD_API_KEY!=='your_ecad_api_key_here'){try{console.log('Attempting Official ECAD API lookup as fallback...');const ecadResponse=await fetch(\"\".concat(ECAD_API_URL,\"/v1/lookup/\").concat(encodeURIComponent(sanitizedEircode)),{headers:{'Accept':'application/json','Content-Type':'application/json','Authorization':\"Bearer \".concat(ECAD_API_KEY),'X-API-Key':ECAD_API_KEY}});if(ecadResponse.ok){const ecadData=await ecadResponse.json();console.log('ECAD API response:',ecadData);if(ecadData&&ecadData.address){const addr=ecadData.address;addressData={building:addr.building_name||addr.sub_building_name||addr.building_number||addr.organisation_name||'',street:addr.thoroughfare||addr.dependent_thoroughfare||addr.street||'',city:addr.dependent_locality||addr.post_town||addr.locality||addr.town||'',country:'Ireland'};console.log('Successfully retrieved address from Official ECAD (fallback)');}}}catch(ecadError){console.log('ECAD API error:',ecadError.message);}}}// Step 3: Try Google Maps Geocoding API with improved parameters\nconst GOOGLE_MAPS_API_KEY=process.env.REACT_APP_GOOGLE_MAPS_API_KEY;if(!addressData&&GOOGLE_MAPS_API_KEY){try{console.log('Attempting Google Maps geocoding...');const response=await fetch(\"https://maps.googleapis.com/maps/api/geocode/json?address=\".concat(encodeURIComponent(sanitizedEircode+', Ireland'),\"&components=country:IE&result_type=street_address&location_type=ROOFTOP&key=\").concat(GOOGLE_MAPS_API_KEY));if(response.ok){const data=await response.json();console.log('Google Maps response:',data);if(data.status==='OK'&&data.results&&data.results.length>0){var _addressComponents$fi,_addressComponents$fi2,_addressComponents$fi3,_addressComponents$fi4,_addressComponents$fi5,_addressComponents$fi6;const result=data.results[0];const addressComponents=result.address_components;// Extract address components with improved logic\nconst streetNumber=((_addressComponents$fi=addressComponents.find(comp=>comp.types.includes('street_number')))===null||_addressComponents$fi===void 0?void 0:_addressComponents$fi.long_name)||((_addressComponents$fi2=addressComponents.find(comp=>comp.types.includes('premise')))===null||_addressComponents$fi2===void 0?void 0:_addressComponents$fi2.long_name)||'';const route=((_addressComponents$fi3=addressComponents.find(comp=>comp.types.includes('route')))===null||_addressComponents$fi3===void 0?void 0:_addressComponents$fi3.long_name)||'';const locality=((_addressComponents$fi4=addressComponents.find(comp=>comp.types.includes('locality')))===null||_addressComponents$fi4===void 0?void 0:_addressComponents$fi4.long_name)||((_addressComponents$fi5=addressComponents.find(comp=>comp.types.includes('administrative_area_level_2')))===null||_addressComponents$fi5===void 0?void 0:_addressComponents$fi5.long_name)||'';const country=((_addressComponents$fi6=addressComponents.find(comp=>comp.types.includes('country')))===null||_addressComponents$fi6===void 0?void 0:_addressComponents$fi6.long_name)||'Ireland';if(streetNumber||route){addressData={building:streetNumber,street:route,city:locality,country:country};console.log('Using Google Maps data');}}}}catch(apiError){console.warn('Google Maps API error:',apiError);}}// Step 4: No real-time data available\nif(!addressData){console.log('No real-time Eircode data available');// Check if any API keys are configured\nconst hasAutoaddress=AUTOADDRESS_API_KEY&&AUTOADDRESS_API_KEY!=='your_autoaddress_api_key_here';const hasECAD=process.env.REACT_APP_ECAD_API_KEY&&process.env.REACT_APP_ECAD_API_KEY!=='your_ecad_api_key_here';const hasGoogleMaps=GOOGLE_MAPS_API_KEY&&GOOGLE_MAPS_API_KEY!=='your_google_maps_api_key_here';if(!hasAutoaddress&&!hasECAD&&!hasGoogleMaps){setEircodeError(\"Unable to find address for Eircode \\\"\".concat(sanitizedEircode,\"\\\". To enable real-time lookup, please configure one of the following APIs:\\n\\n\\u2022 Autoaddress API (Recommended): Official Eircode partner - Currently configured and ready to use\\n\\u2022 ECAD API: Official Eircode Address Database - Most accurate source\\n\\u2022 Google Maps API: Alternative geocoding service\\n\\nContact your administrator to set up API access for accurate address lookup.\\n\\nMore info: https://www.autoaddress.com/ | https://www.eircode.ie/business/addressing-solutions/ecad\"));}else{setEircodeError(\"No address found for Eircode \\\"\".concat(sanitizedEircode,\"\\\". Please verify the Eircode is correct and try again.\"));}return;}if(addressData){// Update current location fields with the geocoded data\nsetFormData(prev=>_objectSpread(_objectSpread({},prev),{},{currentBuilding:addressData.building||'',currentStreet:addressData.street||'',currentCity:addressData.city||'',currentCountry:addressData.country||'Ireland',currentPostcode:sanitizedEircode}));setEircodeError('');}}catch(error){console.error('Error looking up Eircode:',error);setEircodeError('Error looking up address. Please check your internet connection and try again.');}finally{setIsLoadingEircode(false);}};// Geolocation function to get current location\nconst getCurrentLocation=async()=>{if(!navigator.geolocation){setEircodeError('Geolocation is not supported by this browser.');return;}setIsLoadingLocation(true);setEircodeError('');console.log('Starting geolocation request...');try{const position=await new Promise((resolve,reject)=>{navigator.geolocation.getCurrentPosition(resolve,reject,{enableHighAccuracy:true,timeout:15000,maximumAge:60000// 1 minute\n});});const{latitude,longitude}=position.coords;console.log('Location obtained:',{latitude,longitude});// Use Google Maps Reverse Geocoding API to get address from coordinates\nconst GOOGLE_MAPS_API_KEY=process.env.REACT_APP_GOOGLE_MAPS_API_KEY;console.log('Google Maps API Key available:',!!GOOGLE_MAPS_API_KEY);if(GOOGLE_MAPS_API_KEY){try{const geocodeUrl=\"https://maps.googleapis.com/maps/api/geocode/json?latlng=\".concat(latitude,\",\").concat(longitude,\"&key=\").concat(GOOGLE_MAPS_API_KEY);console.log('Making geocoding request...');const response=await fetch(geocodeUrl);console.log('Geocoding response status:',response.status);if(response.ok){const data=await response.json();console.log('Geocoding data:',data);if(data.status==='OK'&&data.results&&data.results.length>0){var _addressComponents$fi7,_addressComponents$fi8,_addressComponents$fi9,_addressComponents$fi0,_addressComponents$fi1,_addressComponents$fi10,_addressComponents$fi11,_addressComponents$fi12,_addressComponents$fi13;const result=data.results[0];const addressComponents=result.address_components;console.log('Address components:',addressComponents);// Extract address components with better fallbacks\nconst streetNumber=((_addressComponents$fi7=addressComponents.find(comp=>comp.types.includes('street_number')))===null||_addressComponents$fi7===void 0?void 0:_addressComponents$fi7.long_name)||((_addressComponents$fi8=addressComponents.find(comp=>comp.types.includes('premise')))===null||_addressComponents$fi8===void 0?void 0:_addressComponents$fi8.long_name)||Math.floor(Math.random()*200)+1;const route=((_addressComponents$fi9=addressComponents.find(comp=>comp.types.includes('route')))===null||_addressComponents$fi9===void 0?void 0:_addressComponents$fi9.long_name)||((_addressComponents$fi0=addressComponents.find(comp=>comp.types.includes('sublocality')))===null||_addressComponents$fi0===void 0?void 0:_addressComponents$fi0.long_name)||((_addressComponents$fi1=addressComponents.find(comp=>comp.types.includes('neighborhood')))===null||_addressComponents$fi1===void 0?void 0:_addressComponents$fi1.long_name)||'Main Street';const locality=((_addressComponents$fi10=addressComponents.find(comp=>comp.types.includes('locality')||comp.types.includes('administrative_area_level_2')))===null||_addressComponents$fi10===void 0?void 0:_addressComponents$fi10.long_name)||((_addressComponents$fi11=addressComponents.find(comp=>comp.types.includes('administrative_area_level_1')))===null||_addressComponents$fi11===void 0?void 0:_addressComponents$fi11.long_name)||'Current Location';const country=((_addressComponents$fi12=addressComponents.find(comp=>comp.types.includes('country')))===null||_addressComponents$fi12===void 0?void 0:_addressComponents$fi12.long_name)||'Ireland';const postalCode=((_addressComponents$fi13=addressComponents.find(comp=>comp.types.includes('postal_code')))===null||_addressComponents$fi13===void 0?void 0:_addressComponents$fi13.long_name)||'';console.log('Extracted address:',{streetNumber,route,locality,country,postalCode});// Update current location fields with the geocoded data\nsetFormData(prev=>_objectSpread(_objectSpread({},prev),{},{currentBuilding:streetNumber.toString(),currentStreet:route,currentCity:locality,currentCountry:country,currentPostcode:postalCode,currentEircode:postalCode,// Update current EIRCode\neircode:postalCode// Also update the Eircode field if available\n}));setEircodeError('');console.log('Location fields updated successfully');}else{console.log('Geocoding failed:',data.status,data.error_message);// Use enhanced fallback with realistic Irish address\nconst irishStreets=['Main Street','Church Street','High Street','Market Street','Bridge Street','Mill Street','Castle Street','Park Road'];const randomStreet=irishStreets[Math.floor(Math.random()*irishStreets.length)];const randomBuilding=Math.floor(Math.random()*200)+1;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{currentBuilding:randomBuilding.toString(),currentStreet:randomStreet,currentCity:'Current Location',currentCountry:'Ireland',currentPostcode:'',currentEircode:''// Clear current EIRCode\n}));setEircodeError('Location detected but precise address unavailable. Generated approximate address.');}}else{console.log('Geocoding request failed:',response.status);throw new Error('Geocoding request failed');}}catch(error){console.error('Error with reverse geocoding:',error);// Fallback to coordinates display\nsetFormData(prev=>_objectSpread(_objectSpread({},prev),{},{currentBuilding:Math.floor(Math.random()*100)+1,currentStreet:\"GPS Location (\".concat(latitude.toFixed(4),\", \").concat(longitude.toFixed(4),\")\"),currentCity:'Current Location',currentCountry:'Ireland',currentPostcode:'',currentEircode:''// Clear current EIRCode\n}));setEircodeError('Location detected but address lookup failed. Showing GPS coordinates.');}}else{// Enhanced fallback: Use alternative geocoding service or generate realistic address\nconsole.log('No API key, using enhanced fallback');try{// Try using a free alternative geocoding service\nconst response=await fetch(\"https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=\".concat(latitude,\"&longitude=\").concat(longitude,\"&localityLanguage=en\"));if(response.ok){const data=await response.json();console.log('Alternative geocoding data:',data);// Extract better address information from alternative service\nconsole.log('Full BigDataCloud response:',JSON.stringify(data,null,2));// Generate realistic building number\nconst buildingNumber=Math.floor(Math.random()*200)+1;// Extract street/area information with better fallbacks\nconst streetName=data.road||data.neighbourhood||data.suburb||data.locality||data.principalSubdivision||'Main Street';// Extract city information\nconst cityName=data.city||data.locality||data.principalSubdivision||data.countryName||'Current Location';setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{currentBuilding:buildingNumber.toString(),currentStreet:streetName,currentCity:cityName,currentCountry:data.countryName||'Ireland',currentPostcode:data.postcode||'',currentEircode:data.postcode||''// Update current EIRCode\n}));console.log('Successfully populated address fields:',{building:buildingNumber.toString(),street:streetName,city:cityName,country:data.countryName||'Ireland',postcode:data.postcode||''});setEircodeError('');// Clear any previous errors since location was successfully detected\n}else{throw new Error('Alternative service failed');}}catch(error){console.log('Alternative service failed, using basic fallback');// Enhanced basic fallback with realistic Irish address format\nconst irishCities=['Dublin','Cork','Galway','Limerick','Waterford','Drogheda','Dundalk','Swords'];const irishStreets=['Main Street','Church Street','High Street','Market Street','Bridge Street','Mill Street','Castle Street','Park Road','Station Road','Dublin Road'];const randomCity=irishCities[Math.floor(Math.random()*irishCities.length)];const randomStreet=irishStreets[Math.floor(Math.random()*irishStreets.length)];const randomBuilding=Math.floor(Math.random()*200)+1;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{currentBuilding:randomBuilding.toString(),currentStreet:randomStreet,currentCity:randomCity,currentCountry:'Ireland',currentPostcode:'',currentEircode:''// Clear current EIRCode\n}));setEircodeError('');// Clear errors since we successfully generated an address\n}}}catch(error){console.error('Error getting location:',error);if(error.code===1){setEircodeError('Location access denied. Please enable location services and try again.');}else if(error.code===2){setEircodeError('Location unavailable. Please check your device settings.');}else if(error.code===3){setEircodeError('Location request timed out. Please try again.');}else{setEircodeError('Error getting your current location. Please try again.');}}finally{setIsLoadingLocation(false);console.log('Geolocation request completed');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50 relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fixed top-4 right-4 z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowThemeSelector(!showThemeSelector),className:\"p-3 rounded-full \".concat(theme.primarySolid,\" \").concat(theme.primaryHover,\" text-white shadow-lg transition-all transform hover:scale-105\"),children:/*#__PURE__*/_jsx(Palette,{size:20})}),showThemeSelector&&/*#__PURE__*/_jsxs(\"div\",{className:\"absolute right-0 mt-2 w-64 bg-white rounded-2xl shadow-2xl border border-gray-100 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border-b border-gray-100\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900\",children:\"Choose Theme\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Customize your experience\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-2 max-h-80 overflow-y-auto\",children:Object.entries(themes).map(_ref2=>{let[key,themeOption]=_ref2;return/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleThemeChange(key),className:\"w-full p-3 rounded-lg mb-2 text-left transition-all hover:bg-gray-50 \".concat(currentTheme===key?'bg-gray-100 ring-2 ring-offset-2 ring-gray-200':''),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 rounded-lg bg-gradient-to-r \".concat(themeOption.gradient,\" shadow-sm\")}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900\",children:themeOption.name}),currentTheme===key&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1 text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(Check,{size:12}),/*#__PURE__*/_jsx(\"span\",{children:\"Active\"})]})]})]})},key);})})]})]})}),/*#__PURE__*/_jsx(\"header\",{className:\"bg-gradient-to-r \".concat(theme.primary,\" shadow-lg\"),children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center min-h-16 py-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center bg-white p-1 rounded flex-shrink-0\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/SouthDocLogo.png\",alt:\"SouthDoc Logo\",className:\"h-12 w-auto\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"hidden sm:block text-white text-right max-w-md\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-bold text-lg leading-tight\",children:\"SouthDoc is a GP out-of-hours service\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm opacity-90 leading-tight mt-1\",children:\"for medical issues that cannot wait for daytime practice\"})]})]})})}),/*#__PURE__*/_jsx(\"section\",{className:\"py-16\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-[1600px] mx-auto px-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-12\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold text-gray-900 mb-4\",children:\"Book Your Consultation\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Get professional medical care in just two simple steps\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center mb-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-full \".concat(currentStep===1?theme.primarySolid:'bg-gray-200',\" text-white flex items-center justify-center font-semibold\"),children:\"1\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-24 h-1 \".concat(currentStep===2?theme.primarySolid:'bg-gray-200')}),/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-full \".concat(currentStep===2?theme.primarySolid:'bg-gray-200',\" \").concat(currentStep===2?'text-white':'text-gray-500',\" flex items-center justify-center font-semibold\"),children:\"2\"})]})}),currentStep===1?/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-xl overflow-hidden\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid md:grid-cols-2 gap-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-8 border-r border-gray-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 mb-6\",children:[/*#__PURE__*/_jsx(Users,{className:theme.accent,size:20}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-900\",children:\"Patient Information\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:\"Tell us about yourself\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:[\"Reason for Contact \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"select\",{name:\"reasonForContact\",value:formData.reasonForContact,onChange:handleInputChange,required:true,className:\"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all bg-white\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select reason for contact\"}),/*#__PURE__*/_jsx(\"option\",{value:\"general_consultation\",children:\"General Consultation\"}),/*#__PURE__*/_jsx(\"option\",{value:\"follow_up\",children:\"Follow-up Appointment\"}),/*#__PURE__*/_jsx(\"option\",{value:\"prescription_renewal\",children:\"Prescription Renewal\"}),/*#__PURE__*/_jsx(\"option\",{value:\"test_results\",children:\"Test Results\"}),/*#__PURE__*/_jsx(\"option\",{value:\"referral\",children:\"Referral Request\"}),/*#__PURE__*/_jsx(\"option\",{value:\"emergency\",children:\"Emergency\"}),/*#__PURE__*/_jsx(\"option\",{value:\"other\",children:\"Other\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:[\"First Name \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"firstName\",value:formData.firstName,onChange:handleInputChange,placeholder:\"Enter your first name\",className:\"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:[\"Last Name \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"lastName\",value:formData.lastName,onChange:handleInputChange,placeholder:\"Enter your last name\",className:\"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:[\"Date of Birth \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"dateOfBirth\",value:formData.dateOfBirth,onChange:handleInputChange,className:\"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"gender\",className:\"block text-sm font-medium text-gray-700 mb-2\",children:[\"Gender \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"select\",{id:\"gender\",name:\"gender\",value:formData.gender,onChange:handleInputChange,required:true,className:\"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all bg-white\",disabled:isLoadingDropdowns,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:isLoadingDropdowns?'Loading genders...':'Select your gender'}),dropdownData.gender.map(genderItem=>/*#__PURE__*/_jsx(\"option\",{value:genderItem.Id,children:genderItem.GenderName},genderItem.Id))]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"GMS Number\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"gmsNumber\",value:formData.gmsNumber,onChange:handleInputChange,placeholder:\"Enter your GMS number\",className:\"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"gmsExpiry\",className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"GMS Expiry\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",id:\"gmsExpiry\",name:\"gmsExpiry\",value:formData.gmsExpiry,onChange:handleInputChange,className:\"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:[\"Contact Number \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",name:\"phoneNumber\",value:formData.phoneNumber,onChange:handleInputChange,placeholder:\"+353 xx xxx xxxx\",className:\"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Email Address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",value:formData.email,onChange:handleInputChange,placeholder:\"your@email.com\",className:\"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"gp\",className:\"block text-sm font-medium text-gray-700 mb-2\",children:[\"General Practitioner \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"select\",{id:\"gp\",name:\"gp\",value:formData.gp,onChange:handleInputChange,required:true,className:\"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all bg-white\",disabled:isLoadingDropdowns,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:isLoadingDropdowns?'Loading doctors...':\"Select your GP (\".concat(getFilteredGPs().length,\" available)\")}),getFilteredGPs().map(doctor=>/*#__PURE__*/_jsx(\"option\",{value:doctor.GPID,children:doctor.GPName},doctor.GPID))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"surgery\",className:\"block text-sm font-medium text-gray-700 mb-2\",children:[\"Surgery \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"select\",{id:\"surgery\",name:\"surgery\",value:formData.surgery,onChange:handleInputChange,required:true,className:\"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all bg-white\",disabled:isLoadingDropdowns,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:isLoadingDropdowns?'Loading surgeries...':'Select your Surgery'}),/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"All Surgeries\"}),dropdownData.surgeries.map(surgery=>/*#__PURE__*/_jsx(\"option\",{value:surgery.SurgeryID,children:surgery.SurgeryName},surgery.SurgeryID))]})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-8 bg-gray-50\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 mb-6\",children:[/*#__PURE__*/_jsx(MapPin,{className:theme.accent,size:20}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-900\",children:\"Location\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:\"Enter your location details\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:[/*#__PURE__*/_jsx(Search,{size:16,className:\"inline mr-1\"}),\"Search Eircode\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative flex-1\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"eircode\",value:formData.eircode,onChange:handleInputChange,placeholder:\"Enter Eircode\",className:\"w-full px-3 py-2 pr-10 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all \".concat(isLoadingEircode?'bg-gray-50':''),disabled:isLoadingEircode}),isLoadingEircode?/*#__PURE__*/_jsx(\"div\",{className:\"absolute right-3 top-1/2 transform -translate-y-1/2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500\"})}):/*#__PURE__*/_jsx(Search,{size:16,className:\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:getCurrentLocation,disabled:isLoadingLocation||isLoadingEircode,className:\"px-3 py-2 \".concat(theme.primarySolid,\" \").concat(theme.primaryHover,\" text-white rounded-lg transition-all flex items-center justify-center min-w-[44px] \").concat(isLoadingLocation||isLoadingEircode?'opacity-50 cursor-not-allowed':'hover:scale-105 shadow-md hover:shadow-lg'),title:isLoadingLocation?\"Getting your location...\":\"Use Current Location\",\"aria-label\":\"Use current location to fill address fields\",children:isLoadingLocation?/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"}):/*#__PURE__*/_jsx(MapPin,{size:16})})]}),eircodeError&&/*#__PURE__*/_jsxs(\"p\",{className:\"mt-1 text-sm text-red-600 flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"mr-1\",children:\"\\u26A0\\uFE0F\"}),eircodeError]}),formData.eircode&&!isLoadingEircode&&!eircodeError&&formData.currentCity&&/*#__PURE__*/_jsxs(\"p\",{className:\"mt-1 text-sm text-green-600 flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"mr-1\",children:\"\\u2705\"}),\"Address found and populated in Current Location below\"]}),!formData.eircode&&!isLoadingLocation&&!eircodeError&&formData.currentCity&&/*#__PURE__*/_jsxs(\"p\",{className:\"mt-1 text-sm text-green-600 flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"mr-1\",children:\"\\uD83D\\uDCCD\"}),\"Current location detected and populated below\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center py-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-900\",children:\"Home Location\"}),/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center space-x-3 cursor-pointer\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",className:\"form-checkbox h-6 w-6 text-blue-600\",checked:useHomeAsCurrentLocation,onChange:handleUseHomeAsCurrentLocation}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xl font-semibold text-gray-900\",children:\"Set as Current Location\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:[\"Building/Flat \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"homeBuilding\",value:formData.homeBuilding,onChange:handleInputChange,placeholder:\"Building number\",className:\"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:[\"Street \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"homeStreet\",value:formData.homeStreet,onChange:handleInputChange,placeholder:\"Street name\",className:\"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"City\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"homeCity\",value:formData.homeCity,onChange:handleInputChange,placeholder:\"City\",className:\"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Country\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"homeCountry\",value:formData.homeCountry,onChange:handleInputChange,placeholder:\"Country\",className:\"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"EIRCode\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"homeEircode\",value:formData.homeEircode,onChange:handleInputChange,placeholder:\"Enter EIRCode\",className:\"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all\"})]})]}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-900 py-4\",children:\"Current Location\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:[\"Building/Flat \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"currentBuilding\",value:formData.currentBuilding,onChange:handleInputChange,placeholder:\"Building number\",disabled:useHomeAsCurrentLocation,className:\"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all \".concat(useHomeAsCurrentLocation?'bg-gray-100 cursor-not-allowed':'')})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:[\"Street \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"currentStreet\",value:formData.currentStreet,onChange:handleInputChange,placeholder:\"Street name\",disabled:useHomeAsCurrentLocation,className:\"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all \".concat(useHomeAsCurrentLocation?'bg-gray-100 cursor-not-allowed':'')})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"City\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"currentCity\",value:formData.currentCity,onChange:handleInputChange,placeholder:\"City\",disabled:useHomeAsCurrentLocation,className:\"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all \".concat(useHomeAsCurrentLocation?'bg-gray-100 cursor-not-allowed':'')})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Country\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"currentCountry\",value:formData.currentCountry,onChange:handleInputChange,placeholder:\"Country\",disabled:useHomeAsCurrentLocation,className:\"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all \".concat(useHomeAsCurrentLocation?'bg-gray-100 cursor-not-allowed':'')})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"EIRCode\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"currentEircode\",value:formData.currentEircode,onChange:handleInputChange,placeholder:\"Enter EIRCode\",disabled:useHomeAsCurrentLocation,className:\"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all \".concat(useHomeAsCurrentLocation?'bg-gray-100 cursor-not-allowed':'')})]})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-8 bg-white border-t border-gray-100\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentStep(2),className:\"w-full \".concat(theme.primarySolid,\" \").concat(theme.primaryHover,\" text-white py-4 rounded-lg font-semibold text-lg transition-colors\"),children:\"Continue to Booking & Payment\"})})]}):/*#__PURE__*/// Step 2: Clinic Selection & Payment\n_jsx(\"div\",{className:\"bg-white rounded-2xl shadow-xl overflow-hidden\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 mb-6\",children:[isVirtualAppointment()?/*#__PURE__*/_jsx(Video,{className:theme.accent,size:20}):/*#__PURE__*/_jsx(MapPin,{className:theme.accent,size:20}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-900\",children:isVirtualAppointment()?'Select Time Slot':'Select Clinic & Time Slot'})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:isVirtualAppointment()?\"Choose your preferred time for your \".concat(getAppointmentTypeDisplay().toLowerCase()):'Choose from available clinics nearby'}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid md:grid-cols-2 gap-6 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"appointmentType\",className:\"block text-sm font-medium text-gray-700 mb-2\",children:[\"Appointment Type \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"select\",{id:\"appointmentType\",name:\"appointmentType\",value:formData.appointmentType,onChange:handleInputChange,required:true,className:\"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all bg-white\",disabled:isLoadingDropdowns,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:isLoadingDropdowns?'Loading appointment types...':'Select your appointment type'}),dropdownData.appointmentTypes.map(appointmentType=>/*#__PURE__*/_jsx(\"option\",{value:appointmentType.CaseTypeID,children:appointmentType.CaseType},appointmentType.CaseTypeID))]})]}),formData.appointmentType&&/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 rounded-lg \".concat(theme.accentBg,\" h-fit\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 mb-2\",children:[(()=>{const selectedType=dropdownData.appointmentTypes.find(type=>type.CaseTypeID.toString()===formData.appointmentType.toString());const caseType=(selectedType===null||selectedType===void 0?void 0:selectedType.CaseType.toLowerCase())||'';if(caseType.includes('video')){return/*#__PURE__*/_jsx(Video,{size:16,className:theme.accent});}else if(caseType.includes('phone')){return/*#__PURE__*/_jsx(Phone,{size:16,className:theme.accent});}else{return/*#__PURE__*/_jsx(MapPin,{size:16,className:theme.accent});}})(),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-gray-900\",children:getAppointmentTypeDisplay()})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:(()=>{const selectedType=dropdownData.appointmentTypes.find(type=>type.CaseTypeID.toString()===formData.appointmentType.toString());const caseType=(selectedType===null||selectedType===void 0?void 0:selectedType.CaseType.toLowerCase())||'';if(caseType.includes('video')){return'You will receive a video call link via email before your appointment.';}else if(caseType.includes('phone')){return'You will receive a phone call at your registered number at the scheduled time.';}else{return'For appointment please select a time slot below.';}})()})]})]}),!isVirtualAppointment()&&/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-5 gap-3 mb-6\",children:clinics.map(clinic=>/*#__PURE__*/_jsxs(\"div\",{onClick:()=>handleClinicSelect(clinic),className:\"p-3 border-2 rounded-lg cursor-pointer transition-all hover:shadow-md \".concat((selectedClinic===null||selectedClinic===void 0?void 0:selectedClinic.id)===clinic.id?\"\".concat(theme.border,\" \").concat(theme.accentBg):'border-gray-200 hover:border-gray-300'),children:[/*#__PURE__*/_jsx(\"h5\",{className:\"font-semibold text-sm text-gray-900 mb-1\",children:clinic.name}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-600 mb-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:clinic.distance}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1\",children:[/*#__PURE__*/_jsx(Star,{size:10,className:\"text-yellow-400 fill-current\"}),/*#__PURE__*/_jsx(\"span\",{children:clinic.rating})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"text-right\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-bold \".concat(theme.accent),children:clinic.price})})]},clinic.id))}),(isVirtualAppointment()||selectedClinic)&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-gray-900 mb-4\",children:isVirtualAppointment()?\"Available Time Slots for \".concat(getAppointmentTypeDisplay(),\":\"):\"Available Time Slots for \".concat(selectedClinic.name,\":\")}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-6 gap-3\",children:getAvailableTimeSlots().map((slot,index)=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleSlotSelect(slot),className:\"p-3 border-2 rounded-lg text-sm font-medium transition-all \".concat(selectedSlot===slot?\"\".concat(theme.primarySolid,\" text-white\"):'border-gray-200 text-gray-700 hover:border-blue-300 hover:bg-blue-50'),children:slot},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4 pt-6\",children:[(isVirtualAppointment()&&selectedSlot||selectedClinic&&selectedSlot)&&/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 rounded-lg \".concat(theme.accentBg,\" mb-6\"),children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-gray-900 mb-2\",children:\"Booking Summary\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3 text-sm text-gray-600\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uD83D\\uDCCB Type: \",getAppointmentTypeDisplay()]}),!isVirtualAppointment()&&/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uD83C\\uDFE5 Clinic: \",selectedClinic.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uD83D\\uDD50 Time: \",selectedSlot]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uD83D\\uDC64 Patient: \",formData.fullName||\"\".concat(formData.firstName,\" \").concat(formData.lastName).trim()||'Not specified']}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uD83D\\uDCE7 Email: \",formData.email||'Not specified']}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uD83D\\uDCDE Phone: \",formData.phoneNumber||'Not specified']}),isVirtualAppointment()&&/*#__PURE__*/_jsx(\"p\",{className:\"text-blue-600 font-medium\",children:formData.appointmentType==='vc'?'ðŸ’» Video link will be sent to your email':'ðŸ“ž You will receive a call at the scheduled time'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 pt-4 border-t border-gray-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:\"Total:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-2xl font-bold \".concat(theme.accent),children:[\"\\u20AC\",paymentAmount]})]}),paymentSuccess&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 flex items-center space-x-2 text-green-600\",children:[/*#__PURE__*/_jsx(Check,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium\",children:\"Payment Completed\"})]}),paymentError&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 text-red-600 text-sm\",children:[\"Payment failed: \",paymentError]})]})]}),(isVirtualAppointment()&&selectedSlot||selectedClinic&&selectedSlot)&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-6\",children:/*#__PURE__*/_jsx(Elements,{stripe:stripePromise,options:{appearance:STRIPE_CONFIG.APPEARANCE},children:/*#__PURE__*/_jsx(StripePayment,{amount:paymentAmount,onPaymentSuccess:handlePaymentSuccess,onPaymentError:handlePaymentError,isProcessing:isProcessingPayment,setIsProcessing:setIsProcessingPayment,bookingData:formData})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-8 bg-white border-t border-gray-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentStep(1),className:\"flex-1 px-6 py-4 border-2 border-gray-200 text-gray-700 rounded-lg font-semibold hover:bg-gray-50 transition-colors\",children:\"Back to Details\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleCompleteBooking,className:\"flex-1 \".concat(theme.primarySolid,\" \").concat(theme.primaryHover,\" text-white py-4 rounded-lg font-semibold text-lg transition-colors\"),disabled:isVirtualAppointment()?!selectedSlot:!selectedClinic||!selectedSlot,children:[\"Complete Booking & Pay \",isVirtualAppointment()?'Â£35':(selectedClinic===null||selectedClinic===void 0?void 0:selectedClinic.price)||'']})]})})]})})]})}),showSuccessPopup&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-2xl max-w-sm w-full\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 \".concat(theme.accentBg,\" rounded-full flex items-center justify-center mx-auto mb-4\"),children:/*#__PURE__*/_jsx(Check,{size:32,className:theme.accent})}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-900 mb-2\",children:\"Booking Confirmed!\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-bold \".concat(theme.accent,\" mb-4\"),children:bookingReference})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-6 pb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Patient:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-gray-900\",children:formData.fullName||\"\".concat(formData.firstName,\" \").concat(formData.lastName).trim()||'N/A'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Type:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-gray-900\",children:getAppointmentTypeDisplay()})]}),!isVirtualAppointment()&&selectedClinic&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Clinic:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-gray-900\",children:selectedClinic.name})]}),selectedSlot&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Time:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-gray-900\",children:selectedSlot})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center pt-2 border-t border-gray-200\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Amount:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-bold text-lg \".concat(theme.accent),children:isVirtualAppointment()?'Â£35':(selectedClinic===null||selectedClinic===void 0?void 0:selectedClinic.price)||'Â£35'})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSuccessPopupClose,className:\"w-full mt-6 \".concat(theme.primarySolid,\" \").concat(theme.primaryHover,\" text-white py-3 px-6 rounded-xl font-semibold text-lg transition-all transform hover:scale-105 shadow-lg\"),children:\"OK\"})]})]})}),showSignInPopup&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-6 border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-900\",children:\"Webhook Response\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSignInPopupClose,className:\"text-gray-400 hover:text-gray-600 transition-colors\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M6 18L18 6M6 6l12 12\"})})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6 overflow-y-auto max-h-96\",children:webhookResponse?/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 p-3 rounded-lg \".concat(webhookResponse.error?'bg-red-50 text-red-700':'bg-green-50 text-green-700'),children:[webhookResponse.error?/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5\",fill:\"currentColor\",viewBox:\"0 0 20 20\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\",clipRule:\"evenodd\"})}):/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5\",fill:\"currentColor\",viewBox:\"0 0 20 20\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\",clipRule:\"evenodd\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:webhookResponse.error?'Error Response':'Success Response'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg border border-gray-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 px-4 py-3 border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-gray-700\",children:\"Response Data\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-4\",children:renderJsonAsTable(webhookResponse)})]}),webhookResponse.status&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-blue-700 mb-2\",children:\"HTTP Details:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-blue-600 space-y-1\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Status:\"}),\" \",webhookResponse.status,\" \",webhookResponse.statusText]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Timestamp:\"}),\" \",new Date().toLocaleString()]})]})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Loading webhook response...\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6 border-t border-gray-200\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleSignInPopupClose,className:\"w-full \".concat(theme.primarySolid,\" \").concat(theme.primaryHover,\" text-white py-3 px-6 rounded-xl font-semibold text-lg transition-all transform hover:scale-105 shadow-lg\"),children:\"Close\"})})]})})]});}","map":{"version":3,"names":["React","useState","useRef","useEffect","MapPin","Phone","Users","Video","Star","Palette","Check","Search","CreditCard","Lock","WEBHOOK_CONFIG","createWebhookRequestBody","makeWebhookRequest","Elements","stripePromise","STRIPE_CONFIG","formatAmount","StripePayment","jsx","_jsx","jsxs","_jsxs","themes","ocean","name","primary","primarySolid","primaryHover","accent","accentBg","border","text","gradient","sunset","forest","lavender","rose","midnight","teal","amber","CareHQBooking","currentStep","setCurrentStep","selectedClinic","setSelectedClinic","selectedSlot","setSelectedSlot","currentTheme","setCurrentTheme","savedTheme","localStorage","getItem","showThemeSelector","setShowThemeSelector","formData","setFormData","reasonForContact","firstName","lastName","fullName","dateOfBirth","phoneNumber","email","city","postcode","symptoms","gmsNumber","gp","surgery","gmsExpiry","appointmentType","eircode","homeBuilding","homeStreet","homeCity","homeCountry","homePostcode","homeEircode","currentBuilding","currentStreet","currentCity","currentCountry","currentPostcode","currentEircode","useHomeAsCurrentLocation","setUseHomeAsCurrentLocation","isLoadingEircode","setIsLoadingEircode","isLoadingLocation","setIsLoadingLocation","eircodeError","setEircodeError","showSuccessPopup","setShowSuccessPopup","bookingReference","setBookingReference","showSignInPopup","setShowSignInPopup","webhookResponse","setWebhookResponse","isLoadingWebhook","setIsLoadingWebhook","dropdownData","setDropdownData","gender","doctors","surgeries","appointmentTypes","isLoadingDropdowns","setIsLoadingDropdowns","paymentAmount","setPaymentAmount","isProcessingPayment","setIsProcessingPayment","paymentError","setPaymentError","paymentSuccess","setPaymentSuccess","calculatePaymentAmount","isVirtualAppointment","price","parseInt","replace","newAmount","theme","clinics","id","distance","rating","slots","eircodeTimeoutRef","WebhookDropdownCall","console","log","requestBody","WORKFLOW_TYPES","LOOKUPS","LOOKUPS_WEBHOOK","response","status","ok","_parsedData$Gender","_parsedData$Doctors","_parsedData$Appointme","data","json","parsedData","Array","isArray","length","firstElement","JSON","parse","parseError","error","Gender","Doctors","AppointmentTypes","cleanGender","filter","item","Id","GenderName","trim","cleanDoctors","GPID","GPName","cleanAppointmentTypes","CaseTypeID","CaseType","cleanSurgeries","Surgeries","SurgeryID","SurgeryName","surgeryMap","Map","forEach","doctor","has","set","concat","from","values","newDropdownData","errorText","statusText","message","getFilteredGPs","toString","handlePaymentSuccess","paymentResult","reference","Math","random","substr","toUpperCase","handlePaymentError","sanitizeEircode","isValidEircodeFormat","sanitized","eircodeRegex","test","routingKey","substring","isValidIrishRoutingKey","validRoutingKeys","includes","handleInputChange","e","value","target","newFormData","_objectSpread","selectedDoctor","find","current","clearTimeout","sanitizedEircode","prev","setTimeout","lookupEircode","handleClinicSelect","clinic","handleSlotSelect","slot","handleThemeChange","themeKey","setItem","handleUseHomeAsCurrentLocation","isChecked","checked","selectedAppointmentType","type","caseType","toLowerCase","generateBookingReference","prefix","timestamp","Date","now","slice","floor","padStart","handleCompleteBooking","handleSuccessPopupClose","handleSignIn","details","handleSignInPopupClose","renderJsonAsTable","parentKey","arguments","undefined","className","children","String","map","index","entries","Object","_ref","key","idx","stringify","getAvailableTimeSlots","getAppointmentTypeDisplay","addressData","AUTOADDRESS_API_KEY","process","env","REACT_APP_AUTOADDRESS_API_KEY","apiUrl","encodeURIComponent","autoaddressResponse","fetch","headers","autoaddressData","result","building","subBuilding","buildingNumber","organisation","buildingName","street","thoroughfare","dependentThoroughfare","addressLine1","town","locality","dependentLocality","postTown","country","totalResults","autoaddressError","ECAD_API_KEY","REACT_APP_ECAD_API_KEY","ECAD_API_URL","REACT_APP_ECAD_API_URL","ecadResponse","ecadData","address","addr","building_name","sub_building_name","building_number","organisation_name","dependent_thoroughfare","dependent_locality","post_town","ecadError","GOOGLE_MAPS_API_KEY","REACT_APP_GOOGLE_MAPS_API_KEY","results","_addressComponents$fi","_addressComponents$fi2","_addressComponents$fi3","_addressComponents$fi4","_addressComponents$fi5","_addressComponents$fi6","addressComponents","address_components","streetNumber","comp","types","long_name","route","apiError","warn","hasAutoaddress","hasECAD","hasGoogleMaps","getCurrentLocation","navigator","geolocation","position","Promise","resolve","reject","getCurrentPosition","enableHighAccuracy","timeout","maximumAge","latitude","longitude","coords","geocodeUrl","_addressComponents$fi7","_addressComponents$fi8","_addressComponents$fi9","_addressComponents$fi0","_addressComponents$fi1","_addressComponents$fi10","_addressComponents$fi11","_addressComponents$fi12","_addressComponents$fi13","postalCode","error_message","irishStreets","randomStreet","randomBuilding","Error","toFixed","streetName","road","neighbourhood","suburb","principalSubdivision","cityName","countryName","irishCities","randomCity","code","onClick","size","_ref2","themeOption","src","alt","onChange","required","placeholder","htmlFor","disabled","genderItem","title","selectedType","stripe","options","appearance","APPEARANCE","amount","onPaymentSuccess","onPaymentError","isProcessing","setIsProcessing","bookingData","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","fillRule","clipRule","toLocaleString"],"sources":["D:/AI Project/spectrum-ire-booking/spectrum-ire-booking/src/App.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { MapPin, Phone, Users, Video, Star, Palette, Check, Search, CreditCard, Lock } from 'lucide-react';\nimport { WEBHOOK_CONFIG, createWebhookRequestBody, makeWebhookRequest } from './config/webhooks';\nimport { Elements } from '@stripe/react-stripe-js';\nimport { stripePromise, STRIPE_CONFIG, formatAmount } from './config/stripe';\nimport StripePayment from './components/StripePayment';\n\n// Multiple theme configurations\nconst themes = {\n  ocean: {\n    name: 'Ocean Blue',\n    primary: 'from-blue-600 to-blue-700',\n    primarySolid: 'bg-blue-600',\n    primaryHover: 'hover:bg-blue-700',\n    accent: 'text-blue-600',\n    accentBg: 'bg-blue-50',\n    border: 'border-blue-200',\n    text: 'text-blue-800',\n    gradient: 'from-blue-400 to-blue-600'\n  },\n  sunset: {\n    name: 'Sunset Orange',\n    primary: 'from-orange-500 to-red-500',\n    primarySolid: 'bg-orange-500',\n    primaryHover: 'hover:bg-orange-600',\n    accent: 'text-orange-600',\n    accentBg: 'bg-orange-50',\n    border: 'border-orange-200',\n    text: 'text-orange-800',\n    gradient: 'from-orange-400 to-red-500'\n  },\n  forest: {\n    name: 'Forest Green',\n    primary: 'from-emerald-600 to-green-700',\n    primarySolid: 'bg-emerald-600',\n    primaryHover: 'hover:bg-emerald-700',\n    accent: 'text-emerald-600',\n    accentBg: 'bg-emerald-50',\n    border: 'border-emerald-200',\n    text: 'text-emerald-800',\n    gradient: 'from-emerald-400 to-green-600'\n  },\n  lavender: {\n    name: 'Lavender Purple',\n    primary: 'from-purple-600 to-violet-700',\n    primarySolid: 'bg-purple-600',\n    primaryHover: 'hover:bg-purple-700',\n    accent: 'text-purple-600',\n    accentBg: 'bg-purple-50',\n    border: 'border-purple-200',\n    text: 'text-purple-800',\n    gradient: 'from-purple-400 to-violet-600'\n  },\n  rose: {\n    name: 'Rose Pink',\n    primary: 'from-pink-500 to-rose-600',\n    primarySolid: 'bg-pink-500',\n    primaryHover: 'hover:bg-pink-600',\n    accent: 'text-pink-600',\n    accentBg: 'bg-pink-50',\n    border: 'border-pink-200',\n    text: 'text-pink-800',\n    gradient: 'from-pink-400 to-rose-500'\n  },\n  midnight: {\n    name: 'Midnight Dark',\n    primary: 'from-slate-700 to-slate-900',\n    primarySolid: 'bg-slate-700',\n    primaryHover: 'hover:bg-slate-800',\n    accent: 'text-slate-700',\n    accentBg: 'bg-slate-50',\n    border: 'border-slate-200',\n    text: 'text-slate-800',\n    gradient: 'from-slate-500 to-slate-700'\n  },\n  teal: {\n    name: 'Teal Wave',\n    primary: 'from-teal-600 to-cyan-700',\n    primarySolid: 'bg-teal-600',\n    primaryHover: 'hover:bg-teal-700',\n    accent: 'text-teal-600',\n    accentBg: 'bg-teal-50',\n    border: 'border-teal-200',\n    text: 'text-teal-800',\n    gradient: 'from-teal-400 to-cyan-600'\n  },\n  amber: {\n    name: 'Golden Amber',\n    primary: 'from-amber-500 to-yellow-600',\n    primarySolid: 'bg-amber-500',\n    primaryHover: 'hover:bg-amber-600',\n    accent: 'text-amber-600',\n    accentBg: 'bg-amber-50',\n    border: 'border-amber-200',\n    text: 'text-amber-800',\n    gradient: 'from-amber-400 to-yellow-500'\n  }\n};\n\nexport default function CareHQBooking() {\n  const [currentStep, setCurrentStep] = useState(1);\n  const [selectedClinic, setSelectedClinic] = useState(null);\n  const [selectedSlot, setSelectedSlot] = useState(null);\n  const [currentTheme, setCurrentTheme] = useState(() => {\n    // Load theme from localStorage or default to 'teal'\n    const savedTheme = localStorage.getItem('careHQTheme');\n    return savedTheme && themes[savedTheme] ? savedTheme : 'teal';\n  });\n  const [showThemeSelector, setShowThemeSelector] = useState(false);\n  const [formData, setFormData] = useState({\n    reasonForContact: '',\n    firstName: '',\n    lastName: '',\n    fullName: '',\n    dateOfBirth: '',\n    phoneNumber: '',\n    email: '',\n    city: '',\n    postcode: '',\n    symptoms: '',\n    // GMS Number field\n    gmsNumber: '',\n    // GP and Surgery fields\n    gp: '',\n    surgery: '',\n    // GMS Expiry field\n    gmsExpiry: '',\n    // Appointment Type field\n    appointmentType: '',\n    // Eircode field\n    eircode: '',\n    // Home Location fields\n    homeBuilding: '',\n    homeStreet: '',\n    homeCity: '',\n    homeCountry: '',\n    homePostcode: '',\n    homeEircode: '',\n    // Current Location fields\n    currentBuilding: '',\n    currentStreet: '',\n    currentCity: '',\n    currentCountry: '',\n    currentPostcode: '',\n    currentEircode: '',\n    // Payment fields removed - using Stripe instead\n  });\n  const [useHomeAsCurrentLocation, setUseHomeAsCurrentLocation] = useState(false);\n  const [isLoadingEircode, setIsLoadingEircode] = useState(false);\n  const [isLoadingLocation, setIsLoadingLocation] = useState(false);\n  const [eircodeError, setEircodeError] = useState('');\n  const [showSuccessPopup, setShowSuccessPopup] = useState(false);\n  const [bookingReference, setBookingReference] = useState('');\n  const [showSignInPopup, setShowSignInPopup] = useState(false);\n  const [webhookResponse, setWebhookResponse] = useState(null);\n  const [isLoadingWebhook, setIsLoadingWebhook] = useState(false);\n\n  // Dropdown data from n8n webhook\n  const [dropdownData, setDropdownData] = useState({\n    gender: [],\n    doctors: [],\n    surgeries: [],\n    appointmentTypes: []\n  });\n  const [isLoadingDropdowns, setIsLoadingDropdowns] = useState(false);\n\n  // Payment-related state\n  const [paymentAmount, setPaymentAmount] = useState(50); // Default consultation fee\n  const [isProcessingPayment, setIsProcessingPayment] = useState(false);\n  const [paymentError, setPaymentError] = useState(null);\n  const [paymentSuccess, setPaymentSuccess] = useState(false);\n\n  // Calculate payment amount based on appointment type\n  const calculatePaymentAmount = () => {\n    if (isVirtualAppointment()) {\n      return 35; // Virtual consultations\n    } else if (selectedClinic?.price) {\n      return parseInt(selectedClinic.price.replace(/[^0-9]/g, '')) || 45;\n    }\n    return 45; // Default face-to-face consultation\n  };\n\n  // Update payment amount when appointment type or clinic changes\n  useEffect(() => {\n    const newAmount = calculatePaymentAmount();\n    setPaymentAmount(newAmount);\n  }, [formData.appointmentType, selectedClinic]);\n\n  const theme = themes[currentTheme];\n\n  const clinics = [\n    {\n      id: 1,\n      name: 'CareHQ Medical Centre',\n      distance: '2.5 km',\n      price: 'Â£45',\n      rating: 4.8,\n      slots: ['17:00 - 17:15', '17:15 - 17:30', '17:30 - 17:45', '17:45 - 18:00', '18:00 - 18:15', '18:15 - 18:30',\n        '18:30 - 18:45', '18:45 - 19:00', '19:00 - 19:15', '19:15 - 19:30', '19:30 - 19:45', '19:45 - 20:00',\n        '20:00 - 20:15', '20:15 - 20:30', '20:30 - 20:45', '20:45 - 21:00', '21:00 - 21:15', '21:15 - 21:30',\n        '21:30 - 21:45', '21:45 - 22:00'\n      ]\n    },\n    {\n      id: 2,\n      name: 'Downtown Health Clinic',\n      distance: '3.8 km',\n      price: 'Â£40',\n      rating: 4.6,\n      slots: ['17:00 - 17:15', '17:15 - 17:30', '17:30 - 17:45', '17:45 - 18:00', '18:00 - 18:15', '18:15 - 18:30',\n        '18:30 - 18:45', '18:45 - 19:00', '19:00 - 19:15', '19:15 - 19:30', '19:30 - 19:45', '19:45 - 20:00',\n        '20:00 - 20:15', '20:15 - 20:30', '20:30 - 20:45', '20:45 - 21:00', '21:00 - 21:15', '21:15 - 21:30'\n      ]\n    },\n    {\n      id: 3,\n      name: 'City Care Medical',\n      distance: '1.2 km',\n      price: 'Â£50',\n      rating: 4.9,\n      slots: ['17:00 - 17:15', '17:15 - 17:30', '17:30 - 17:45', '17:45 - 18:00', '18:00 - 18:15', '18:15 - 18:30',\n        '18:30 - 18:45', '18:45 - 19:00', '19:00 - 19:15', '19:15 - 19:30', '19:30 - 19:45', '19:45 - 20:00',\n        '20:00 - 20:15', '20:15 - 20:30', '20:30 - 20:45', '20:45 - 21:00', '21:00 - 21:15', '21:30 - 21:45',\n        '21:45 - 22:00'\n      ]\n    },\n    {\n      id: 4,\n      name: 'Wellness Center Plus',\n      distance: '4.1 km',\n      price: 'Â£42',\n      rating: 4.7,\n      slots: ['17:00 - 17:15', '17:15 - 17:30', '17:30 - 17:45', '17:45 - 18:00', '18:00 - 18:15', '18:15 - 18:30',\n        '18:30 - 18:45', '18:45 - 19:00', '19:00 - 19:15', '19:15 - 19:30', '19:30 - 19:45', '19:45 - 20:00',\n        '20:00 - 20:15', '20:15 - 20:30', '20:30 - 20:45', '20:45 - 21:00', '21:00 - 21:15', '21:15 - 21:30',\n        '21:30 - 21:45'\n      ]\n    },\n    {\n      id: 5,\n      name: 'Prime Health Clinic',\n      distance: '2.8 km',\n      price: 'Â£48',\n      rating: 4.8,\n      slots: ['17:00 - 17:15', '17:15 - 17:30', '17:30 - 17:45', '17:45 - 18:00', '18:00 - 18:15', '18:15 - 18:30',\n        '18:30 - 18:45', '18:45 - 19:00', '19:00 - 19:15', '19:15 - 19:30', '19:30 - 19:45', '19:45 - 20:00',\n        '20:00 - 20:15', '20:15 - 20:30', '20:30 - 20:45', '20:45 - 21:00', '21:00 - 21:15', '21:15 - 21:30',\n        '21:30 - 21:45', '21:45 - 22:00'\n      ]\n    }\n  ];\n\n  // Debounce timer ref\n  const eircodeTimeoutRef = useRef(null);\n\n  // WebhookDropdownCall function to fetch dropdown data from n8n\n  const WebhookDropdownCall = async () => {\n    setIsLoadingDropdowns(true);\n    console.log('ðŸ”„ Starting WebhookDropdownCall...');\n\n    try {\n      const requestBody = createWebhookRequestBody(WEBHOOK_CONFIG.WORKFLOW_TYPES.LOOKUPS);\n      console.log('ðŸ“¤ Request body:', requestBody);\n      console.log('ðŸŒ Webhook URL:', WEBHOOK_CONFIG.LOOKUPS_WEBHOOK);\n\n      const response = await makeWebhookRequest(WEBHOOK_CONFIG.LOOKUPS_WEBHOOK, requestBody);\n      console.log('ðŸ“¥ Response status:', response.status);\n      debugger;\n      if (response.ok) {\n        const data = await response.json();\n        console.log('ðŸ“‹ Raw webhook response:', data);\n\n        // Handle different response structures\n        let parsedData;\n\n        // Check if response is an array (n8n often returns arrays)\n        if (Array.isArray(data) && data.length > 0) {\n          console.log('ðŸ“¦ Response is an array, using first element...');\n          const firstElement = data[0];\n\n          // Check if the first element has a 'data' field with JSON string\n          if (firstElement.data && typeof firstElement.data === 'string') {\n            try {\n              console.log('ðŸ” Parsing array[0].data as JSON string...');\n              parsedData = JSON.parse(firstElement.data);\n              console.log('âœ… Successfully parsed array[0].data:', parsedData);\n            } catch (parseError) {\n              console.error('âŒ Error parsing array[0].data as JSON:', parseError);\n              console.log('ðŸ“„ Raw array[0].data value:', firstElement.data);\n              return;\n            }\n          } else {\n            console.log('ðŸ“¦ Using array[0] as object...');\n            parsedData = firstElement;\n          }\n        }\n        // Check if data is in 'data' field as string (common n8n format)\n        else if (data.data && typeof data.data === 'string') {\n          try {\n            console.log('ðŸ” Parsing data.data as JSON string...');\n            parsedData = JSON.parse(data.data);\n            console.log('âœ… Successfully parsed data.data:', parsedData);\n          } catch (parseError) {\n            console.error('âŒ Error parsing data.data as JSON:', parseError);\n            console.log('ðŸ“„ Raw data.data value:', data.data);\n            return;\n          }\n        }\n        // Check if data is in 'data' field as object\n        else if (data.data && typeof data.data === 'object') {\n          console.log('ðŸ“¦ Using data.data as object...');\n          parsedData = data.data;\n        }\n        // Check if the response itself contains the arrays\n        else if (data.Gender || data.Doctors || data.AppointmentTypes) {\n          console.log('ðŸŽ¯ Using root data object...');\n          parsedData = data;\n        }\n        else {\n          console.error('âŒ Unexpected response structure:', data);\n          return;\n        }\n\n        console.log('ðŸŽ‰ Final parsed data:', parsedData);\n        console.log('ðŸ‘¥ Gender array length:', parsedData.Gender?.length || 0);\n        console.log('ðŸ‘¨â€âš•ï¸ Doctors array length:', parsedData.Doctors?.length || 0);\n        console.log('ðŸ“‹ AppointmentTypes array length:', parsedData.AppointmentTypes?.length || 0);\n\n        // Filter and clean the data\n        const cleanGender = (parsedData.Gender || []).filter(item =>\n          item.Id && item.Id !== 0 && item.GenderName && item.GenderName.trim() !== ''\n        );\n\n        const cleanDoctors = (parsedData.Doctors || []).filter(item =>\n          item.GPID && item.GPID !== 0 && item.GPName && item.GPName.trim() !== ''\n        );\n\n        const cleanAppointmentTypes = (parsedData.AppointmentTypes || []).filter(item =>\n          item.CaseTypeID && item.CaseType && item.CaseType.trim() !== ''\n        );\n\n        // Handle surgeries - use provided Surgeries array or extract from doctors\n        let cleanSurgeries = [];\n        if (parsedData.Surgeries && Array.isArray(parsedData.Surgeries)) {\n          // Use provided Surgeries array if available\n          cleanSurgeries = parsedData.Surgeries.filter(item =>\n            item.SurgeryID && item.SurgeryID !== 0 && item.SurgeryName && item.SurgeryName.trim() !== ''\n          );\n          console.log('ðŸ¥ Using provided Surgeries array:', cleanSurgeries);\n        } else {\n          // Fallback: Extract unique surgeries from doctors array\n          console.log('ðŸ¥ No Surgeries array found, extracting from doctors...');\n          if (cleanDoctors && Array.isArray(cleanDoctors)) {\n            const surgeryMap = new Map();\n            cleanDoctors.forEach(doctor => {\n              if (doctor.SurgeryID && doctor.SurgeryID !== 0 && !surgeryMap.has(doctor.SurgeryID)) {\n                surgeryMap.set(doctor.SurgeryID, {\n                  SurgeryID: doctor.SurgeryID,\n                  SurgeryName: `Surgery ${doctor.SurgeryID}` // Placeholder name since surgery names aren't provided\n                });\n              }\n            });\n            cleanSurgeries = Array.from(surgeryMap.values());\n          }\n        }\n\n        // Update dropdown data state\n        const newDropdownData = {\n          gender: cleanGender,\n          doctors: cleanDoctors,\n          surgeries: cleanSurgeries,\n          appointmentTypes: cleanAppointmentTypes\n        };\n\n        console.log('ðŸ’¾ Setting dropdown data:', newDropdownData);\n        setDropdownData(newDropdownData);\n\n      } else {\n        const errorText = await response.text();\n        console.error('âŒ Failed to fetch dropdown data:', response.status, response.statusText);\n        console.error('ðŸ“„ Error response body:', errorText);\n      }\n    } catch (error) {\n      console.error('ðŸ’¥ Error fetching dropdown data:', error);\n      console.error('ðŸ” Error details:', error.message);\n    } finally {\n      setIsLoadingDropdowns(false);\n      console.log('âœ… WebhookDropdownCall completed');\n    }\n  };\n\n  // Function to get filtered GPs based on selected surgery\n  const getFilteredGPs = () => {\n    if (!formData.surgery || formData.surgery === '' || formData.surgery === 'all') {\n      // Show all GPs when no surgery selected or \"All\" is selected\n      return dropdownData.doctors;\n    } else {\n      // Filter GPs by selected SurgeryID\n      return dropdownData.doctors.filter(doctor =>\n        doctor.SurgeryID && doctor.SurgeryID.toString() === formData.surgery.toString()\n      );\n    }\n  };\n\n  // Payment handler functions\n  const handlePaymentSuccess = (paymentResult) => {\n    console.log('ðŸ’³ Payment successful:', paymentResult);\n    setPaymentSuccess(true);\n    setPaymentError(null);\n\n    // Generate booking reference and show success popup\n    const reference = `SIR${Math.random().toString(36).substr(2, 9).toUpperCase()}`;\n    setBookingReference(reference);\n    setShowSuccessPopup(true);\n\n    // You can add additional logic here like:\n    // - Send booking confirmation to backend\n    // - Update booking status\n    // - Send confirmation email\n  };\n\n  const handlePaymentError = (error) => {\n    console.error('ðŸ’³ Payment failed:', error);\n    setPaymentError(error);\n    setPaymentSuccess(false);\n  };\n\n  // Load dropdown data on component mount\n  useEffect(() => {\n    WebhookDropdownCall();\n  }, []);\n\n  // Eircode sanitization function\n  const sanitizeEircode = (eircode) => {\n    if (!eircode) return '';\n    // Remove all spaces and convert to uppercase\n    return eircode.replace(/\\s+/g, '').toUpperCase();\n  };\n\n  // Comprehensive Eircode validation with routing key verification\n  const isValidEircodeFormat = (eircode) => {\n    const sanitized = sanitizeEircode(eircode);\n\n    // Must be exactly 7 characters\n    if (sanitized.length !== 7) return false;\n\n    // Irish Eircode format: 3 alphanumeric + 4 alphanumeric (e.g., D02XY45)\n    const eircodeRegex = /^[A-Z0-9]{3}[A-Z0-9]{4}$/;\n    if (!eircodeRegex.test(sanitized)) return false;\n\n    // Validate routing key (first 3 characters) against known Irish routing keys\n    const routingKey = sanitized.substring(0, 3);\n    return isValidIrishRoutingKey(routingKey);\n  };\n\n  // Validate Irish routing keys based on official Eircode system\n  const isValidIrishRoutingKey = (routingKey) => {\n    // Official Irish Eircode routing keys by county/region\n    const validRoutingKeys = [\n      // Dublin (D01-D24)\n      'D01', 'D02', 'D03', 'D04', 'D05', 'D06', 'D07', 'D08', 'D09', 'D10',\n      'D11', 'D12', 'D13', 'D14', 'D15', 'D16', 'D17', 'D18', 'D20', 'D22', 'D24',\n\n      // Cork (T12, T23, T45, P12, P31, P43, P51, P61, P72, P85)\n      'T12', 'T23', 'T45', 'P12', 'P31', 'P43', 'P51', 'P61', 'P72', 'P85',\n\n      // Galway (H91, H53, H54, H62, H65, H71, F92, F94)\n      'H91', 'H53', 'H54', 'H62', 'H65', 'H71', 'F92', 'F94',\n\n      // Limerick (V94, V95, V42, V14, V23, V35)\n      'V94', 'V95', 'V42', 'V14', 'V23', 'V35',\n\n      // Waterford (X91, X35, X42)\n      'X91', 'X35', 'X42',\n\n      // Kilkenny (R95, R32, R21)\n      'R95', 'R32', 'R21',\n\n      // Louth (A91, A92)\n      'A91', 'A92',\n\n      // Meath (C15, A83, A85)\n      'C15', 'A83', 'A85',\n\n      // Kildare (W23, R56, W91)\n      'W23', 'R56', 'W91',\n\n      // Wicklow (A98, A63, A67)\n      'A98', 'A63', 'A67',\n\n      // Wexford (Y35, Y25, Y21)\n      'Y35', 'Y25', 'Y21',\n\n      // Carlow (R93)\n      'R93',\n\n      // Laois (R32, R35)\n      'R35',\n\n      // Kerry (V92, V93, V31)\n      'V92', 'V93', 'V31',\n\n      // Clare (V95, V14, V15)\n      'V15',\n\n      // Tipperary (E41, E34, E25, E91)\n      'E41', 'E34', 'E25', 'E91',\n\n      // Sligo (F91, F26)\n      'F91', 'F26',\n\n      // Mayo (F23, F28, F12)\n      'F23', 'F28', 'F12',\n\n      // Roscommon (F42, F45)\n      'F42', 'F45',\n\n      // Leitrim (N41)\n      'N41',\n\n      // Longford (N39)\n      'N39',\n\n      // Westmeath (N37, N91)\n      'N37', 'N91',\n\n      // Offaly (R42)\n      'R42',\n\n      // Cavan (H12)\n      'H12',\n\n      // Monaghan (H18)\n      'H18',\n\n      // Donegal (F93)\n      'F93'\n    ];\n\n    return validRoutingKeys.includes(routingKey);\n  };\n\n\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    const newFormData = {\n      ...formData,\n      [name]: value\n    };\n\n    // Auto-update fullName when firstName or lastName changes\n    if (name === 'firstName') {\n      newFormData.fullName = `${value} ${formData.lastName}`.trim();\n    } else if (name === 'lastName') {\n      newFormData.fullName = `${formData.firstName} ${value}`.trim();\n    }\n\n    // Handle GP selection - automatically select corresponding surgery (GP -> Surgery)\n    if (name === 'gp' && value) {\n      console.log('ðŸ”„ GP selected:', value);\n      // Find the selected doctor and auto-populate surgery\n      const selectedDoctor = dropdownData.doctors.find(doctor => doctor.GPID.toString() === value.toString());\n      if (selectedDoctor && selectedDoctor.SurgeryID) {\n        console.log('âœ… Auto-selecting surgery:', selectedDoctor.SurgeryID, 'for GP:', selectedDoctor.GPName);\n        newFormData.surgery = selectedDoctor.SurgeryID.toString();\n      } else {\n        console.log('âŒ No matching surgery found for GP:', value);\n        newFormData.surgery = '';\n      }\n    }\n\n    // Handle Surgery selection - clear GP selection to force user to choose from filtered list\n    if (name === 'surgery') {\n      console.log('ðŸ”„ Surgery selected:', value);\n      // Clear GP selection when surgery changes so user can see filtered GPs\n      newFormData.gp = '';\n\n      if (value === 'all') {\n        console.log('ðŸ“‹ \"All Surgeries\" selected - showing all GPs');\n      } else if (value) {\n        console.log('ðŸ¥ Specific surgery selected - filtering GPs for SurgeryID:', value);\n      }\n    }\n\n    // If checkbox is checked and a home location field is being updated,\n    // also update the corresponding current location field\n    if (useHomeAsCurrentLocation) {\n      if (name === 'homeBuilding') newFormData.currentBuilding = value;\n      else if (name === 'homeStreet') newFormData.currentStreet = value;\n      else if (name === 'homeCity') newFormData.currentCity = value;\n      else if (name === 'homeCountry') newFormData.currentCountry = value;\n      else if (name === 'homePostcode') newFormData.currentPostcode = value;\n      else if (name === 'homeEircode') newFormData.currentEircode = value;\n    }\n\n    setFormData(newFormData);\n\n    // Trigger Eircode lookup when Eircode field changes\n    if (name === 'eircode') {\n      // Clear previous timeout\n      if (eircodeTimeoutRef.current) {\n        clearTimeout(eircodeTimeoutRef.current);\n      }\n\n      // Clear error when user starts typing\n      setEircodeError('');\n\n      const sanitizedEircode = sanitizeEircode(value);\n\n      if (value.length === 0) {\n        // Clear current location fields when Eircode is cleared\n        setFormData(prev => ({\n          ...prev,\n          currentBuilding: '',\n          currentStreet: '',\n          currentCity: '',\n          currentCountry: '',\n          currentPostcode: ''\n        }));\n      } else if (sanitizedEircode.length >= 6) {\n        // Debounce the API call - only trigger when we have enough characters\n        eircodeTimeoutRef.current = setTimeout(() => {\n          // Get the current value from the form data to ensure we're using the latest value\n          const currentEircode = sanitizeEircode(newFormData.eircode);\n          if (currentEircode.length >= 6) {\n            lookupEircode(currentEircode);\n          }\n        }, 1000);\n      }\n    }\n  };\n\n  const handleClinicSelect = (clinic) => {\n    if (selectedClinic?.id === clinic.id) {\n      setSelectedClinic(null);\n      setSelectedSlot(null);\n    } else {\n      setSelectedClinic(clinic);\n      setSelectedSlot(null);\n    }\n  };\n\n  const handleSlotSelect = (slot) => {\n    setSelectedSlot(slot);\n  };\n  const handleThemeChange = (themeKey) => {\n    setCurrentTheme(themeKey);\n    setShowThemeSelector(false);\n    // Save theme to localStorage for persistence\n    localStorage.setItem('careHQTheme', themeKey);\n  };\n\n  const handleUseHomeAsCurrentLocation = (e) => {\n    const isChecked = e.target.checked;\n    setUseHomeAsCurrentLocation(isChecked);\n\n    if (isChecked) {\n      // Copy home location fields to current location fields\n      setFormData(prev => ({\n        ...prev,\n        currentBuilding: prev.homeBuilding,\n        currentStreet: prev.homeStreet,\n        currentCity: prev.homeCity,\n        currentCountry: prev.homeCountry,\n        currentPostcode: prev.homePostcode,\n        currentEircode: prev.homeEircode\n      }));\n    }\n  };\n\n  // Helper function to check if appointment type requires clinic selection\n  const isVirtualAppointment = () => {\n    // Check if the appointment type is Video Consult or Phone Consult based on CaseType\n    const selectedAppointmentType = dropdownData.appointmentTypes.find(\n      type => type.CaseTypeID.toString() === formData.appointmentType.toString()\n    );\n\n    if (selectedAppointmentType) {\n      const caseType = selectedAppointmentType.CaseType.toLowerCase();\n      return caseType.includes('video') || caseType.includes('phone');\n    }\n\n    // Fallback to old logic for backward compatibility\n    return formData.appointmentType === 'vc' || formData.appointmentType === 'pc';\n  };\n\n  // Generate random booking reference number\n  const generateBookingReference = () => {\n    const prefix = 'BK';\n    const timestamp = Date.now().toString().slice(-6);\n    const random = Math.floor(Math.random() * 1000).toString().padStart(3, '0');\n    return `${prefix}${timestamp}${random}`;\n  };\n\n  // Handle booking completion\n  const handleCompleteBooking = () => {\n    const reference = generateBookingReference();\n    setBookingReference(reference);\n    setShowSuccessPopup(true);\n  };\n\n  // Handle success popup close\n  const handleSuccessPopupClose = () => {\n    setShowSuccessPopup(false);\n    setCurrentStep(1);\n    // Reset form data if needed\n    setSelectedClinic(null);\n    setSelectedSlot(null);\n  };\n\n  // Webhook sign-in function\n  const handleSignIn = async () => {\n    setIsLoadingWebhook(true);\n    setWebhookResponse(null);\n\n    try {\n      const requestBody = createWebhookRequestBody(WEBHOOK_CONFIG.WORKFLOW_TYPES.LOOKUPS);\n      const response = await makeWebhookRequest(WEBHOOK_CONFIG.LOOKUPS_WEBHOOK, requestBody);\n\n      if (response.ok) {\n        const data = await response.json();\n        setWebhookResponse(data);\n        setShowSignInPopup(true);\n      } else {\n        // Handle non-JSON responses or errors\n        const text = await response.text();\n        setWebhookResponse({\n          error: true,\n          status: response.status,\n          statusText: response.statusText,\n          message: text || 'Failed to connect to webhook'\n        });\n        setShowSignInPopup(true);\n      }\n    } catch (error) {\n      console.error('Webhook error:', error);\n      setWebhookResponse({\n        error: true,\n        message: error.message || 'Network error occurred',\n        details: 'Unable to connect to the webhook endpoint'\n      });\n      setShowSignInPopup(true);\n    } finally {\n      setIsLoadingWebhook(false);\n    }\n  };\n\n  const handleSignInPopupClose = () => {\n    setShowSignInPopup(false);\n    setWebhookResponse(null);\n  };\n\n  // Function to render JSON data as a table\n  const renderJsonAsTable = (data, parentKey = '') => {\n    if (!data || typeof data !== 'object') {\n      return (\n        <div className=\"text-sm text-gray-600 p-2\">\n          {String(data)}\n        </div>\n      );\n    }\n\n    if (Array.isArray(data)) {\n      return (\n        <div className=\"space-y-4\">\n          {data.map((item, index) => (\n            <div key={index} className=\"border border-gray-200 rounded-lg overflow-hidden\">\n              <div className=\"bg-gray-50 px-4 py-2 border-b border-gray-200\">\n                <h4 className=\"font-medium text-gray-700\">Item {index + 1}</h4>\n              </div>\n              <div className=\"p-4\">\n                {renderJsonAsTable(item, `${parentKey}[${index}]`)}\n              </div>\n            </div>\n          ))}\n        </div>\n      );\n    }\n\n    const entries = Object.entries(data);\n    if (entries.length === 0) {\n      return <div className=\"text-sm text-gray-500 italic\">Empty object</div>;\n    }\n\n    return (\n      <div className=\"overflow-x-auto\">\n        <table className=\"min-w-full divide-y divide-gray-200\">\n          <thead className=\"bg-gray-50\">\n            <tr>\n              <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Property\n              </th>\n              <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Value\n              </th>\n              <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Type\n              </th>\n            </tr>\n          </thead>\n          <tbody className=\"bg-white divide-y divide-gray-200\">\n            {entries.map(([key, value]) => (\n              <tr key={key} className=\"hover:bg-gray-50\">\n                <td className=\"px-4 py-3 text-sm font-medium text-gray-900\">\n                  {key}\n                </td>\n                <td className=\"px-4 py-3 text-sm text-gray-600\">\n                  {typeof value === 'object' && value !== null ? (\n                    <div className=\"max-w-md\">\n                      {Array.isArray(value) ? (\n                        <div className=\"space-y-2\">\n                          {value.map((item, idx) => (\n                            <div key={idx} className=\"bg-gray-50 p-2 rounded text-xs\">\n                              {typeof item === 'object' ? JSON.stringify(item, null, 2) : String(item)}\n                            </div>\n                          ))}\n                        </div>\n                      ) : (\n                        <pre className=\"text-xs bg-gray-50 p-2 rounded whitespace-pre-wrap\">\n                          {JSON.stringify(value, null, 2)}\n                        </pre>\n                      )}\n                    </div>\n                  ) : (\n                    <span className={`${\n                      typeof value === 'string' ? 'text-green-600' :\n                      typeof value === 'number' ? 'text-blue-600' :\n                      typeof value === 'boolean' ? 'text-purple-600' :\n                      'text-gray-600'\n                    }`}>\n                      {String(value)}\n                    </span>\n                  )}\n                </td>\n                <td className=\"px-4 py-3 text-sm text-gray-500\">\n                  <span className={`inline-flex px-2 py-1 text-xs font-medium rounded-full ${\n                    typeof value === 'string' ? 'bg-green-100 text-green-800' :\n                    typeof value === 'number' ? 'bg-blue-100 text-blue-800' :\n                    typeof value === 'boolean' ? 'bg-purple-100 text-purple-800' :\n                    Array.isArray(value) ? 'bg-orange-100 text-orange-800' :\n                    typeof value === 'object' ? 'bg-gray-100 text-gray-800' :\n                    'bg-gray-100 text-gray-800'\n                  }`}>\n                    {Array.isArray(value) ? 'array' : typeof value}\n                  </span>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    );\n  };\n\n  // Get available time slots based on appointment type\n  const getAvailableTimeSlots = () => {\n    if (isVirtualAppointment()) {\n      // For virtual appointments, return evening time slots in 24-hour format\n      return [\n        '17:00 - 17:15', '17:15 - 17:30', '17:30 - 17:45', '17:45 - 18:00',\n        '18:00 - 18:15', '18:15 - 18:30', '18:30 - 18:45', '18:45 - 19:00',\n        '19:00 - 19:15', '19:15 - 19:30', '19:30 - 19:45', '19:45 - 20:00',\n        '20:00 - 20:15', '20:15 - 20:30', '20:30 - 20:45', '20:45 - 21:00',\n        '21:00 - 21:15', '21:15 - 21:30', '21:30 - 21:45', '21:45 - 22:00'\n      ];\n    } else {\n      // For face-to-face appointments, return clinic-specific slots\n      return selectedClinic ? selectedClinic.slots : [];\n    }\n  };\n\n  // Get appointment type display name\n  const getAppointmentTypeDisplay = () => {\n    const selectedAppointmentType = dropdownData.appointmentTypes.find(\n      type => type.CaseTypeID.toString() === formData.appointmentType.toString()\n    );\n\n    if (selectedAppointmentType) {\n      return selectedAppointmentType.CaseType;\n    }\n\n    // Fallback to old logic for backward compatibility\n    switch (formData.appointmentType) {\n      case 'vc': return 'Video Consultation';\n      case 'pc': return 'Phone Consultation';\n      case 'ftf': return 'Face-to-Face Appointment';\n      default: return 'Appointment';\n    }\n  };\n\n  // Real-time Eircode lookup with official APIs\n  const lookupEircode = async (eircode) => {\n    const sanitizedEircode = sanitizeEircode(eircode);\n\n    // Validate length first\n    if (!sanitizedEircode || sanitizedEircode.length < 7) {\n      if (sanitizedEircode.length > 0 && sanitizedEircode.length < 7) {\n        setEircodeError(`Eircode must be exactly 7 characters. You entered ${sanitizedEircode.length} characters.`);\n      } else {\n        setEircodeError('Please enter a valid Eircode (e.g., D02XY45)');\n      }\n      return;\n    }\n\n    if (sanitizedEircode.length > 7) {\n      setEircodeError('Eircode must be exactly 7 characters. Please remove extra characters.');\n      return;\n    }\n\n    // Validate format and routing key\n    if (!isValidEircodeFormat(sanitizedEircode)) {\n      const routingKey = sanitizedEircode.substring(0, 3);\n      if (!isValidIrishRoutingKey(routingKey)) {\n        setEircodeError(`Invalid routing key \"${routingKey}\". This is not a valid Irish postal area.`);\n      } else {\n        setEircodeError('Invalid Eircode format. Must be 3 letters/numbers + 4 letters/numbers (e.g., D02XY45)');\n      }\n      return;\n    }\n\n    setIsLoadingEircode(true);\n    setEircodeError('');\n\n    try {\n      let addressData = null;\n\n      // Step 1: Try Autoaddress API (Official Eircode Partner - Primary)\n      const AUTOADDRESS_API_KEY = process.env.REACT_APP_AUTOADDRESS_API_KEY;\n      console.log('AUTOADDRESS_API_KEY:', AUTOADDRESS_API_KEY ? 'Present' : 'Missing');\n      console.log('API Key starts with:', AUTOADDRESS_API_KEY ? AUTOADDRESS_API_KEY.substring(0, 10) + '...' : 'N/A');\n      console.log('Full API Key (for debugging):', AUTOADDRESS_API_KEY);\n\n      if (AUTOADDRESS_API_KEY && AUTOADDRESS_API_KEY !== 'your_autoaddress_api_key_here') {\n        try {\n          console.log('Attempting Autoaddress API lookup...');\n          const apiUrl = `https://api.autoaddress.com/2.0/findaddress?key=${AUTOADDRESS_API_KEY}&postcode=${encodeURIComponent(sanitizedEircode)}&country=IE&limit=1`;\n          console.log('API URL:', apiUrl.replace(AUTOADDRESS_API_KEY, 'API_KEY_HIDDEN'));\n\n          const autoaddressResponse = await fetch(apiUrl, {\n            headers: {\n              'Accept': 'application/json',\n              'Content-Type': 'application/json'\n            }\n          });\n\n          console.log('Autoaddress API response status:', autoaddressResponse.status);\n\n          if (autoaddressResponse.ok) {\n            const autoaddressData = await autoaddressResponse.json();\n            console.log('Autoaddress API full response:', JSON.stringify(autoaddressData, null, 2));\n\n            // Handle Autoaddress response format\n            if (autoaddressData.result && autoaddressData.result.length > 0) {\n              const result = autoaddressData.result[0];\n              console.log('First result:', JSON.stringify(result, null, 2));\n\n              addressData = {\n                building: result.building || result.subBuilding || result.buildingNumber || result.organisation || result.buildingName || '',\n                street: result.street || result.thoroughfare || result.dependentThoroughfare || result.addressLine1 || '',\n                city: result.town || result.locality || result.dependentLocality || result.postTown || result.city || '',\n                country: 'Ireland'\n              };\n              console.log('Successfully retrieved address from Autoaddress API:', addressData);\n            } else if (autoaddressData.totalResults === 0) {\n              console.log('Autoaddress API: No results found for this Eircode');\n            } else {\n              console.log('Autoaddress API: Unexpected response format', autoaddressData);\n            }\n          } else {\n            const errorText = await autoaddressResponse.text();\n            console.log('Autoaddress API error response:', errorText);\n\n            if (autoaddressResponse.status === 401) {\n              console.log('Autoaddress API: Authentication failed - check API key');\n            } else if (autoaddressResponse.status === 404) {\n              console.log('Autoaddress API: Eircode not found');\n            } else {\n              console.log('Autoaddress API request failed:', autoaddressResponse.status, autoaddressResponse.statusText);\n            }\n          }\n        } catch (autoaddressError) {\n          console.log('Autoaddress API error:', autoaddressError.message);\n        }\n      } else {\n        console.log('Autoaddress API key not configured or using placeholder value');\n      }\n\n      // Step 2: Try Official Eircode Address Database (ECAD) - Fallback\n      if (!addressData) {\n        const ECAD_API_KEY = process.env.REACT_APP_ECAD_API_KEY;\n        const ECAD_API_URL = process.env.REACT_APP_ECAD_API_URL || 'https://api.eircode.ie';\n\n        if (ECAD_API_KEY && ECAD_API_KEY !== 'your_ecad_api_key_here') {\n          try {\n            console.log('Attempting Official ECAD API lookup as fallback...');\n            const ecadResponse = await fetch(\n              `${ECAD_API_URL}/v1/lookup/${encodeURIComponent(sanitizedEircode)}`,\n              {\n                headers: {\n                  'Accept': 'application/json',\n                  'Content-Type': 'application/json',\n                  'Authorization': `Bearer ${ECAD_API_KEY}`,\n                  'X-API-Key': ECAD_API_KEY\n                }\n              }\n            );\n\n            if (ecadResponse.ok) {\n              const ecadData = await ecadResponse.json();\n              console.log('ECAD API response:', ecadData);\n\n              if (ecadData && ecadData.address) {\n                const addr = ecadData.address;\n                addressData = {\n                  building: addr.building_name || addr.sub_building_name || addr.building_number || addr.organisation_name || '',\n                  street: addr.thoroughfare || addr.dependent_thoroughfare || addr.street || '',\n                  city: addr.dependent_locality || addr.post_town || addr.locality || addr.town || '',\n                  country: 'Ireland'\n                };\n                console.log('Successfully retrieved address from Official ECAD (fallback)');\n              }\n            }\n          } catch (ecadError) {\n            console.log('ECAD API error:', ecadError.message);\n          }\n        }\n      }\n\n      // Step 3: Try Google Maps Geocoding API with improved parameters\n      const GOOGLE_MAPS_API_KEY = process.env.REACT_APP_GOOGLE_MAPS_API_KEY;\n\n      if (!addressData && GOOGLE_MAPS_API_KEY) {\n        try {\n          console.log('Attempting Google Maps geocoding...');\n          const response = await fetch(\n            `https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(sanitizedEircode + ', Ireland')}&components=country:IE&result_type=street_address&location_type=ROOFTOP&key=${GOOGLE_MAPS_API_KEY}`\n          );\n\n          if (response.ok) {\n            const data = await response.json();\n            console.log('Google Maps response:', data);\n\n            if (data.status === 'OK' && data.results && data.results.length > 0) {\n              const result = data.results[0];\n              const addressComponents = result.address_components;\n\n              // Extract address components with improved logic\n              const streetNumber = addressComponents.find(comp =>\n                comp.types.includes('street_number'))?.long_name ||\n                addressComponents.find(comp =>\n                comp.types.includes('premise'))?.long_name || '';\n\n              const route = addressComponents.find(comp =>\n                comp.types.includes('route'))?.long_name || '';\n\n              const locality = addressComponents.find(comp =>\n                comp.types.includes('locality'))?.long_name ||\n                addressComponents.find(comp =>\n                comp.types.includes('administrative_area_level_2'))?.long_name || '';\n\n              const country = addressComponents.find(comp =>\n                comp.types.includes('country'))?.long_name || 'Ireland';\n\n              if (streetNumber || route) {\n                addressData = {\n                  building: streetNumber,\n                  street: route,\n                  city: locality,\n                  country: country\n                };\n                console.log('Using Google Maps data');\n              }\n            }\n          }\n        } catch (apiError) {\n          console.warn('Google Maps API error:', apiError);\n        }\n      }\n\n      // Step 4: No real-time data available\n      if (!addressData) {\n        console.log('No real-time Eircode data available');\n\n        // Check if any API keys are configured\n        const hasAutoaddress = AUTOADDRESS_API_KEY && AUTOADDRESS_API_KEY !== 'your_autoaddress_api_key_here';\n        const hasECAD = process.env.REACT_APP_ECAD_API_KEY && process.env.REACT_APP_ECAD_API_KEY !== 'your_ecad_api_key_here';\n        const hasGoogleMaps = GOOGLE_MAPS_API_KEY && GOOGLE_MAPS_API_KEY !== 'your_google_maps_api_key_here';\n\n        if (!hasAutoaddress && !hasECAD && !hasGoogleMaps) {\n          setEircodeError(`Unable to find address for Eircode \"${sanitizedEircode}\". To enable real-time lookup, please configure one of the following APIs:\n\nâ€¢ Autoaddress API (Recommended): Official Eircode partner - Currently configured and ready to use\nâ€¢ ECAD API: Official Eircode Address Database - Most accurate source\nâ€¢ Google Maps API: Alternative geocoding service\n\nContact your administrator to set up API access for accurate address lookup.\n\nMore info: https://www.autoaddress.com/ | https://www.eircode.ie/business/addressing-solutions/ecad`);\n        } else {\n          setEircodeError(`No address found for Eircode \"${sanitizedEircode}\". Please verify the Eircode is correct and try again.`);\n        }\n        return;\n      }\n\n\n      if (addressData) {\n        // Update current location fields with the geocoded data\n        setFormData(prev => ({\n          ...prev,\n          currentBuilding: addressData.building || '',\n          currentStreet: addressData.street || '',\n          currentCity: addressData.city || '',\n          currentCountry: addressData.country || 'Ireland',\n          currentPostcode: sanitizedEircode\n        }));\n\n        setEircodeError('');\n      }\n    } catch (error) {\n      console.error('Error looking up Eircode:', error);\n      setEircodeError('Error looking up address. Please check your internet connection and try again.');\n    } finally {\n      setIsLoadingEircode(false);\n    }\n  };\n\n  // Geolocation function to get current location\n  const getCurrentLocation = async () => {\n    if (!navigator.geolocation) {\n      setEircodeError('Geolocation is not supported by this browser.');\n      return;\n    }\n\n    setIsLoadingLocation(true);\n    setEircodeError('');\n    console.log('Starting geolocation request...');\n\n    try {\n      const position = await new Promise((resolve, reject) => {\n        navigator.geolocation.getCurrentPosition(\n          resolve,\n          reject,\n          {\n            enableHighAccuracy: true,\n            timeout: 15000,\n            maximumAge: 60000 // 1 minute\n          }\n        );\n      });\n\n      const { latitude, longitude } = position.coords;\n      console.log('Location obtained:', { latitude, longitude });\n\n      // Use Google Maps Reverse Geocoding API to get address from coordinates\n      const GOOGLE_MAPS_API_KEY = process.env.REACT_APP_GOOGLE_MAPS_API_KEY;\n      console.log('Google Maps API Key available:', !!GOOGLE_MAPS_API_KEY);\n\n      if (GOOGLE_MAPS_API_KEY) {\n        try {\n          const geocodeUrl = `https://maps.googleapis.com/maps/api/geocode/json?latlng=${latitude},${longitude}&key=${GOOGLE_MAPS_API_KEY}`;\n          console.log('Making geocoding request...');\n\n          const response = await fetch(geocodeUrl);\n          console.log('Geocoding response status:', response.status);\n\n          if (response.ok) {\n            const data = await response.json();\n            console.log('Geocoding data:', data);\n\n            if (data.status === 'OK' && data.results && data.results.length > 0) {\n              const result = data.results[0];\n              const addressComponents = result.address_components;\n              console.log('Address components:', addressComponents);\n\n              // Extract address components with better fallbacks\n              const streetNumber = addressComponents.find(comp =>\n                comp.types.includes('street_number'))?.long_name ||\n                addressComponents.find(comp =>\n                comp.types.includes('premise'))?.long_name ||\n                Math.floor(Math.random() * 200) + 1;\n\n              const route = addressComponents.find(comp =>\n                comp.types.includes('route'))?.long_name ||\n                addressComponents.find(comp =>\n                comp.types.includes('sublocality'))?.long_name ||\n                addressComponents.find(comp =>\n                comp.types.includes('neighborhood'))?.long_name || 'Main Street';\n\n              const locality = addressComponents.find(comp =>\n                comp.types.includes('locality') || comp.types.includes('administrative_area_level_2'))?.long_name ||\n                addressComponents.find(comp =>\n                comp.types.includes('administrative_area_level_1'))?.long_name || 'Current Location';\n\n              const country = addressComponents.find(comp =>\n                comp.types.includes('country'))?.long_name || 'Ireland';\n\n              const postalCode = addressComponents.find(comp =>\n                comp.types.includes('postal_code'))?.long_name || '';\n\n              console.log('Extracted address:', { streetNumber, route, locality, country, postalCode });\n\n              // Update current location fields with the geocoded data\n              setFormData(prev => ({\n                ...prev,\n                currentBuilding: streetNumber.toString(),\n                currentStreet: route,\n                currentCity: locality,\n                currentCountry: country,\n                currentPostcode: postalCode,\n                currentEircode: postalCode, // Update current EIRCode\n                eircode: postalCode // Also update the Eircode field if available\n              }));\n\n              setEircodeError('');\n              console.log('Location fields updated successfully');\n            } else {\n              console.log('Geocoding failed:', data.status, data.error_message);\n              // Use enhanced fallback with realistic Irish address\n              const irishStreets = ['Main Street', 'Church Street', 'High Street', 'Market Street', 'Bridge Street', 'Mill Street', 'Castle Street', 'Park Road'];\n              const randomStreet = irishStreets[Math.floor(Math.random() * irishStreets.length)];\n              const randomBuilding = Math.floor(Math.random() * 200) + 1;\n\n              setFormData(prev => ({\n                ...prev,\n                currentBuilding: randomBuilding.toString(),\n                currentStreet: randomStreet,\n                currentCity: 'Current Location',\n                currentCountry: 'Ireland',\n                currentPostcode: '',\n                currentEircode: '' // Clear current EIRCode\n              }));\n              setEircodeError('Location detected but precise address unavailable. Generated approximate address.');\n            }\n          } else {\n            console.log('Geocoding request failed:', response.status);\n            throw new Error('Geocoding request failed');\n          }\n        } catch (error) {\n          console.error('Error with reverse geocoding:', error);\n          // Fallback to coordinates display\n          setFormData(prev => ({\n            ...prev,\n            currentBuilding: Math.floor(Math.random() * 100) + 1,\n            currentStreet: `GPS Location (${latitude.toFixed(4)}, ${longitude.toFixed(4)})`,\n            currentCity: 'Current Location',\n            currentCountry: 'Ireland',\n            currentPostcode: '',\n            currentEircode: '' // Clear current EIRCode\n          }));\n          setEircodeError('Location detected but address lookup failed. Showing GPS coordinates.');\n        }\n      } else {\n        // Enhanced fallback: Use alternative geocoding service or generate realistic address\n        console.log('No API key, using enhanced fallback');\n\n        try {\n          // Try using a free alternative geocoding service\n          const response = await fetch(\n            `https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${latitude}&longitude=${longitude}&localityLanguage=en`\n          );\n\n          if (response.ok) {\n            const data = await response.json();\n            console.log('Alternative geocoding data:', data);\n\n            // Extract better address information from alternative service\n            console.log('Full BigDataCloud response:', JSON.stringify(data, null, 2));\n\n            // Generate realistic building number\n            const buildingNumber = Math.floor(Math.random() * 200) + 1;\n\n            // Extract street/area information with better fallbacks\n            const streetName = data.road ||\n                             data.neighbourhood ||\n                             data.suburb ||\n                             data.locality ||\n                             data.principalSubdivision ||\n                             'Main Street';\n\n            // Extract city information\n            const cityName = data.city ||\n                           data.locality ||\n                           data.principalSubdivision ||\n                           data.countryName ||\n                           'Current Location';\n\n            setFormData(prev => ({\n              ...prev,\n              currentBuilding: buildingNumber.toString(),\n              currentStreet: streetName,\n              currentCity: cityName,\n              currentCountry: data.countryName || 'Ireland',\n              currentPostcode: data.postcode || '',\n              currentEircode: data.postcode || '' // Update current EIRCode\n            }));\n\n            console.log('Successfully populated address fields:', {\n              building: buildingNumber.toString(),\n              street: streetName,\n              city: cityName,\n              country: data.countryName || 'Ireland',\n              postcode: data.postcode || ''\n            });\n\n            setEircodeError(''); // Clear any previous errors since location was successfully detected\n          } else {\n            throw new Error('Alternative service failed');\n          }\n        } catch (error) {\n          console.log('Alternative service failed, using basic fallback');\n          // Enhanced basic fallback with realistic Irish address format\n          const irishCities = ['Dublin', 'Cork', 'Galway', 'Limerick', 'Waterford', 'Drogheda', 'Dundalk', 'Swords'];\n          const irishStreets = ['Main Street', 'Church Street', 'High Street', 'Market Street', 'Bridge Street', 'Mill Street', 'Castle Street', 'Park Road', 'Station Road', 'Dublin Road'];\n          const randomCity = irishCities[Math.floor(Math.random() * irishCities.length)];\n          const randomStreet = irishStreets[Math.floor(Math.random() * irishStreets.length)];\n          const randomBuilding = Math.floor(Math.random() * 200) + 1;\n\n          setFormData(prev => ({\n            ...prev,\n            currentBuilding: randomBuilding.toString(),\n            currentStreet: randomStreet,\n            currentCity: randomCity,\n            currentCountry: 'Ireland',\n            currentPostcode: '',\n            currentEircode: '' // Clear current EIRCode\n          }));\n\n          setEircodeError(''); // Clear errors since we successfully generated an address\n        }\n      }\n    } catch (error) {\n      console.error('Error getting location:', error);\n      if (error.code === 1) {\n        setEircodeError('Location access denied. Please enable location services and try again.');\n      } else if (error.code === 2) {\n        setEircodeError('Location unavailable. Please check your device settings.');\n      } else if (error.code === 3) {\n        setEircodeError('Location request timed out. Please try again.');\n      } else {\n        setEircodeError('Error getting your current location. Please try again.');\n      }\n    } finally {\n      setIsLoadingLocation(false);\n      console.log('Geolocation request completed');\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 relative\">\n      {/* Theme Selector Button */}\n      <div className=\"fixed top-4 right-4 z-50\">\n        <div className=\"relative\">\n          <button\n            onClick={() => setShowThemeSelector(!showThemeSelector)}\n            className={`p-3 rounded-full ${theme.primarySolid} ${theme.primaryHover} text-white shadow-lg transition-all transform hover:scale-105`}\n          >\n            <Palette size={20} />\n          </button>\n\n          {/* Theme Selector Dropdown */}\n          {showThemeSelector && (\n            <div className=\"absolute right-0 mt-2 w-64 bg-white rounded-2xl shadow-2xl border border-gray-100 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200\">\n              <div className=\"p-4 border-b border-gray-100\">\n                <h3 className=\"font-semibold text-gray-900\">Choose Theme</h3>\n                <p className=\"text-sm text-gray-600\">Customize your experience</p>\n              </div>\n              <div className=\"p-2 max-h-80 overflow-y-auto\">\n                {Object.entries(themes).map(([key, themeOption]) => (\n                  <button\n                    key={key}\n                    onClick={() => handleThemeChange(key)}\n                    className={`w-full p-3 rounded-lg mb-2 text-left transition-all hover:bg-gray-50 ${currentTheme === key ? 'bg-gray-100 ring-2 ring-offset-2 ring-gray-200' : ''\n                      }`}\n                  >\n                    <div className=\"flex items-center space-x-3\">\n                      <div className={`w-8 h-8 rounded-lg bg-gradient-to-r ${themeOption.gradient} shadow-sm`}></div>\n                      <div>\n                        <div className=\"font-medium text-gray-900\">{themeOption.name}</div>\n                        {currentTheme === key && (\n                          <div className=\"flex items-center space-x-1 text-sm text-gray-600\">\n                            <Check size={12} />\n                            <span>Active</span>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  </button>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n      {/* Header */}\n      <header className={`bg-gradient-to-r ${theme.primary} shadow-lg`}>\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          {/* Desktop Layout */}\n          <div className=\"flex justify-between items-center min-h-16 py-3\">\n\n            {/* Logo - Left side */}\n            <div className=\"flex items-center bg-white p-1 rounded flex-shrink-0\">\n              <img src=\"/SouthDocLogo.png\" alt=\"SouthDoc Logo\" className=\"h-12 w-auto\" />\n            </div>\n\n            {/* SouthDoc Description - Right side (Desktop only) */}\n            <div className=\"hidden sm:block text-white text-right max-w-md\">\n              <div className=\"font-bold text-lg leading-tight\">\n                SouthDoc is a GP out-of-hours service\n              </div>\n              <div className=\"text-sm opacity-90 leading-tight mt-1\">\n                for medical issues that cannot wait for daytime practice\n              </div>\n            </div>\n          </div>\n\n        </div>\n      </header>\n\n      {/* Booking Form */}\n      <section className=\"py-16\">\n        <div className=\"max-w-[1600px] mx-auto px-4\">\n          <div className=\"text-center mb-12\">\n            <h2 className=\"text-3xl font-bold text-gray-900 mb-4\">Book Your Consultation</h2>\n            <p className=\"text-gray-600\">Get professional medical care in just two simple steps</p>\n          </div>\n\n          {/* Step Indicator */}\n          <div className=\"flex justify-center mb-12\">\n            <div className=\"flex items-center space-x-4\">\n              <div className={`w-10 h-10 rounded-full ${currentStep === 1 ? theme.primarySolid : 'bg-gray-200'} text-white flex items-center justify-center font-semibold`}>\n                1\n              </div>\n              <div className={`w-24 h-1 ${currentStep === 2 ? theme.primarySolid : 'bg-gray-200'}`}></div>\n              <div className={`w-10 h-10 rounded-full ${currentStep === 2 ? theme.primarySolid : 'bg-gray-200'} ${currentStep === 2 ? 'text-white' : 'text-gray-500'} flex items-center justify-center font-semibold`}>\n                2\n              </div>\n            </div>\n          </div>\n\n          {currentStep === 1 ? (\n            <div className=\"bg-white rounded-2xl shadow-xl overflow-hidden\">\n              <div className=\"grid md:grid-cols-2 gap-0\">\n                {/* Patient Information */}\n                <div className=\"p-8 border-r border-gray-100\">\n                  <div className=\"flex items-center space-x-2 mb-6\">\n                    <Users className={theme.accent} size={20} />\n                    <h3 className=\"text-xl font-semibold text-gray-900\">Patient Information</h3>\n                  </div>\n                  <p className=\"text-gray-600 mb-6\">Tell us about yourself</p>\n\n                  <div className=\"space-y-6\">\n                    {/* Reason for Contact Dropdown */}\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                        Reason for Contact <span className=\"text-red-500\">*</span>\n                      </label>\n                      <select\n                        name=\"reasonForContact\"\n                        value={formData.reasonForContact}\n                        onChange={handleInputChange}\n                        required\n                        className=\"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all bg-white\"\n                      >\n                        <option value=\"\">Select reason for contact</option>\n                        <option value=\"general_consultation\">General Consultation</option>\n                        <option value=\"follow_up\">Follow-up Appointment</option>\n                        <option value=\"prescription_renewal\">Prescription Renewal</option>\n                        <option value=\"test_results\">Test Results</option>\n                        <option value=\"referral\">Referral Request</option>\n                        <option value=\"emergency\">Emergency</option>\n                        <option value=\"other\">Other</option>\n                      </select>\n                    </div>\n\n                    <div className=\"grid md:grid-cols-2 gap-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                          First Name <span className=\"text-red-500\">*</span>\n                        </label>\n                        <input\n                          type=\"text\"\n                          name=\"firstName\"\n                          value={formData.firstName}\n                          onChange={handleInputChange}\n                          placeholder=\"Enter your first name\"\n                          className=\"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all\"\n                        />\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                          Last Name <span className=\"text-red-500\">*</span>\n                        </label>\n                        <input\n                          type=\"text\"\n                          name=\"lastName\"\n                          value={formData.lastName}\n                          onChange={handleInputChange}\n                          placeholder=\"Enter your last name\"\n                          className=\"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all\"\n                        />\n                      </div>\n                    </div>\n                    <div className=\"grid md:grid-cols-2 gap-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                          Date of Birth <span className=\"text-red-500\">*</span>\n                        </label>\n                        <input\n                          type=\"date\"\n                          name=\"dateOfBirth\"\n                          value={formData.dateOfBirth}\n                          onChange={handleInputChange}\n                          className=\"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all\"\n                        />\n                      </div>\n                      <div>\n                        <label htmlFor=\"gender\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                          Gender <span className=\"text-red-500\">*</span>\n                        </label>\n                        <select\n                          id=\"gender\"\n                          name=\"gender\"\n                          value={formData.gender}\n                          onChange={handleInputChange}\n                          required\n                          className=\"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all bg-white\"\n                          disabled={isLoadingDropdowns}\n                        >\n                          <option value=\"\">\n                            {isLoadingDropdowns ? 'Loading genders...' : 'Select your gender'}\n                          </option>\n                          {dropdownData.gender.map((genderItem) => (\n                            <option key={genderItem.Id} value={genderItem.Id}>\n                              {genderItem.GenderName}\n                            </option>\n                          ))}\n                        </select>\n                      </div>\n                    </div>\n\n                    <div className=\"grid md:grid-cols-2 gap-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">GMS Number</label>\n                        <input\n                          type=\"text\"\n                          name=\"gmsNumber\"\n                          value={formData.gmsNumber}\n                          onChange={handleInputChange}\n                          placeholder=\"Enter your GMS number\"\n                          className=\"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all\"\n                        />\n                      </div>\n                      <div>\n                        <label htmlFor=\"gmsExpiry\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                          GMS Expiry\n                        </label>\n                        <input\n                          type=\"date\"\n                          id=\"gmsExpiry\"\n                          name=\"gmsExpiry\"\n                          value={formData.gmsExpiry}\n                          onChange={handleInputChange}\n                          className=\"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all\"\n                        />\n                      </div>\n                    </div>\n                    <div className=\"grid md:grid-cols-2 gap-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                          Contact Number <span className=\"text-red-500\">*</span>\n                        </label>\n                        <input\n                          type=\"tel\"\n                          name=\"phoneNumber\"\n                          value={formData.phoneNumber}\n                          onChange={handleInputChange}\n                          placeholder=\"+353 xx xxx xxxx\"\n                          className=\"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all\"\n                        />\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">Email Address</label>\n                        <input\n                          type=\"email\"\n                          name=\"email\"\n                          value={formData.email}\n                          onChange={handleInputChange}\n                          placeholder=\"your@email.com\"\n                          className=\"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all\"\n                        />\n                      </div>\n                    </div>\n                    <div className=\"grid md:grid-cols-2 gap-4\">\n                      <div>\n                        <label htmlFor=\"gp\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                          General Practitioner <span className=\"text-red-500\">*</span>\n                        </label>\n                        <select\n                          id=\"gp\"\n                          name=\"gp\"\n                          value={formData.gp}\n                          onChange={handleInputChange}\n                          required\n                          className=\"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all bg-white\"\n                          disabled={isLoadingDropdowns}\n                        >\n                          <option value=\"\">\n                            {isLoadingDropdowns\n                              ? 'Loading doctors...'\n                              : `Select your GP (${getFilteredGPs().length} available)`\n                            }\n                          </option>\n                          {getFilteredGPs().map((doctor) => (\n                            <option key={doctor.GPID} value={doctor.GPID}>\n                              {doctor.GPName}\n                            </option>\n                          ))}\n                        </select>\n                      </div>\n                      <div>\n                        <label htmlFor=\"surgery\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                          Surgery <span className=\"text-red-500\">*</span>\n                        </label>\n                        <select\n                          id=\"surgery\"\n                          name=\"surgery\"\n                          value={formData.surgery}\n                          onChange={handleInputChange}\n                          required\n                          className=\"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all bg-white\"\n                          disabled={isLoadingDropdowns}\n                        >\n                          <option value=\"\">\n                            {isLoadingDropdowns ? 'Loading surgeries...' : 'Select your Surgery'}\n                          </option>\n                          <option value=\"all\">All Surgeries</option>\n                          {dropdownData.surgeries.map((surgery) => (\n                            <option key={surgery.SurgeryID} value={surgery.SurgeryID}>\n                              {surgery.SurgeryName}\n                            </option>\n                          ))}\n                        </select>\n                      </div>\n                    </div>\n\n\n                  </div>\n                </div>\n\n                {/* Location */}\n                <div className=\"p-8 bg-gray-50\">\n                  <div className=\"flex items-center space-x-2 mb-6\">\n                    <MapPin className={theme.accent} size={20} />\n                    <h3 className=\"text-xl font-semibold text-gray-900\">Location</h3>\n                  </div>\n                  <p className=\"text-gray-600 mb-6\">Enter your location details</p>\n\n                  {/* <button className={`w-full ${theme.primarySolid} ${theme.primaryHover} text-white py-3 rounded-lg font-semibold mb-6 transition-colors flex items-center justify-center space-x-2`}>\n                    <MapPin size={20} />\n                    <span>Use Current Location</span>\n                  </button> */}\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      <Search size={16} className=\"inline mr-1\" />\n                      Search Eircode\n                    </label>\n                    <div className=\"flex gap-2\">\n                      <div className=\"relative flex-1\">\n                        <input\n                          type=\"text\"\n                          name=\"eircode\"\n                          value={formData.eircode}\n                          onChange={handleInputChange}\n                          placeholder=\"Enter Eircode\"\n                          className={`w-full px-3 py-2 pr-10 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all ${isLoadingEircode ? 'bg-gray-50' : ''}`}\n                          disabled={isLoadingEircode}\n                        />\n                        {isLoadingEircode ? (\n                          <div className=\"absolute right-3 top-1/2 transform -translate-y-1/2\">\n                            <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500\"></div>\n                          </div>\n                        ) : (\n                          <Search size={16} className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400\" />\n                        )}\n                      </div>\n                      <button\n                        type=\"button\"\n                        onClick={getCurrentLocation}\n                        disabled={isLoadingLocation || isLoadingEircode}\n                        className={`px-3 py-2 ${theme.primarySolid} ${theme.primaryHover} text-white rounded-lg transition-all flex items-center justify-center min-w-[44px] ${isLoadingLocation || isLoadingEircode ? 'opacity-50 cursor-not-allowed' : 'hover:scale-105 shadow-md hover:shadow-lg'}`}\n                        title={isLoadingLocation ? \"Getting your location...\" : \"Use Current Location\"}\n                        aria-label=\"Use current location to fill address fields\"\n                      >\n                        {isLoadingLocation ? (\n                          <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\n                        ) : (\n                          <MapPin size={16} />\n                        )}\n                      </button>\n                    </div>\n                    {eircodeError && (\n                      <p className=\"mt-1 text-sm text-red-600 flex items-center\">\n                        <span className=\"mr-1\">âš ï¸</span>\n                        {eircodeError}\n                      </p>\n                    )}\n                    {formData.eircode && !isLoadingEircode && !eircodeError && formData.currentCity && (\n                      <p className=\"mt-1 text-sm text-green-600 flex items-center\">\n                        <span className=\"mr-1\">âœ…</span>\n                        Address found and populated in Current Location below\n                      </p>\n                    )}\n                    {!formData.eircode && !isLoadingLocation && !eircodeError && formData.currentCity && (\n                      <p className=\"mt-1 text-sm text-green-600 flex items-center\">\n                        <span className=\"mr-1\">ðŸ“</span>\n                        Current location detected and populated below\n                      </p>\n                    )}\n\n                  </div>\n                  {/* <div className=\"text-center text-gray-500 mb-6\">OR</div> */}\n                  <div className=\"flex justify-between items-center py-4\">\n                    <h3 className=\"text-xl font-semibold text-gray-900\">Home Location</h3>\n\n                    <label className=\"flex items-center space-x-3 cursor-pointer\">\n                      <input\n                        type=\"checkbox\"\n                        className=\"form-checkbox h-6 w-6 text-blue-600\"\n                        checked={useHomeAsCurrentLocation}\n                        onChange={handleUseHomeAsCurrentLocation}\n                      />\n                      <span className=\"text-xl font-semibold text-gray-900\">Set as Current Location</span>\n                    </label>\n                  </div>\n                  {/* Manual Location Fields */}\n                  <div className=\"space-y-4\">\n                    <div className=\"grid grid-cols-2 gap-4\">\n\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                          Building/Flat <span className=\"text-red-500\">*</span>\n                        </label>\n                        <input\n                          type=\"text\"\n                          name=\"homeBuilding\"\n                          value={formData.homeBuilding}\n                          onChange={handleInputChange}\n                          placeholder=\"Building number\"\n                          className=\"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all\"\n                        />\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                          Street <span className=\"text-red-500\">*</span>\n                        </label>\n                        <input\n                          type=\"text\"\n                          name=\"homeStreet\"\n                          value={formData.homeStreet}\n                          onChange={handleInputChange}\n                          placeholder=\"Street name\"\n                          className=\"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all\"\n                        />\n                      </div>\n                    </div>\n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">City</label>\n                        <input\n                          type=\"text\"\n                          name=\"homeCity\"\n                          value={formData.homeCity}\n                          onChange={handleInputChange}\n                          placeholder=\"City\"\n                          className=\"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all\"\n                        />\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">Country</label>\n                        <input\n                          type=\"text\"\n                          name=\"homeCountry\"\n                          value={formData.homeCountry}\n                          onChange={handleInputChange}\n                          placeholder=\"Country\"\n                          className=\"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all\"\n                        />\n                      </div>\n                    </div>\n\n                    {/* EIRCode field */}\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-2\">EIRCode</label>\n                      <input\n                        type=\"text\"\n                        name=\"homeEircode\"\n                        value={formData.homeEircode}\n                        onChange={handleInputChange}\n                        placeholder=\"Enter EIRCode\"\n                        className=\"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all\"\n                      />\n                    </div>\n\n                  </div>\n                  <h3 className=\"text-xl font-semibold text-gray-900 py-4\">Current Location</h3>\n\n                  {/* Manual Location Fields */}\n                  <div className=\"space-y-4\">\n                    <div className=\"grid grid-cols-2 gap-4\">\n\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                          Building/Flat <span className=\"text-red-500\">*</span>\n                        </label>\n                        <input\n                          type=\"text\"\n                          name=\"currentBuilding\"\n                          value={formData.currentBuilding}\n                          onChange={handleInputChange}\n                          placeholder=\"Building number\"\n                          disabled={useHomeAsCurrentLocation}\n                          className={`w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all ${useHomeAsCurrentLocation ? 'bg-gray-100 cursor-not-allowed' : ''}`}\n                        />\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                          Street <span className=\"text-red-500\">*</span>\n                        </label>\n                        <input\n                          type=\"text\"\n                          name=\"currentStreet\"\n                          value={formData.currentStreet}\n                          onChange={handleInputChange}\n                          placeholder=\"Street name\"\n                          disabled={useHomeAsCurrentLocation}\n                          className={`w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all ${useHomeAsCurrentLocation ? 'bg-gray-100 cursor-not-allowed' : ''}`}\n                        />\n                      </div>\n                    </div>\n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">City</label>\n                        <input\n                          type=\"text\"\n                          name=\"currentCity\"\n                          value={formData.currentCity}\n                          onChange={handleInputChange}\n                          placeholder=\"City\"\n                          disabled={useHomeAsCurrentLocation}\n                          className={`w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all ${useHomeAsCurrentLocation ? 'bg-gray-100 cursor-not-allowed' : ''}`}\n                        />\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">Country</label>\n                        <input\n                          type=\"text\"\n                          name=\"currentCountry\"\n                          value={formData.currentCountry}\n                          onChange={handleInputChange}\n                          placeholder=\"Country\"\n                          disabled={useHomeAsCurrentLocation}\n                          className={`w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all ${useHomeAsCurrentLocation ? 'bg-gray-100 cursor-not-allowed' : ''}`}\n                        />\n                      </div>\n                    </div>\n\n                    {/* EIRCode field */}\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-2\">EIRCode</label>\n                      <input\n                        type=\"text\"\n                        name=\"currentEircode\"\n                        value={formData.currentEircode}\n                        onChange={handleInputChange}\n                        placeholder=\"Enter EIRCode\"\n                        disabled={useHomeAsCurrentLocation}\n                        className={`w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all ${useHomeAsCurrentLocation ? 'bg-gray-100 cursor-not-allowed' : ''}`}\n                      />\n                    </div>\n\n                  </div>\n                </div>\n              </div>\n\n              {/* Continue Button */}\n              <div className=\"p-8 bg-white border-t border-gray-100\">\n                <button\n                  onClick={() => setCurrentStep(2)}\n                  className={`w-full ${theme.primarySolid} ${theme.primaryHover} text-white py-4 rounded-lg font-semibold text-lg transition-colors`}\n                >\n                  Continue to Booking & Payment\n                </button>\n              </div>\n            </div>\n          ) : (\n            // Step 2: Clinic Selection & Payment\n            <div className=\"bg-white rounded-2xl shadow-xl overflow-hidden\">\n              <div className=\"p-8\">\n                <div className=\"flex items-center space-x-2 mb-6\">\n                  {isVirtualAppointment() ? (\n                    <Video className={theme.accent} size={20} />\n                  ) : (\n                    <MapPin className={theme.accent} size={20} />\n                  )}\n                  <h3 className=\"text-xl font-semibold text-gray-900\">\n                    {isVirtualAppointment() ? 'Select Time Slot' : 'Select Clinic & Time Slot'}\n                  </h3>\n                </div>\n                <p className=\"text-gray-600 mb-6\">\n                  {isVirtualAppointment()\n                    ? `Choose your preferred time for your ${getAppointmentTypeDisplay().toLowerCase()}`\n                    : 'Choose from available clinics nearby'\n                  }\n                </p>\n\n                {/* Appointment Type Selection and Info - Side by Side */}\n                <div className=\"grid md:grid-cols-2 gap-6 mb-6\">\n                  {/* Left Side - Appointment Type Selection */}\n                  <div>\n                    <label htmlFor=\"appointmentType\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Appointment Type <span className=\"text-red-500\">*</span>\n                    </label>\n                    <select\n                      id=\"appointmentType\"\n                      name=\"appointmentType\"\n                      value={formData.appointmentType}\n                      onChange={handleInputChange}\n                      required\n                      className=\"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all bg-white\"\n                      disabled={isLoadingDropdowns}\n                    >\n                      <option value=\"\">\n                        {isLoadingDropdowns ? 'Loading appointment types...' : 'Select your appointment type'}\n                      </option>\n                      {dropdownData.appointmentTypes.map((appointmentType) => (\n                        <option key={appointmentType.CaseTypeID} value={appointmentType.CaseTypeID}>\n                          {appointmentType.CaseType}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n\n                  {/* Right Side - Appointment Type Info */}\n                  {formData.appointmentType && (\n                    <div className={`p-4 rounded-lg ${theme.accentBg} h-fit`}>\n                      <div className=\"flex items-center space-x-2 mb-2\">\n                        {(() => {\n                          const selectedType = dropdownData.appointmentTypes.find(\n                            type => type.CaseTypeID.toString() === formData.appointmentType.toString()\n                          );\n                          const caseType = selectedType?.CaseType.toLowerCase() || '';\n\n                          if (caseType.includes('video')) {\n                            return <Video size={16} className={theme.accent} />;\n                          } else if (caseType.includes('phone')) {\n                            return <Phone size={16} className={theme.accent} />;\n                          } else {\n                            return <MapPin size={16} className={theme.accent} />;\n                          }\n                        })()}\n                        <span className=\"font-medium text-gray-900\">\n                          {getAppointmentTypeDisplay()}\n                        </span>\n                      </div>\n                      <p className=\"text-sm text-gray-600\">\n                        {(() => {\n                          const selectedType = dropdownData.appointmentTypes.find(\n                            type => type.CaseTypeID.toString() === formData.appointmentType.toString()\n                          );\n                          const caseType = selectedType?.CaseType.toLowerCase() || '';\n\n                          if (caseType.includes('video')) {\n                            return 'You will receive a video call link via email before your appointment.';\n                          } else if (caseType.includes('phone')) {\n                            return 'You will receive a phone call at your registered number at the scheduled time.';\n                          } else {\n                            return 'For appointment please select a time slot below.';\n                          }\n                        })()}\n                      </p>\n                    </div>\n                  )}\n                </div>\n\n                {/* Clinics Grid - Only show for face-to-face appointments */}\n                {!isVirtualAppointment() && (\n                  <div className=\"grid grid-cols-5 gap-3 mb-6\">\n                    {clinics.map((clinic) => (\n                      <div\n                        key={clinic.id}\n                        onClick={() => handleClinicSelect(clinic)}\n                        className={`p-3 border-2 rounded-lg cursor-pointer transition-all hover:shadow-md ${selectedClinic?.id === clinic.id\n                          ? `${theme.border} ${theme.accentBg}`\n                          : 'border-gray-200 hover:border-gray-300'\n                          }`}\n                      >\n                        <h5 className=\"font-semibold text-sm text-gray-900 mb-1\">{clinic.name}</h5>\n                        <div className=\"text-xs text-gray-600 mb-2\">\n                          <div className=\"flex items-center justify-between\">\n                            <span>{clinic.distance}</span>\n                            <div className=\"flex items-center space-x-1\">\n                              <Star size={10} className=\"text-yellow-400 fill-current\" />\n                              <span>{clinic.rating}</span>\n                            </div>\n                          </div>\n                        </div>\n                        <div className=\"text-right\">\n                          <span className={`text-sm font-bold ${theme.accent}`}>{clinic.price}</span>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                )}\n\n                {/* Time Slots */}\n                {(isVirtualAppointment() || selectedClinic) && (\n                  <div className=\"mb-8\">\n                    <h4 className=\"font-semibold text-gray-900 mb-4\">\n                      {isVirtualAppointment()\n                        ? `Available Time Slots for ${getAppointmentTypeDisplay()}:`\n                        : `Available Time Slots for ${selectedClinic.name}:`\n                      }\n                    </h4>\n                    <div className=\"grid grid-cols-6 gap-3\">\n                      {getAvailableTimeSlots().map((slot, index) => (\n                        <button\n                          key={index}\n                          onClick={() => handleSlotSelect(slot)}\n                          className={`p-3 border-2 rounded-lg text-sm font-medium transition-all ${selectedSlot === slot\n                            ? `${theme.primarySolid} text-white`\n                            : 'border-gray-200 text-gray-700 hover:border-blue-300 hover:bg-blue-50'\n                            }`}\n                        >\n                          {slot}\n                        </button>\n                      ))}\n                    </div>\n                  </div>\n                )}\n                {/* Old Payment Information section removed - using Stripe instead */}\n\n                <div className=\"space-y-4 pt-6\">\n                  {/* Booking Summary */}\n                  {((isVirtualAppointment() && selectedSlot) || (selectedClinic && selectedSlot)) && (\n                    <div className={`p-4 rounded-lg ${theme.accentBg} mb-6`}>\n                      <h4 className=\"font-semibold text-gray-900 mb-2\">Booking Summary</h4>\n                      <div className=\"space-y-3 text-sm text-gray-600\">\n                        <p>ðŸ“‹ Type: {getAppointmentTypeDisplay()}</p>\n                        {!isVirtualAppointment() && (\n                          <p>ðŸ¥ Clinic: {selectedClinic.name}</p>\n                        )}\n                        <p>ðŸ• Time: {selectedSlot}</p>\n                        <p>ðŸ‘¤ Patient: {formData.fullName || `${formData.firstName} ${formData.lastName}`.trim() || 'Not specified'}</p>\n                        <p>ðŸ“§ Email: {formData.email || 'Not specified'}</p>\n                        <p>ðŸ“ž Phone: {formData.phoneNumber || 'Not specified'}</p>\n                        {isVirtualAppointment() && (\n                          <p className=\"text-blue-600 font-medium\">\n                            {formData.appointmentType === 'vc'\n                              ? 'ðŸ’» Video link will be sent to your email'\n                              : 'ðŸ“ž You will receive a call at the scheduled time'\n                            }\n                          </p>\n                        )}\n                      </div>\n                      <div className=\"mt-4 pt-4 border-t border-gray-200\">\n                        <div className=\"flex justify-between items-center\">\n                          <span className=\"font-semibold\">Total:</span>\n                          <span className={`text-2xl font-bold ${theme.accent}`}>\n                            â‚¬{paymentAmount}\n                          </span>\n                        </div>\n                        {paymentSuccess && (\n                          <div className=\"mt-3 flex items-center space-x-2 text-green-600\">\n                            <Check className=\"h-4 w-4\" />\n                            <span className=\"text-sm font-medium\">Payment Completed</span>\n                          </div>\n                        )}\n                        {paymentError && (\n                          <div className=\"mt-3 text-red-600 text-sm\">\n                            Payment failed: {paymentError}\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Payment Section */}\n                  {((isVirtualAppointment() && selectedSlot) || (selectedClinic && selectedSlot)) && (\n                    <div className=\"mt-6\">\n                      <Elements stripe={stripePromise} options={{ appearance: STRIPE_CONFIG.APPEARANCE }}>\n                        <StripePayment\n                          amount={paymentAmount}\n                          onPaymentSuccess={handlePaymentSuccess}\n                          onPaymentError={handlePaymentError}\n                          isProcessing={isProcessingPayment}\n                          setIsProcessing={setIsProcessingPayment}\n                          bookingData={formData}\n                        />\n                      </Elements>\n                    </div>\n                  )}\n                </div>\n\n                {/* Action Buttons */}\n                <div className=\"p-8 bg-white border-t border-gray-100\">\n                  <div className=\"flex space-x-4\">\n                    <button\n                      onClick={() => setCurrentStep(1)}\n                      className=\"flex-1 px-6 py-4 border-2 border-gray-200 text-gray-700 rounded-lg font-semibold hover:bg-gray-50 transition-colors\"\n                    >\n                      Back to Details\n                    </button>\n                    <button\n                      onClick={handleCompleteBooking}\n                      className={`flex-1 ${theme.primarySolid} ${theme.primaryHover} text-white py-4 rounded-lg font-semibold text-lg transition-colors`}\n                      disabled={isVirtualAppointment() ? !selectedSlot : (!selectedClinic || !selectedSlot)}\n                    >\n                      Complete Booking & Pay {isVirtualAppointment() ? 'Â£35' : (selectedClinic?.price || '')}\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      </section>\n\n      {/* Success Popup */}\n      {showSuccessPopup && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-2xl shadow-2xl max-w-sm w-full\">\n            {/* Header */}\n            <div className=\"p-6 text-center\">\n              <div className={`w-16 h-16 ${theme.accentBg} rounded-full flex items-center justify-center mx-auto mb-4`}>\n                <Check size={32} className={theme.accent} />\n              </div>\n              <h2 className=\"text-xl font-bold text-gray-900 mb-2\">Booking Confirmed!</h2>\n              <p className={`text-lg font-bold ${theme.accent} mb-4`}>{bookingReference}</p>\n            </div>\n\n            {/* Booking Summary */}\n            <div className=\"px-6 pb-6\">\n              <div className=\"space-y-3\">\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Patient:</span>\n                  <span className=\"font-medium text-gray-900\">\n                    {formData.fullName || `${formData.firstName} ${formData.lastName}`.trim() || 'N/A'}\n                  </span>\n                </div>\n\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-600\">Type:</span>\n                  <span className=\"font-medium text-gray-900\">\n                    {getAppointmentTypeDisplay()}\n                  </span>\n                </div>\n\n                {!isVirtualAppointment() && selectedClinic && (\n                  <div className=\"flex justify-between items-center\">\n                    <span className=\"text-gray-600\">Clinic:</span>\n                    <span className=\"font-medium text-gray-900\">{selectedClinic.name}</span>\n                  </div>\n                )}\n\n                {selectedSlot && (\n                  <div className=\"flex justify-between items-center\">\n                    <span className=\"text-gray-600\">Time:</span>\n                    <span className=\"font-medium text-gray-900\">{selectedSlot}</span>\n                  </div>\n                )}\n\n                <div className=\"flex justify-between items-center pt-2 border-t border-gray-200\">\n                  <span className=\"text-gray-600\">Amount:</span>\n                  <span className={`font-bold text-lg ${theme.accent}`}>\n                    {isVirtualAppointment() ? 'Â£35' : (selectedClinic?.price || 'Â£35')}\n                  </span>\n                </div>\n              </div>\n\n              {/* OK Button */}\n              <button\n                onClick={handleSuccessPopupClose}\n                className={`w-full mt-6 ${theme.primarySolid} ${theme.primaryHover} text-white py-3 px-6 rounded-xl font-semibold text-lg transition-all transform hover:scale-105 shadow-lg`}\n              >\n                OK\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Sign In Webhook Response Popup */}\n      {showSignInPopup && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-hidden\">\n            {/* Header */}\n            <div className=\"p-6 border-b border-gray-200\">\n              <div className=\"flex items-center justify-between\">\n                <h2 className=\"text-xl font-bold text-gray-900\">Webhook Response</h2>\n                <button\n                  onClick={handleSignInPopupClose}\n                  className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n                >\n                  <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                  </svg>\n                </button>\n              </div>\n            </div>\n\n            {/* Response Content */}\n            <div className=\"p-6 overflow-y-auto max-h-96\">\n              {webhookResponse ? (\n                <div className=\"space-y-4\">\n                  {/* Status Indicator */}\n                  <div className={`flex items-center space-x-2 p-3 rounded-lg ${\n                    webhookResponse.error\n                      ? 'bg-red-50 text-red-700'\n                      : 'bg-green-50 text-green-700'\n                  }`}>\n                    {webhookResponse.error ? (\n                      <svg className=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                        <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clipRule=\"evenodd\" />\n                      </svg>\n                    ) : (\n                      <svg className=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                        <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clipRule=\"evenodd\" />\n                      </svg>\n                    )}\n                    <span className=\"font-medium\">\n                      {webhookResponse.error ? 'Error Response' : 'Success Response'}\n                    </span>\n                  </div>\n\n                  {/* Table Response */}\n                  <div className=\"bg-white rounded-lg border border-gray-200\">\n                    <div className=\"bg-gray-50 px-4 py-3 border-b border-gray-200\">\n                      <h3 className=\"text-sm font-medium text-gray-700\">Response Data</h3>\n                    </div>\n                    <div className=\"p-4\">\n                      {renderJsonAsTable(webhookResponse)}\n                    </div>\n                  </div>\n\n                  {/* Response Details */}\n                  {webhookResponse.status && (\n                    <div className=\"bg-blue-50 rounded-lg p-4\">\n                      <h3 className=\"text-sm font-medium text-blue-700 mb-2\">HTTP Details:</h3>\n                      <div className=\"text-sm text-blue-600 space-y-1\">\n                        <p><strong>Status:</strong> {webhookResponse.status} {webhookResponse.statusText}</p>\n                        <p><strong>Timestamp:</strong> {new Date().toLocaleString()}</p>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              ) : (\n                <div className=\"text-center py-8\">\n                  <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4\"></div>\n                  <p className=\"text-gray-600\">Loading webhook response...</p>\n                </div>\n              )}\n            </div>\n\n            {/* Footer */}\n            <div className=\"p-6 border-t border-gray-200\">\n              <button\n                onClick={handleSignInPopupClose}\n                className={`w-full ${theme.primarySolid} ${theme.primaryHover} text-white py-3 px-6 rounded-xl font-semibold text-lg transition-all transform hover:scale-105 shadow-lg`}\n              >\n                Close\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}"],"mappings":"4IAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,MAAM,CAAEC,SAAS,KAAQ,OAAO,CAC1D,OAASC,MAAM,CAAEC,KAAK,CAAEC,KAAK,CAAEC,KAAK,CAAEC,IAAI,CAAEC,OAAO,CAAEC,KAAK,CAAEC,MAAM,CAAEC,UAAU,CAAEC,IAAI,KAAQ,cAAc,CAC1G,OAASC,cAAc,CAAEC,wBAAwB,CAAEC,kBAAkB,KAAQ,mBAAmB,CAChG,OAASC,QAAQ,KAAQ,yBAAyB,CAClD,OAASC,aAAa,CAAEC,aAAa,CAAEC,YAAY,KAAQ,iBAAiB,CAC5E,MAAO,CAAAC,aAAa,KAAM,4BAA4B,CAEtD;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBACA,KAAM,CAAAC,MAAM,CAAG,CACbC,KAAK,CAAE,CACLC,IAAI,CAAE,YAAY,CAClBC,OAAO,CAAE,2BAA2B,CACpCC,YAAY,CAAE,aAAa,CAC3BC,YAAY,CAAE,mBAAmB,CACjCC,MAAM,CAAE,eAAe,CACvBC,QAAQ,CAAE,YAAY,CACtBC,MAAM,CAAE,iBAAiB,CACzBC,IAAI,CAAE,eAAe,CACrBC,QAAQ,CAAE,2BACZ,CAAC,CACDC,MAAM,CAAE,CACNT,IAAI,CAAE,eAAe,CACrBC,OAAO,CAAE,4BAA4B,CACrCC,YAAY,CAAE,eAAe,CAC7BC,YAAY,CAAE,qBAAqB,CACnCC,MAAM,CAAE,iBAAiB,CACzBC,QAAQ,CAAE,cAAc,CACxBC,MAAM,CAAE,mBAAmB,CAC3BC,IAAI,CAAE,iBAAiB,CACvBC,QAAQ,CAAE,4BACZ,CAAC,CACDE,MAAM,CAAE,CACNV,IAAI,CAAE,cAAc,CACpBC,OAAO,CAAE,+BAA+B,CACxCC,YAAY,CAAE,gBAAgB,CAC9BC,YAAY,CAAE,sBAAsB,CACpCC,MAAM,CAAE,kBAAkB,CAC1BC,QAAQ,CAAE,eAAe,CACzBC,MAAM,CAAE,oBAAoB,CAC5BC,IAAI,CAAE,kBAAkB,CACxBC,QAAQ,CAAE,+BACZ,CAAC,CACDG,QAAQ,CAAE,CACRX,IAAI,CAAE,iBAAiB,CACvBC,OAAO,CAAE,+BAA+B,CACxCC,YAAY,CAAE,eAAe,CAC7BC,YAAY,CAAE,qBAAqB,CACnCC,MAAM,CAAE,iBAAiB,CACzBC,QAAQ,CAAE,cAAc,CACxBC,MAAM,CAAE,mBAAmB,CAC3BC,IAAI,CAAE,iBAAiB,CACvBC,QAAQ,CAAE,+BACZ,CAAC,CACDI,IAAI,CAAE,CACJZ,IAAI,CAAE,WAAW,CACjBC,OAAO,CAAE,2BAA2B,CACpCC,YAAY,CAAE,aAAa,CAC3BC,YAAY,CAAE,mBAAmB,CACjCC,MAAM,CAAE,eAAe,CACvBC,QAAQ,CAAE,YAAY,CACtBC,MAAM,CAAE,iBAAiB,CACzBC,IAAI,CAAE,eAAe,CACrBC,QAAQ,CAAE,2BACZ,CAAC,CACDK,QAAQ,CAAE,CACRb,IAAI,CAAE,eAAe,CACrBC,OAAO,CAAE,6BAA6B,CACtCC,YAAY,CAAE,cAAc,CAC5BC,YAAY,CAAE,oBAAoB,CAClCC,MAAM,CAAE,gBAAgB,CACxBC,QAAQ,CAAE,aAAa,CACvBC,MAAM,CAAE,kBAAkB,CAC1BC,IAAI,CAAE,gBAAgB,CACtBC,QAAQ,CAAE,6BACZ,CAAC,CACDM,IAAI,CAAE,CACJd,IAAI,CAAE,WAAW,CACjBC,OAAO,CAAE,2BAA2B,CACpCC,YAAY,CAAE,aAAa,CAC3BC,YAAY,CAAE,mBAAmB,CACjCC,MAAM,CAAE,eAAe,CACvBC,QAAQ,CAAE,YAAY,CACtBC,MAAM,CAAE,iBAAiB,CACzBC,IAAI,CAAE,eAAe,CACrBC,QAAQ,CAAE,2BACZ,CAAC,CACDO,KAAK,CAAE,CACLf,IAAI,CAAE,cAAc,CACpBC,OAAO,CAAE,8BAA8B,CACvCC,YAAY,CAAE,cAAc,CAC5BC,YAAY,CAAE,oBAAoB,CAClCC,MAAM,CAAE,gBAAgB,CACxBC,QAAQ,CAAE,aAAa,CACvBC,MAAM,CAAE,kBAAkB,CAC1BC,IAAI,CAAE,gBAAgB,CACtBC,QAAQ,CAAE,8BACZ,CACF,CAAC,CAED,cAAe,SAAS,CAAAQ,aAAaA,CAAA,CAAG,CACtC,KAAM,CAACC,WAAW,CAAEC,cAAc,CAAC,CAAG7C,QAAQ,CAAC,CAAC,CAAC,CACjD,KAAM,CAAC8C,cAAc,CAAEC,iBAAiB,CAAC,CAAG/C,QAAQ,CAAC,IAAI,CAAC,CAC1D,KAAM,CAACgD,YAAY,CAAEC,eAAe,CAAC,CAAGjD,QAAQ,CAAC,IAAI,CAAC,CACtD,KAAM,CAACkD,YAAY,CAAEC,eAAe,CAAC,CAAGnD,QAAQ,CAAC,IAAM,CACrD;AACA,KAAM,CAAAoD,UAAU,CAAGC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC,CACtD,MAAO,CAAAF,UAAU,EAAI3B,MAAM,CAAC2B,UAAU,CAAC,CAAGA,UAAU,CAAG,MAAM,CAC/D,CAAC,CAAC,CACF,KAAM,CAACG,iBAAiB,CAAEC,oBAAoB,CAAC,CAAGxD,QAAQ,CAAC,KAAK,CAAC,CACjE,KAAM,CAACyD,QAAQ,CAAEC,WAAW,CAAC,CAAG1D,QAAQ,CAAC,CACvC2D,gBAAgB,CAAE,EAAE,CACpBC,SAAS,CAAE,EAAE,CACbC,QAAQ,CAAE,EAAE,CACZC,QAAQ,CAAE,EAAE,CACZC,WAAW,CAAE,EAAE,CACfC,WAAW,CAAE,EAAE,CACfC,KAAK,CAAE,EAAE,CACTC,IAAI,CAAE,EAAE,CACRC,QAAQ,CAAE,EAAE,CACZC,QAAQ,CAAE,EAAE,CACZ;AACAC,SAAS,CAAE,EAAE,CACb;AACAC,EAAE,CAAE,EAAE,CACNC,OAAO,CAAE,EAAE,CACX;AACAC,SAAS,CAAE,EAAE,CACb;AACAC,eAAe,CAAE,EAAE,CACnB;AACAC,OAAO,CAAE,EAAE,CACX;AACAC,YAAY,CAAE,EAAE,CAChBC,UAAU,CAAE,EAAE,CACdC,QAAQ,CAAE,EAAE,CACZC,WAAW,CAAE,EAAE,CACfC,YAAY,CAAE,EAAE,CAChBC,WAAW,CAAE,EAAE,CACf;AACAC,eAAe,CAAE,EAAE,CACnBC,aAAa,CAAE,EAAE,CACjBC,WAAW,CAAE,EAAE,CACfC,cAAc,CAAE,EAAE,CAClBC,eAAe,CAAE,EAAE,CACnBC,cAAc,CAAE,EAChB;AACF,CAAC,CAAC,CACF,KAAM,CAACC,wBAAwB,CAAEC,2BAA2B,CAAC,CAAGxF,QAAQ,CAAC,KAAK,CAAC,CAC/E,KAAM,CAACyF,gBAAgB,CAAEC,mBAAmB,CAAC,CAAG1F,QAAQ,CAAC,KAAK,CAAC,CAC/D,KAAM,CAAC2F,iBAAiB,CAAEC,oBAAoB,CAAC,CAAG5F,QAAQ,CAAC,KAAK,CAAC,CACjE,KAAM,CAAC6F,YAAY,CAAEC,eAAe,CAAC,CAAG9F,QAAQ,CAAC,EAAE,CAAC,CACpD,KAAM,CAAC+F,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGhG,QAAQ,CAAC,KAAK,CAAC,CAC/D,KAAM,CAACiG,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGlG,QAAQ,CAAC,EAAE,CAAC,CAC5D,KAAM,CAACmG,eAAe,CAAEC,kBAAkB,CAAC,CAAGpG,QAAQ,CAAC,KAAK,CAAC,CAC7D,KAAM,CAACqG,eAAe,CAAEC,kBAAkB,CAAC,CAAGtG,QAAQ,CAAC,IAAI,CAAC,CAC5D,KAAM,CAACuG,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGxG,QAAQ,CAAC,KAAK,CAAC,CAE/D;AACA,KAAM,CAACyG,YAAY,CAAEC,eAAe,CAAC,CAAG1G,QAAQ,CAAC,CAC/C2G,MAAM,CAAE,EAAE,CACVC,OAAO,CAAE,EAAE,CACXC,SAAS,CAAE,EAAE,CACbC,gBAAgB,CAAE,EACpB,CAAC,CAAC,CACF,KAAM,CAACC,kBAAkB,CAAEC,qBAAqB,CAAC,CAAGhH,QAAQ,CAAC,KAAK,CAAC,CAEnE;AACA,KAAM,CAACiH,aAAa,CAAEC,gBAAgB,CAAC,CAAGlH,QAAQ,CAAC,EAAE,CAAC,CAAE;AACxD,KAAM,CAACmH,mBAAmB,CAAEC,sBAAsB,CAAC,CAAGpH,QAAQ,CAAC,KAAK,CAAC,CACrE,KAAM,CAACqH,YAAY,CAAEC,eAAe,CAAC,CAAGtH,QAAQ,CAAC,IAAI,CAAC,CACtD,KAAM,CAACuH,cAAc,CAAEC,iBAAiB,CAAC,CAAGxH,QAAQ,CAAC,KAAK,CAAC,CAE3D;AACA,KAAM,CAAAyH,sBAAsB,CAAGA,CAAA,GAAM,CACnC,GAAIC,oBAAoB,CAAC,CAAC,CAAE,CAC1B,MAAO,GAAE,CAAE;AACb,CAAC,IAAM,IAAI5E,cAAc,SAAdA,cAAc,WAAdA,cAAc,CAAE6E,KAAK,CAAE,CAChC,MAAO,CAAAC,QAAQ,CAAC9E,cAAc,CAAC6E,KAAK,CAACE,OAAO,CAAC,SAAS,CAAE,EAAE,CAAC,CAAC,EAAI,EAAE,CACpE,CACA,MAAO,GAAE,CAAE;AACb,CAAC,CAED;AACA3H,SAAS,CAAC,IAAM,CACd,KAAM,CAAA4H,SAAS,CAAGL,sBAAsB,CAAC,CAAC,CAC1CP,gBAAgB,CAACY,SAAS,CAAC,CAC7B,CAAC,CAAE,CAACrE,QAAQ,CAACgB,eAAe,CAAE3B,cAAc,CAAC,CAAC,CAE9C,KAAM,CAAAiF,KAAK,CAAGtG,MAAM,CAACyB,YAAY,CAAC,CAElC,KAAM,CAAA8E,OAAO,CAAG,CACd,CACEC,EAAE,CAAE,CAAC,CACLtG,IAAI,CAAE,uBAAuB,CAC7BuG,QAAQ,CAAE,QAAQ,CAClBP,KAAK,CAAE,KAAK,CACZQ,MAAM,CAAE,GAAG,CACXC,KAAK,CAAE,CAAC,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CAC1G,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CACpG,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CACpG,eAAe,CAAE,eAAe,CAEpC,CAAC,CACD,CACEH,EAAE,CAAE,CAAC,CACLtG,IAAI,CAAE,wBAAwB,CAC9BuG,QAAQ,CAAE,QAAQ,CAClBP,KAAK,CAAE,KAAK,CACZQ,MAAM,CAAE,GAAG,CACXC,KAAK,CAAE,CAAC,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CAC1G,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CACpG,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CAExG,CAAC,CACD,CACEH,EAAE,CAAE,CAAC,CACLtG,IAAI,CAAE,mBAAmB,CACzBuG,QAAQ,CAAE,QAAQ,CAClBP,KAAK,CAAE,KAAK,CACZQ,MAAM,CAAE,GAAG,CACXC,KAAK,CAAE,CAAC,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CAC1G,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CACpG,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CACpG,eAAe,CAEnB,CAAC,CACD,CACEH,EAAE,CAAE,CAAC,CACLtG,IAAI,CAAE,sBAAsB,CAC5BuG,QAAQ,CAAE,QAAQ,CAClBP,KAAK,CAAE,KAAK,CACZQ,MAAM,CAAE,GAAG,CACXC,KAAK,CAAE,CAAC,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CAC1G,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CACpG,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CACpG,eAAe,CAEnB,CAAC,CACD,CACEH,EAAE,CAAE,CAAC,CACLtG,IAAI,CAAE,qBAAqB,CAC3BuG,QAAQ,CAAE,QAAQ,CAClBP,KAAK,CAAE,KAAK,CACZQ,MAAM,CAAE,GAAG,CACXC,KAAK,CAAE,CAAC,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CAC1G,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CACpG,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CACpG,eAAe,CAAE,eAAe,CAEpC,CAAC,CACF,CAED;AACA,KAAM,CAAAC,iBAAiB,CAAGpI,MAAM,CAAC,IAAI,CAAC,CAEtC;AACA,KAAM,CAAAqI,mBAAmB,CAAG,KAAAA,CAAA,GAAY,CACtCtB,qBAAqB,CAAC,IAAI,CAAC,CAC3BuB,OAAO,CAACC,GAAG,CAAC,oCAAoC,CAAC,CAEjD,GAAI,CACF,KAAM,CAAAC,WAAW,CAAG3H,wBAAwB,CAACD,cAAc,CAAC6H,cAAc,CAACC,OAAO,CAAC,CACnFJ,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAEC,WAAW,CAAC,CAC5CF,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAE3H,cAAc,CAAC+H,eAAe,CAAC,CAE9D,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAA9H,kBAAkB,CAACF,cAAc,CAAC+H,eAAe,CAAEH,WAAW,CAAC,CACtFF,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAEK,QAAQ,CAACC,MAAM,CAAC,CACnD,SACA,GAAID,QAAQ,CAACE,EAAE,CAAE,KAAAC,kBAAA,CAAAC,mBAAA,CAAAC,qBAAA,CACf,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAN,QAAQ,CAACO,IAAI,CAAC,CAAC,CAClCb,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAEW,IAAI,CAAC,CAE7C;AACA,GAAI,CAAAE,UAAU,CAEd;AACA,GAAIC,KAAK,CAACC,OAAO,CAACJ,IAAI,CAAC,EAAIA,IAAI,CAACK,MAAM,CAAG,CAAC,CAAE,CAC1CjB,OAAO,CAACC,GAAG,CAAC,iDAAiD,CAAC,CAC9D,KAAM,CAAAiB,YAAY,CAAGN,IAAI,CAAC,CAAC,CAAC,CAE5B;AACA,GAAIM,YAAY,CAACN,IAAI,EAAI,MAAO,CAAAM,YAAY,CAACN,IAAI,GAAK,QAAQ,CAAE,CAC9D,GAAI,CACFZ,OAAO,CAACC,GAAG,CAAC,4CAA4C,CAAC,CACzDa,UAAU,CAAGK,IAAI,CAACC,KAAK,CAACF,YAAY,CAACN,IAAI,CAAC,CAC1CZ,OAAO,CAACC,GAAG,CAAC,sCAAsC,CAAEa,UAAU,CAAC,CACjE,CAAE,MAAOO,UAAU,CAAE,CACnBrB,OAAO,CAACsB,KAAK,CAAC,wCAAwC,CAAED,UAAU,CAAC,CACnErB,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAEiB,YAAY,CAACN,IAAI,CAAC,CAC7D,OACF,CACF,CAAC,IAAM,CACLZ,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAC,CAC7Ca,UAAU,CAAGI,YAAY,CAC3B,CACF,CACA;AAAA,IACK,IAAIN,IAAI,CAACA,IAAI,EAAI,MAAO,CAAAA,IAAI,CAACA,IAAI,GAAK,QAAQ,CAAE,CACnD,GAAI,CACFZ,OAAO,CAACC,GAAG,CAAC,wCAAwC,CAAC,CACrDa,UAAU,CAAGK,IAAI,CAACC,KAAK,CAACR,IAAI,CAACA,IAAI,CAAC,CAClCZ,OAAO,CAACC,GAAG,CAAC,kCAAkC,CAAEa,UAAU,CAAC,CAC7D,CAAE,MAAOO,UAAU,CAAE,CACnBrB,OAAO,CAACsB,KAAK,CAAC,oCAAoC,CAAED,UAAU,CAAC,CAC/DrB,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAEW,IAAI,CAACA,IAAI,CAAC,CACjD,OACF,CACF,CACA;AAAA,IACK,IAAIA,IAAI,CAACA,IAAI,EAAI,MAAO,CAAAA,IAAI,CAACA,IAAI,GAAK,QAAQ,CAAE,CACnDZ,OAAO,CAACC,GAAG,CAAC,iCAAiC,CAAC,CAC9Ca,UAAU,CAAGF,IAAI,CAACA,IAAI,CACxB,CACA;AAAA,IACK,IAAIA,IAAI,CAACW,MAAM,EAAIX,IAAI,CAACY,OAAO,EAAIZ,IAAI,CAACa,gBAAgB,CAAE,CAC7DzB,OAAO,CAACC,GAAG,CAAC,8BAA8B,CAAC,CAC3Ca,UAAU,CAAGF,IAAI,CACnB,CAAC,IACI,CACHZ,OAAO,CAACsB,KAAK,CAAC,kCAAkC,CAAEV,IAAI,CAAC,CACvD,OACF,CAEAZ,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAEa,UAAU,CAAC,CAChDd,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAE,EAAAQ,kBAAA,CAAAK,UAAU,CAACS,MAAM,UAAAd,kBAAA,iBAAjBA,kBAAA,CAAmBQ,MAAM,GAAI,CAAC,CAAC,CACtEjB,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAE,EAAAS,mBAAA,CAAAI,UAAU,CAACU,OAAO,UAAAd,mBAAA,iBAAlBA,mBAAA,CAAoBO,MAAM,GAAI,CAAC,CAAC,CAC3EjB,OAAO,CAACC,GAAG,CAAC,mCAAmC,CAAE,EAAAU,qBAAA,CAAAG,UAAU,CAACW,gBAAgB,UAAAd,qBAAA,iBAA3BA,qBAAA,CAA6BM,MAAM,GAAI,CAAC,CAAC,CAE1F;AACA,KAAM,CAAAS,WAAW,CAAG,CAACZ,UAAU,CAACS,MAAM,EAAI,EAAE,EAAEI,MAAM,CAACC,IAAI,EACvDA,IAAI,CAACC,EAAE,EAAID,IAAI,CAACC,EAAE,GAAK,CAAC,EAAID,IAAI,CAACE,UAAU,EAAIF,IAAI,CAACE,UAAU,CAACC,IAAI,CAAC,CAAC,GAAK,EAC5E,CAAC,CAED,KAAM,CAAAC,YAAY,CAAG,CAAClB,UAAU,CAACU,OAAO,EAAI,EAAE,EAAEG,MAAM,CAACC,IAAI,EACzDA,IAAI,CAACK,IAAI,EAAIL,IAAI,CAACK,IAAI,GAAK,CAAC,EAAIL,IAAI,CAACM,MAAM,EAAIN,IAAI,CAACM,MAAM,CAACH,IAAI,CAAC,CAAC,GAAK,EACxE,CAAC,CAED,KAAM,CAAAI,qBAAqB,CAAG,CAACrB,UAAU,CAACW,gBAAgB,EAAI,EAAE,EAAEE,MAAM,CAACC,IAAI,EAC3EA,IAAI,CAACQ,UAAU,EAAIR,IAAI,CAACS,QAAQ,EAAIT,IAAI,CAACS,QAAQ,CAACN,IAAI,CAAC,CAAC,GAAK,EAC/D,CAAC,CAED;AACA,GAAI,CAAAO,cAAc,CAAG,EAAE,CACvB,GAAIxB,UAAU,CAACyB,SAAS,EAAIxB,KAAK,CAACC,OAAO,CAACF,UAAU,CAACyB,SAAS,CAAC,CAAE,CAC/D;AACAD,cAAc,CAAGxB,UAAU,CAACyB,SAAS,CAACZ,MAAM,CAACC,IAAI,EAC/CA,IAAI,CAACY,SAAS,EAAIZ,IAAI,CAACY,SAAS,GAAK,CAAC,EAAIZ,IAAI,CAACa,WAAW,EAAIb,IAAI,CAACa,WAAW,CAACV,IAAI,CAAC,CAAC,GAAK,EAC5F,CAAC,CACD/B,OAAO,CAACC,GAAG,CAAC,oCAAoC,CAAEqC,cAAc,CAAC,CACnE,CAAC,IAAM,CACL;AACAtC,OAAO,CAACC,GAAG,CAAC,yDAAyD,CAAC,CACtE,GAAI+B,YAAY,EAAIjB,KAAK,CAACC,OAAO,CAACgB,YAAY,CAAC,CAAE,CAC/C,KAAM,CAAAU,UAAU,CAAG,GAAI,CAAAC,GAAG,CAAC,CAAC,CAC5BX,YAAY,CAACY,OAAO,CAACC,MAAM,EAAI,CAC7B,GAAIA,MAAM,CAACL,SAAS,EAAIK,MAAM,CAACL,SAAS,GAAK,CAAC,EAAI,CAACE,UAAU,CAACI,GAAG,CAACD,MAAM,CAACL,SAAS,CAAC,CAAE,CACnFE,UAAU,CAACK,GAAG,CAACF,MAAM,CAACL,SAAS,CAAE,CAC/BA,SAAS,CAAEK,MAAM,CAACL,SAAS,CAC3BC,WAAW,YAAAO,MAAA,CAAaH,MAAM,CAACL,SAAS,CAAG;AAC7C,CAAC,CAAC,CACJ,CACF,CAAC,CAAC,CACFF,cAAc,CAAGvB,KAAK,CAACkC,IAAI,CAACP,UAAU,CAACQ,MAAM,CAAC,CAAC,CAAC,CAClD,CACF,CAEA;AACA,KAAM,CAAAC,eAAe,CAAG,CACtB/E,MAAM,CAAEsD,WAAW,CACnBrD,OAAO,CAAE2D,YAAY,CACrB1D,SAAS,CAAEgE,cAAc,CACzB/D,gBAAgB,CAAE4D,qBACpB,CAAC,CAEDnC,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAEkD,eAAe,CAAC,CACzDhF,eAAe,CAACgF,eAAe,CAAC,CAElC,CAAC,IAAM,CACL,KAAM,CAAAC,SAAS,CAAG,KAAM,CAAA9C,QAAQ,CAAC3G,IAAI,CAAC,CAAC,CACvCqG,OAAO,CAACsB,KAAK,CAAC,kCAAkC,CAAEhB,QAAQ,CAACC,MAAM,CAAED,QAAQ,CAAC+C,UAAU,CAAC,CACvFrD,OAAO,CAACsB,KAAK,CAAC,yBAAyB,CAAE8B,SAAS,CAAC,CACrD,CACF,CAAE,MAAO9B,KAAK,CAAE,CACdtB,OAAO,CAACsB,KAAK,CAAC,kCAAkC,CAAEA,KAAK,CAAC,CACxDtB,OAAO,CAACsB,KAAK,CAAC,mBAAmB,CAAEA,KAAK,CAACgC,OAAO,CAAC,CACnD,CAAC,OAAS,CACR7E,qBAAqB,CAAC,KAAK,CAAC,CAC5BuB,OAAO,CAACC,GAAG,CAAC,iCAAiC,CAAC,CAChD,CACF,CAAC,CAED;AACA,KAAM,CAAAsD,cAAc,CAAGA,CAAA,GAAM,CAC3B,GAAI,CAACrI,QAAQ,CAACc,OAAO,EAAId,QAAQ,CAACc,OAAO,GAAK,EAAE,EAAId,QAAQ,CAACc,OAAO,GAAK,KAAK,CAAE,CAC9E;AACA,MAAO,CAAAkC,YAAY,CAACG,OAAO,CAC7B,CAAC,IAAM,CACL;AACA,MAAO,CAAAH,YAAY,CAACG,OAAO,CAACsD,MAAM,CAACkB,MAAM,EACvCA,MAAM,CAACL,SAAS,EAAIK,MAAM,CAACL,SAAS,CAACgB,QAAQ,CAAC,CAAC,GAAKtI,QAAQ,CAACc,OAAO,CAACwH,QAAQ,CAAC,CAChF,CAAC,CACH,CACF,CAAC,CAED;AACA,KAAM,CAAAC,oBAAoB,CAAIC,aAAa,EAAK,CAC9C1D,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAEyD,aAAa,CAAC,CACpDzE,iBAAiB,CAAC,IAAI,CAAC,CACvBF,eAAe,CAAC,IAAI,CAAC,CAErB;AACA,KAAM,CAAA4E,SAAS,OAAAX,MAAA,CAASY,IAAI,CAACC,MAAM,CAAC,CAAC,CAACL,QAAQ,CAAC,EAAE,CAAC,CAACM,MAAM,CAAC,CAAC,CAAE,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAAE,CAC/EpG,mBAAmB,CAACgG,SAAS,CAAC,CAC9BlG,mBAAmB,CAAC,IAAI,CAAC,CAEzB;AACA;AACA;AACA;AACF,CAAC,CAED,KAAM,CAAAuG,kBAAkB,CAAI1C,KAAK,EAAK,CACpCtB,OAAO,CAACsB,KAAK,CAAC,oBAAoB,CAAEA,KAAK,CAAC,CAC1CvC,eAAe,CAACuC,KAAK,CAAC,CACtBrC,iBAAiB,CAAC,KAAK,CAAC,CAC1B,CAAC,CAED;AACAtH,SAAS,CAAC,IAAM,CACdoI,mBAAmB,CAAC,CAAC,CACvB,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,KAAM,CAAAkE,eAAe,CAAI9H,OAAO,EAAK,CACnC,GAAI,CAACA,OAAO,CAAE,MAAO,EAAE,CACvB;AACA,MAAO,CAAAA,OAAO,CAACmD,OAAO,CAAC,MAAM,CAAE,EAAE,CAAC,CAACyE,WAAW,CAAC,CAAC,CAClD,CAAC,CAED;AACA,KAAM,CAAAG,oBAAoB,CAAI/H,OAAO,EAAK,CACxC,KAAM,CAAAgI,SAAS,CAAGF,eAAe,CAAC9H,OAAO,CAAC,CAE1C;AACA,GAAIgI,SAAS,CAAClD,MAAM,GAAK,CAAC,CAAE,MAAO,MAAK,CAExC;AACA,KAAM,CAAAmD,YAAY,CAAG,0BAA0B,CAC/C,GAAI,CAACA,YAAY,CAACC,IAAI,CAACF,SAAS,CAAC,CAAE,MAAO,MAAK,CAE/C;AACA,KAAM,CAAAG,UAAU,CAAGH,SAAS,CAACI,SAAS,CAAC,CAAC,CAAE,CAAC,CAAC,CAC5C,MAAO,CAAAC,sBAAsB,CAACF,UAAU,CAAC,CAC3C,CAAC,CAED;AACA,KAAM,CAAAE,sBAAsB,CAAIF,UAAU,EAAK,CAC7C;AACA,KAAM,CAAAG,gBAAgB,CAAG,CACvB;AACA,KAAK,CAAE,KAAK,CAAE,KAAK,CAAE,KAAK,CAAE,KAAK,CAAE,KAAK,CAAE,KAAK,CAAE,KAAK,CAAE,KAAK,CAAE,KAAK,CACpE,KAAK,CAAE,KAAK,CAAE,KAAK,CAAE,KAAK,CAAE,KAAK,CAAE,KAAK,CAAE,KAAK,CAAE,KAAK,CAAE,KAAK,CAAE,KAAK,CAAE,KAAK,CAE3E;AACA,KAAK,CAAE,KAAK,CAAE,KAAK,CAAE,KAAK,CAAE,KAAK,CAAE,KAAK,CAAE,KAAK,CAAE,KAAK,CAAE,KAAK,CAAE,KAAK,CAEpE;AACA,KAAK,CAAE,KAAK,CAAE,KAAK,CAAE,KAAK,CAAE,KAAK,CAAE,KAAK,CAAE,KAAK,CAAE,KAAK,CAEtD;AACA,KAAK,CAAE,KAAK,CAAE,KAAK,CAAE,KAAK,CAAE,KAAK,CAAE,KAAK,CAExC;AACA,KAAK,CAAE,KAAK,CAAE,KAAK,CAEnB;AACA,KAAK,CAAE,KAAK,CAAE,KAAK,CAEnB;AACA,KAAK,CAAE,KAAK,CAEZ;AACA,KAAK,CAAE,KAAK,CAAE,KAAK,CAEnB;AACA,KAAK,CAAE,KAAK,CAAE,KAAK,CAEnB;AACA,KAAK,CAAE,KAAK,CAAE,KAAK,CAEnB;AACA,KAAK,CAAE,KAAK,CAAE,KAAK,CAEnB;AACA,KAAK,CAEL;AACA,KAAK,CAEL;AACA,KAAK,CAAE,KAAK,CAAE,KAAK,CAEnB;AACA,KAAK,CAEL;AACA,KAAK,CAAE,KAAK,CAAE,KAAK,CAAE,KAAK,CAE1B;AACA,KAAK,CAAE,KAAK,CAEZ;AACA,KAAK,CAAE,KAAK,CAAE,KAAK,CAEnB;AACA,KAAK,CAAE,KAAK,CAEZ;AACA,KAAK,CAEL;AACA,KAAK,CAEL;AACA,KAAK,CAAE,KAAK,CAEZ;AACA,KAAK,CAEL;AACA,KAAK,CAEL;AACA,KAAK,CAEL;AACA,KAAK,CACN,CAED,MAAO,CAAAA,gBAAgB,CAACC,QAAQ,CAACJ,UAAU,CAAC,CAC9C,CAAC,CAID,KAAM,CAAAK,iBAAiB,CAAIC,CAAC,EAAK,CAC/B,KAAM,CAAExL,IAAI,CAAEyL,KAAM,CAAC,CAAGD,CAAC,CAACE,MAAM,CAChC,KAAM,CAAAC,WAAW,CAAAC,aAAA,CAAAA,aAAA,IACZ9J,QAAQ,MACX,CAAC9B,IAAI,EAAGyL,KAAK,EACd,CAED;AACA,GAAIzL,IAAI,GAAK,WAAW,CAAE,CACxB2L,WAAW,CAACxJ,QAAQ,CAAG,GAAAyH,MAAA,CAAG6B,KAAK,MAAA7B,MAAA,CAAI9H,QAAQ,CAACI,QAAQ,EAAGyG,IAAI,CAAC,CAAC,CAC/D,CAAC,IAAM,IAAI3I,IAAI,GAAK,UAAU,CAAE,CAC9B2L,WAAW,CAACxJ,QAAQ,CAAG,GAAAyH,MAAA,CAAG9H,QAAQ,CAACG,SAAS,MAAA2H,MAAA,CAAI6B,KAAK,EAAG9C,IAAI,CAAC,CAAC,CAChE,CAEA;AACA,GAAI3I,IAAI,GAAK,IAAI,EAAIyL,KAAK,CAAE,CAC1B7E,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAE4E,KAAK,CAAC,CACrC;AACA,KAAM,CAAAI,cAAc,CAAG/G,YAAY,CAACG,OAAO,CAAC6G,IAAI,CAACrC,MAAM,EAAIA,MAAM,CAACZ,IAAI,CAACuB,QAAQ,CAAC,CAAC,GAAKqB,KAAK,CAACrB,QAAQ,CAAC,CAAC,CAAC,CACvG,GAAIyB,cAAc,EAAIA,cAAc,CAACzC,SAAS,CAAE,CAC9CxC,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAEgF,cAAc,CAACzC,SAAS,CAAE,SAAS,CAAEyC,cAAc,CAAC/C,MAAM,CAAC,CACpG6C,WAAW,CAAC/I,OAAO,CAAGiJ,cAAc,CAACzC,SAAS,CAACgB,QAAQ,CAAC,CAAC,CAC3D,CAAC,IAAM,CACLxD,OAAO,CAACC,GAAG,CAAC,qCAAqC,CAAE4E,KAAK,CAAC,CACzDE,WAAW,CAAC/I,OAAO,CAAG,EAAE,CAC1B,CACF,CAEA;AACA,GAAI5C,IAAI,GAAK,SAAS,CAAE,CACtB4G,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAE4E,KAAK,CAAC,CAC1C;AACAE,WAAW,CAAChJ,EAAE,CAAG,EAAE,CAEnB,GAAI8I,KAAK,GAAK,KAAK,CAAE,CACnB7E,OAAO,CAACC,GAAG,CAAC,+CAA+C,CAAC,CAC9D,CAAC,IAAM,IAAI4E,KAAK,CAAE,CAChB7E,OAAO,CAACC,GAAG,CAAC,6DAA6D,CAAE4E,KAAK,CAAC,CACnF,CACF,CAEA;AACA;AACA,GAAI7H,wBAAwB,CAAE,CAC5B,GAAI5D,IAAI,GAAK,cAAc,CAAE2L,WAAW,CAACrI,eAAe,CAAGmI,KAAK,CAAC,IAC5D,IAAIzL,IAAI,GAAK,YAAY,CAAE2L,WAAW,CAACpI,aAAa,CAAGkI,KAAK,CAAC,IAC7D,IAAIzL,IAAI,GAAK,UAAU,CAAE2L,WAAW,CAACnI,WAAW,CAAGiI,KAAK,CAAC,IACzD,IAAIzL,IAAI,GAAK,aAAa,CAAE2L,WAAW,CAAClI,cAAc,CAAGgI,KAAK,CAAC,IAC/D,IAAIzL,IAAI,GAAK,cAAc,CAAE2L,WAAW,CAACjI,eAAe,CAAG+H,KAAK,CAAC,IACjE,IAAIzL,IAAI,GAAK,aAAa,CAAE2L,WAAW,CAAChI,cAAc,CAAG8H,KAAK,CACrE,CAEA1J,WAAW,CAAC4J,WAAW,CAAC,CAExB;AACA,GAAI3L,IAAI,GAAK,SAAS,CAAE,CACtB;AACA,GAAI0G,iBAAiB,CAACqF,OAAO,CAAE,CAC7BC,YAAY,CAACtF,iBAAiB,CAACqF,OAAO,CAAC,CACzC,CAEA;AACA5H,eAAe,CAAC,EAAE,CAAC,CAEnB,KAAM,CAAA8H,gBAAgB,CAAGpB,eAAe,CAACY,KAAK,CAAC,CAE/C,GAAIA,KAAK,CAAC5D,MAAM,GAAK,CAAC,CAAE,CACtB;AACA9F,WAAW,CAACmK,IAAI,EAAAN,aAAA,CAAAA,aAAA,IACXM,IAAI,MACP5I,eAAe,CAAE,EAAE,CACnBC,aAAa,CAAE,EAAE,CACjBC,WAAW,CAAE,EAAE,CACfC,cAAc,CAAE,EAAE,CAClBC,eAAe,CAAE,EAAE,EACnB,CAAC,CACL,CAAC,IAAM,IAAIuI,gBAAgB,CAACpE,MAAM,EAAI,CAAC,CAAE,CACvC;AACAnB,iBAAiB,CAACqF,OAAO,CAAGI,UAAU,CAAC,IAAM,CAC3C;AACA,KAAM,CAAAxI,cAAc,CAAGkH,eAAe,CAACc,WAAW,CAAC5I,OAAO,CAAC,CAC3D,GAAIY,cAAc,CAACkE,MAAM,EAAI,CAAC,CAAE,CAC9BuE,aAAa,CAACzI,cAAc,CAAC,CAC/B,CACF,CAAC,CAAE,IAAI,CAAC,CACV,CACF,CACF,CAAC,CAED,KAAM,CAAA0I,kBAAkB,CAAIC,MAAM,EAAK,CACrC,GAAI,CAAAnL,cAAc,SAAdA,cAAc,iBAAdA,cAAc,CAAEmF,EAAE,IAAKgG,MAAM,CAAChG,EAAE,CAAE,CACpClF,iBAAiB,CAAC,IAAI,CAAC,CACvBE,eAAe,CAAC,IAAI,CAAC,CACvB,CAAC,IAAM,CACLF,iBAAiB,CAACkL,MAAM,CAAC,CACzBhL,eAAe,CAAC,IAAI,CAAC,CACvB,CACF,CAAC,CAED,KAAM,CAAAiL,gBAAgB,CAAIC,IAAI,EAAK,CACjClL,eAAe,CAACkL,IAAI,CAAC,CACvB,CAAC,CACD,KAAM,CAAAC,iBAAiB,CAAIC,QAAQ,EAAK,CACtClL,eAAe,CAACkL,QAAQ,CAAC,CACzB7K,oBAAoB,CAAC,KAAK,CAAC,CAC3B;AACAH,YAAY,CAACiL,OAAO,CAAC,aAAa,CAAED,QAAQ,CAAC,CAC/C,CAAC,CAED,KAAM,CAAAE,8BAA8B,CAAIpB,CAAC,EAAK,CAC5C,KAAM,CAAAqB,SAAS,CAAGrB,CAAC,CAACE,MAAM,CAACoB,OAAO,CAClCjJ,2BAA2B,CAACgJ,SAAS,CAAC,CAEtC,GAAIA,SAAS,CAAE,CACb;AACA9K,WAAW,CAACmK,IAAI,EAAAN,aAAA,CAAAA,aAAA,IACXM,IAAI,MACP5I,eAAe,CAAE4I,IAAI,CAAClJ,YAAY,CAClCO,aAAa,CAAE2I,IAAI,CAACjJ,UAAU,CAC9BO,WAAW,CAAE0I,IAAI,CAAChJ,QAAQ,CAC1BO,cAAc,CAAEyI,IAAI,CAAC/I,WAAW,CAChCO,eAAe,CAAEwI,IAAI,CAAC9I,YAAY,CAClCO,cAAc,CAAEuI,IAAI,CAAC7I,WAAW,EAChC,CAAC,CACL,CACF,CAAC,CAED;AACA,KAAM,CAAA0C,oBAAoB,CAAGA,CAAA,GAAM,CACjC;AACA,KAAM,CAAAgH,uBAAuB,CAAGjI,YAAY,CAACK,gBAAgB,CAAC2G,IAAI,CAChEkB,IAAI,EAAIA,IAAI,CAAChE,UAAU,CAACoB,QAAQ,CAAC,CAAC,GAAKtI,QAAQ,CAACgB,eAAe,CAACsH,QAAQ,CAAC,CAC3E,CAAC,CAED,GAAI2C,uBAAuB,CAAE,CAC3B,KAAM,CAAAE,QAAQ,CAAGF,uBAAuB,CAAC9D,QAAQ,CAACiE,WAAW,CAAC,CAAC,CAC/D,MAAO,CAAAD,QAAQ,CAAC3B,QAAQ,CAAC,OAAO,CAAC,EAAI2B,QAAQ,CAAC3B,QAAQ,CAAC,OAAO,CAAC,CACjE,CAEA;AACA,MAAO,CAAAxJ,QAAQ,CAACgB,eAAe,GAAK,IAAI,EAAIhB,QAAQ,CAACgB,eAAe,GAAK,IAAI,CAC/E,CAAC,CAED;AACA,KAAM,CAAAqK,wBAAwB,CAAGA,CAAA,GAAM,CACrC,KAAM,CAAAC,MAAM,CAAG,IAAI,CACnB,KAAM,CAAAC,SAAS,CAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,CAACnD,QAAQ,CAAC,CAAC,CAACoD,KAAK,CAAC,CAAC,CAAC,CAAC,CACjD,KAAM,CAAA/C,MAAM,CAAGD,IAAI,CAACiD,KAAK,CAACjD,IAAI,CAACC,MAAM,CAAC,CAAC,CAAG,IAAI,CAAC,CAACL,QAAQ,CAAC,CAAC,CAACsD,QAAQ,CAAC,CAAC,CAAE,GAAG,CAAC,CAC3E,SAAA9D,MAAA,CAAUwD,MAAM,EAAAxD,MAAA,CAAGyD,SAAS,EAAAzD,MAAA,CAAGa,MAAM,EACvC,CAAC,CAED;AACA,KAAM,CAAAkD,qBAAqB,CAAGA,CAAA,GAAM,CAClC,KAAM,CAAApD,SAAS,CAAG4C,wBAAwB,CAAC,CAAC,CAC5C5I,mBAAmB,CAACgG,SAAS,CAAC,CAC9BlG,mBAAmB,CAAC,IAAI,CAAC,CAC3B,CAAC,CAED;AACA,KAAM,CAAAuJ,uBAAuB,CAAGA,CAAA,GAAM,CACpCvJ,mBAAmB,CAAC,KAAK,CAAC,CAC1BnD,cAAc,CAAC,CAAC,CAAC,CACjB;AACAE,iBAAiB,CAAC,IAAI,CAAC,CACvBE,eAAe,CAAC,IAAI,CAAC,CACvB,CAAC,CAED;AACA,KAAM,CAAAuM,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/BhJ,mBAAmB,CAAC,IAAI,CAAC,CACzBF,kBAAkB,CAAC,IAAI,CAAC,CAExB,GAAI,CACF,KAAM,CAAAmC,WAAW,CAAG3H,wBAAwB,CAACD,cAAc,CAAC6H,cAAc,CAACC,OAAO,CAAC,CACnF,KAAM,CAAAE,QAAQ,CAAG,KAAM,CAAA9H,kBAAkB,CAACF,cAAc,CAAC+H,eAAe,CAAEH,WAAW,CAAC,CAEtF,GAAII,QAAQ,CAACE,EAAE,CAAE,CACf,KAAM,CAAAI,IAAI,CAAG,KAAM,CAAAN,QAAQ,CAACO,IAAI,CAAC,CAAC,CAClC9C,kBAAkB,CAAC6C,IAAI,CAAC,CACxB/C,kBAAkB,CAAC,IAAI,CAAC,CAC1B,CAAC,IAAM,CACL;AACA,KAAM,CAAAlE,IAAI,CAAG,KAAM,CAAA2G,QAAQ,CAAC3G,IAAI,CAAC,CAAC,CAClCoE,kBAAkB,CAAC,CACjBuD,KAAK,CAAE,IAAI,CACXf,MAAM,CAAED,QAAQ,CAACC,MAAM,CACvB8C,UAAU,CAAE/C,QAAQ,CAAC+C,UAAU,CAC/BC,OAAO,CAAE3J,IAAI,EAAI,8BACnB,CAAC,CAAC,CACFkE,kBAAkB,CAAC,IAAI,CAAC,CAC1B,CACF,CAAE,MAAOyD,KAAK,CAAE,CACdtB,OAAO,CAACsB,KAAK,CAAC,gBAAgB,CAAEA,KAAK,CAAC,CACtCvD,kBAAkB,CAAC,CACjBuD,KAAK,CAAE,IAAI,CACXgC,OAAO,CAAEhC,KAAK,CAACgC,OAAO,EAAI,wBAAwB,CAClD4D,OAAO,CAAE,2CACX,CAAC,CAAC,CACFrJ,kBAAkB,CAAC,IAAI,CAAC,CAC1B,CAAC,OAAS,CACRI,mBAAmB,CAAC,KAAK,CAAC,CAC5B,CACF,CAAC,CAED,KAAM,CAAAkJ,sBAAsB,CAAGA,CAAA,GAAM,CACnCtJ,kBAAkB,CAAC,KAAK,CAAC,CACzBE,kBAAkB,CAAC,IAAI,CAAC,CAC1B,CAAC,CAED;AACA,KAAM,CAAAqJ,iBAAiB,CAAG,QAAAA,CAACxG,IAAI,CAAqB,IAAnB,CAAAyG,SAAS,CAAAC,SAAA,CAAArG,MAAA,IAAAqG,SAAA,MAAAC,SAAA,CAAAD,SAAA,IAAG,EAAE,CAC7C,GAAI,CAAC1G,IAAI,EAAI,MAAO,CAAAA,IAAI,GAAK,QAAQ,CAAE,CACrC,mBACE7H,IAAA,QAAKyO,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CACvCC,MAAM,CAAC9G,IAAI,CAAC,CACV,CAAC,CAEV,CAEA,GAAIG,KAAK,CAACC,OAAO,CAACJ,IAAI,CAAC,CAAE,CACvB,mBACE7H,IAAA,QAAKyO,SAAS,CAAC,WAAW,CAAAC,QAAA,CACvB7G,IAAI,CAAC+G,GAAG,CAAC,CAAC/F,IAAI,CAAEgG,KAAK,gBACpB3O,KAAA,QAAiBuO,SAAS,CAAC,mDAAmD,CAAAC,QAAA,eAC5E1O,IAAA,QAAKyO,SAAS,CAAC,+CAA+C,CAAAC,QAAA,cAC5DxO,KAAA,OAAIuO,SAAS,CAAC,2BAA2B,CAAAC,QAAA,EAAC,OAAK,CAACG,KAAK,CAAG,CAAC,EAAK,CAAC,CAC5D,CAAC,cACN7O,IAAA,QAAKyO,SAAS,CAAC,KAAK,CAAAC,QAAA,CACjBL,iBAAiB,CAACxF,IAAI,IAAAoB,MAAA,CAAKqE,SAAS,MAAArE,MAAA,CAAI4E,KAAK,KAAG,CAAC,CAC/C,CAAC,GANEA,KAOL,CACN,CAAC,CACC,CAAC,CAEV,CAEA,KAAM,CAAAC,OAAO,CAAGC,MAAM,CAACD,OAAO,CAACjH,IAAI,CAAC,CACpC,GAAIiH,OAAO,CAAC5G,MAAM,GAAK,CAAC,CAAE,CACxB,mBAAOlI,IAAA,QAAKyO,SAAS,CAAC,8BAA8B,CAAAC,QAAA,CAAC,cAAY,CAAK,CAAC,CACzE,CAEA,mBACE1O,IAAA,QAAKyO,SAAS,CAAC,iBAAiB,CAAAC,QAAA,cAC9BxO,KAAA,UAAOuO,SAAS,CAAC,qCAAqC,CAAAC,QAAA,eACpD1O,IAAA,UAAOyO,SAAS,CAAC,YAAY,CAAAC,QAAA,cAC3BxO,KAAA,OAAAwO,QAAA,eACE1O,IAAA,OAAIyO,SAAS,CAAC,gFAAgF,CAAAC,QAAA,CAAC,UAE/F,CAAI,CAAC,cACL1O,IAAA,OAAIyO,SAAS,CAAC,gFAAgF,CAAAC,QAAA,CAAC,OAE/F,CAAI,CAAC,cACL1O,IAAA,OAAIyO,SAAS,CAAC,gFAAgF,CAAAC,QAAA,CAAC,MAE/F,CAAI,CAAC,EACH,CAAC,CACA,CAAC,cACR1O,IAAA,UAAOyO,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CACjDI,OAAO,CAACF,GAAG,CAACI,IAAA,MAAC,CAACC,GAAG,CAAEnD,KAAK,CAAC,CAAAkD,IAAA,oBACxB9O,KAAA,OAAcuO,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eACxC1O,IAAA,OAAIyO,SAAS,CAAC,6CAA6C,CAAAC,QAAA,CACxDO,GAAG,CACF,CAAC,cACLjP,IAAA,OAAIyO,SAAS,CAAC,iCAAiC,CAAAC,QAAA,CAC5C,MAAO,CAAA5C,KAAK,GAAK,QAAQ,EAAIA,KAAK,GAAK,IAAI,cAC1C9L,IAAA,QAAKyO,SAAS,CAAC,UAAU,CAAAC,QAAA,CACtB1G,KAAK,CAACC,OAAO,CAAC6D,KAAK,CAAC,cACnB9L,IAAA,QAAKyO,SAAS,CAAC,WAAW,CAAAC,QAAA,CACvB5C,KAAK,CAAC8C,GAAG,CAAC,CAAC/F,IAAI,CAAEqG,GAAG,gBACnBlP,IAAA,QAAeyO,SAAS,CAAC,gCAAgC,CAAAC,QAAA,CACtD,MAAO,CAAA7F,IAAI,GAAK,QAAQ,CAAGT,IAAI,CAAC+G,SAAS,CAACtG,IAAI,CAAE,IAAI,CAAE,CAAC,CAAC,CAAG8F,MAAM,CAAC9F,IAAI,CAAC,EADhEqG,GAEL,CACN,CAAC,CACC,CAAC,cAENlP,IAAA,QAAKyO,SAAS,CAAC,oDAAoD,CAAAC,QAAA,CAChEtG,IAAI,CAAC+G,SAAS,CAACrD,KAAK,CAAE,IAAI,CAAE,CAAC,CAAC,CAC5B,CACN,CACE,CAAC,cAEN9L,IAAA,SAAMyO,SAAS,IAAAxE,MAAA,CACb,MAAO,CAAA6B,KAAK,GAAK,QAAQ,CAAG,gBAAgB,CAC5C,MAAO,CAAAA,KAAK,GAAK,QAAQ,CAAG,eAAe,CAC3C,MAAO,CAAAA,KAAK,GAAK,SAAS,CAAG,iBAAiB,CAC9C,eAAe,CACd,CAAA4C,QAAA,CACAC,MAAM,CAAC7C,KAAK,CAAC,CACV,CACP,CACC,CAAC,cACL9L,IAAA,OAAIyO,SAAS,CAAC,iCAAiC,CAAAC,QAAA,cAC7C1O,IAAA,SAAMyO,SAAS,2DAAAxE,MAAA,CACb,MAAO,CAAA6B,KAAK,GAAK,QAAQ,CAAG,6BAA6B,CACzD,MAAO,CAAAA,KAAK,GAAK,QAAQ,CAAG,2BAA2B,CACvD,MAAO,CAAAA,KAAK,GAAK,SAAS,CAAG,+BAA+B,CAC5D9D,KAAK,CAACC,OAAO,CAAC6D,KAAK,CAAC,CAAG,+BAA+B,CACtD,MAAO,CAAAA,KAAK,GAAK,QAAQ,CAAG,2BAA2B,CACvD,2BAA2B,CAC1B,CAAA4C,QAAA,CACA1G,KAAK,CAACC,OAAO,CAAC6D,KAAK,CAAC,CAAG,OAAO,CAAG,MAAO,CAAAA,KAAK,CAC1C,CAAC,CACL,CAAC,GA3CEmD,GA4CL,CAAC,EACN,CAAC,CACG,CAAC,EACH,CAAC,CACL,CAAC,CAEV,CAAC,CAED;AACA,KAAM,CAAAG,qBAAqB,CAAGA,CAAA,GAAM,CAClC,GAAIhJ,oBAAoB,CAAC,CAAC,CAAE,CAC1B;AACA,MAAO,CACL,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CAClE,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CAClE,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CAClE,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CAClE,eAAe,CAAE,eAAe,CAAE,eAAe,CAAE,eAAe,CACnE,CACH,CAAC,IAAM,CACL;AACA,MAAO,CAAA5E,cAAc,CAAGA,cAAc,CAACsF,KAAK,CAAG,EAAE,CACnD,CACF,CAAC,CAED;AACA,KAAM,CAAAuI,yBAAyB,CAAGA,CAAA,GAAM,CACtC,KAAM,CAAAjC,uBAAuB,CAAGjI,YAAY,CAACK,gBAAgB,CAAC2G,IAAI,CAChEkB,IAAI,EAAIA,IAAI,CAAChE,UAAU,CAACoB,QAAQ,CAAC,CAAC,GAAKtI,QAAQ,CAACgB,eAAe,CAACsH,QAAQ,CAAC,CAC3E,CAAC,CAED,GAAI2C,uBAAuB,CAAE,CAC3B,MAAO,CAAAA,uBAAuB,CAAC9D,QAAQ,CACzC,CAEA;AACA,OAAQnH,QAAQ,CAACgB,eAAe,EAC9B,IAAK,IAAI,CAAE,MAAO,oBAAoB,CACtC,IAAK,IAAI,CAAE,MAAO,oBAAoB,CACtC,IAAK,KAAK,CAAE,MAAO,0BAA0B,CAC7C,QAAS,MAAO,aAAa,CAC/B,CACF,CAAC,CAED;AACA,KAAM,CAAAsJ,aAAa,CAAG,KAAO,CAAArJ,OAAO,EAAK,CACvC,KAAM,CAAAkJ,gBAAgB,CAAGpB,eAAe,CAAC9H,OAAO,CAAC,CAEjD;AACA,GAAI,CAACkJ,gBAAgB,EAAIA,gBAAgB,CAACpE,MAAM,CAAG,CAAC,CAAE,CACpD,GAAIoE,gBAAgB,CAACpE,MAAM,CAAG,CAAC,EAAIoE,gBAAgB,CAACpE,MAAM,CAAG,CAAC,CAAE,CAC9D1D,eAAe,sDAAAyF,MAAA,CAAsDqC,gBAAgB,CAACpE,MAAM,gBAAc,CAAC,CAC7G,CAAC,IAAM,CACL1D,eAAe,CAAC,8CAA8C,CAAC,CACjE,CACA,OACF,CAEA,GAAI8H,gBAAgB,CAACpE,MAAM,CAAG,CAAC,CAAE,CAC/B1D,eAAe,CAAC,uEAAuE,CAAC,CACxF,OACF,CAEA;AACA,GAAI,CAAC2G,oBAAoB,CAACmB,gBAAgB,CAAC,CAAE,CAC3C,KAAM,CAAAf,UAAU,CAAGe,gBAAgB,CAACd,SAAS,CAAC,CAAC,CAAE,CAAC,CAAC,CACnD,GAAI,CAACC,sBAAsB,CAACF,UAAU,CAAC,CAAE,CACvC/G,eAAe,0BAAAyF,MAAA,CAAyBsB,UAAU,8CAA2C,CAAC,CAChG,CAAC,IAAM,CACL/G,eAAe,CAAC,uFAAuF,CAAC,CAC1G,CACA,OACF,CAEAJ,mBAAmB,CAAC,IAAI,CAAC,CACzBI,eAAe,CAAC,EAAE,CAAC,CAEnB,GAAI,CACF,GAAI,CAAA8K,WAAW,CAAG,IAAI,CAEtB;AACA,KAAM,CAAAC,mBAAmB,CAAGC,OAAO,CAACC,GAAG,CAACC,6BAA6B,CACrEzI,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAEqI,mBAAmB,CAAG,SAAS,CAAG,SAAS,CAAC,CAChFtI,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAEqI,mBAAmB,CAAGA,mBAAmB,CAAC/D,SAAS,CAAC,CAAC,CAAE,EAAE,CAAC,CAAG,KAAK,CAAG,KAAK,CAAC,CAC/GvE,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAEqI,mBAAmB,CAAC,CAEjE,GAAIA,mBAAmB,EAAIA,mBAAmB,GAAK,+BAA+B,CAAE,CAClF,GAAI,CACFtI,OAAO,CAACC,GAAG,CAAC,sCAAsC,CAAC,CACnD,KAAM,CAAAyI,MAAM,oDAAA1F,MAAA,CAAsDsF,mBAAmB,eAAAtF,MAAA,CAAa2F,kBAAkB,CAACtD,gBAAgB,CAAC,uBAAqB,CAC3JrF,OAAO,CAACC,GAAG,CAAC,UAAU,CAAEyI,MAAM,CAACpJ,OAAO,CAACgJ,mBAAmB,CAAE,gBAAgB,CAAC,CAAC,CAE9E,KAAM,CAAAM,mBAAmB,CAAG,KAAM,CAAAC,KAAK,CAACH,MAAM,CAAE,CAC9CI,OAAO,CAAE,CACP,QAAQ,CAAE,kBAAkB,CAC5B,cAAc,CAAE,kBAClB,CACF,CAAC,CAAC,CAEF9I,OAAO,CAACC,GAAG,CAAC,kCAAkC,CAAE2I,mBAAmB,CAACrI,MAAM,CAAC,CAE3E,GAAIqI,mBAAmB,CAACpI,EAAE,CAAE,CAC1B,KAAM,CAAAuI,eAAe,CAAG,KAAM,CAAAH,mBAAmB,CAAC/H,IAAI,CAAC,CAAC,CACxDb,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAEkB,IAAI,CAAC+G,SAAS,CAACa,eAAe,CAAE,IAAI,CAAE,CAAC,CAAC,CAAC,CAEvF;AACA,GAAIA,eAAe,CAACC,MAAM,EAAID,eAAe,CAACC,MAAM,CAAC/H,MAAM,CAAG,CAAC,CAAE,CAC/D,KAAM,CAAA+H,MAAM,CAAGD,eAAe,CAACC,MAAM,CAAC,CAAC,CAAC,CACxChJ,OAAO,CAACC,GAAG,CAAC,eAAe,CAAEkB,IAAI,CAAC+G,SAAS,CAACc,MAAM,CAAE,IAAI,CAAE,CAAC,CAAC,CAAC,CAE7DX,WAAW,CAAG,CACZY,QAAQ,CAAED,MAAM,CAACC,QAAQ,EAAID,MAAM,CAACE,WAAW,EAAIF,MAAM,CAACG,cAAc,EAAIH,MAAM,CAACI,YAAY,EAAIJ,MAAM,CAACK,YAAY,EAAI,EAAE,CAC5HC,MAAM,CAAEN,MAAM,CAACM,MAAM,EAAIN,MAAM,CAACO,YAAY,EAAIP,MAAM,CAACQ,qBAAqB,EAAIR,MAAM,CAACS,YAAY,EAAI,EAAE,CACzG9N,IAAI,CAAEqN,MAAM,CAACU,IAAI,EAAIV,MAAM,CAACW,QAAQ,EAAIX,MAAM,CAACY,iBAAiB,EAAIZ,MAAM,CAACa,QAAQ,EAAIb,MAAM,CAACrN,IAAI,EAAI,EAAE,CACxGmO,OAAO,CAAE,SACX,CAAC,CACD9J,OAAO,CAACC,GAAG,CAAC,sDAAsD,CAAEoI,WAAW,CAAC,CAClF,CAAC,IAAM,IAAIU,eAAe,CAACgB,YAAY,GAAK,CAAC,CAAE,CAC7C/J,OAAO,CAACC,GAAG,CAAC,oDAAoD,CAAC,CACnE,CAAC,IAAM,CACLD,OAAO,CAACC,GAAG,CAAC,6CAA6C,CAAE8I,eAAe,CAAC,CAC7E,CACF,CAAC,IAAM,CACL,KAAM,CAAA3F,SAAS,CAAG,KAAM,CAAAwF,mBAAmB,CAACjP,IAAI,CAAC,CAAC,CAClDqG,OAAO,CAACC,GAAG,CAAC,iCAAiC,CAAEmD,SAAS,CAAC,CAEzD,GAAIwF,mBAAmB,CAACrI,MAAM,GAAK,GAAG,CAAE,CACtCP,OAAO,CAACC,GAAG,CAAC,wDAAwD,CAAC,CACvE,CAAC,IAAM,IAAI2I,mBAAmB,CAACrI,MAAM,GAAK,GAAG,CAAE,CAC7CP,OAAO,CAACC,GAAG,CAAC,oCAAoC,CAAC,CACnD,CAAC,IAAM,CACLD,OAAO,CAACC,GAAG,CAAC,iCAAiC,CAAE2I,mBAAmB,CAACrI,MAAM,CAAEqI,mBAAmB,CAACvF,UAAU,CAAC,CAC5G,CACF,CACF,CAAE,MAAO2G,gBAAgB,CAAE,CACzBhK,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAE+J,gBAAgB,CAAC1G,OAAO,CAAC,CACjE,CACF,CAAC,IAAM,CACLtD,OAAO,CAACC,GAAG,CAAC,+DAA+D,CAAC,CAC9E,CAEA;AACA,GAAI,CAACoI,WAAW,CAAE,CAChB,KAAM,CAAA4B,YAAY,CAAG1B,OAAO,CAACC,GAAG,CAAC0B,sBAAsB,CACvD,KAAM,CAAAC,YAAY,CAAG5B,OAAO,CAACC,GAAG,CAAC4B,sBAAsB,EAAI,wBAAwB,CAEnF,GAAIH,YAAY,EAAIA,YAAY,GAAK,wBAAwB,CAAE,CAC7D,GAAI,CACFjK,OAAO,CAACC,GAAG,CAAC,oDAAoD,CAAC,CACjE,KAAM,CAAAoK,YAAY,CAAG,KAAM,CAAAxB,KAAK,IAAA7F,MAAA,CAC3BmH,YAAY,gBAAAnH,MAAA,CAAc2F,kBAAkB,CAACtD,gBAAgB,CAAC,EACjE,CACEyD,OAAO,CAAE,CACP,QAAQ,CAAE,kBAAkB,CAC5B,cAAc,CAAE,kBAAkB,CAClC,eAAe,WAAA9F,MAAA,CAAYiH,YAAY,CAAE,CACzC,WAAW,CAAEA,YACf,CACF,CACF,CAAC,CAED,GAAII,YAAY,CAAC7J,EAAE,CAAE,CACnB,KAAM,CAAA8J,QAAQ,CAAG,KAAM,CAAAD,YAAY,CAACxJ,IAAI,CAAC,CAAC,CAC1Cb,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAEqK,QAAQ,CAAC,CAE3C,GAAIA,QAAQ,EAAIA,QAAQ,CAACC,OAAO,CAAE,CAChC,KAAM,CAAAC,IAAI,CAAGF,QAAQ,CAACC,OAAO,CAC7BlC,WAAW,CAAG,CACZY,QAAQ,CAAEuB,IAAI,CAACC,aAAa,EAAID,IAAI,CAACE,iBAAiB,EAAIF,IAAI,CAACG,eAAe,EAAIH,IAAI,CAACI,iBAAiB,EAAI,EAAE,CAC9GtB,MAAM,CAAEkB,IAAI,CAACjB,YAAY,EAAIiB,IAAI,CAACK,sBAAsB,EAAIL,IAAI,CAAClB,MAAM,EAAI,EAAE,CAC7E3N,IAAI,CAAE6O,IAAI,CAACM,kBAAkB,EAAIN,IAAI,CAACO,SAAS,EAAIP,IAAI,CAACb,QAAQ,EAAIa,IAAI,CAACd,IAAI,EAAI,EAAE,CACnFI,OAAO,CAAE,SACX,CAAC,CACD9J,OAAO,CAACC,GAAG,CAAC,8DAA8D,CAAC,CAC7E,CACF,CACF,CAAE,MAAO+K,SAAS,CAAE,CAClBhL,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAE+K,SAAS,CAAC1H,OAAO,CAAC,CACnD,CACF,CACF,CAEA;AACA,KAAM,CAAA2H,mBAAmB,CAAG1C,OAAO,CAACC,GAAG,CAAC0C,6BAA6B,CAErE,GAAI,CAAC7C,WAAW,EAAI4C,mBAAmB,CAAE,CACvC,GAAI,CACFjL,OAAO,CAACC,GAAG,CAAC,qCAAqC,CAAC,CAClD,KAAM,CAAAK,QAAQ,CAAG,KAAM,CAAAuI,KAAK,8DAAA7F,MAAA,CACmC2F,kBAAkB,CAACtD,gBAAgB,CAAG,WAAW,CAAC,iFAAArC,MAAA,CAA+EiI,mBAAmB,CACnN,CAAC,CAED,GAAI3K,QAAQ,CAACE,EAAE,CAAE,CACf,KAAM,CAAAI,IAAI,CAAG,KAAM,CAAAN,QAAQ,CAACO,IAAI,CAAC,CAAC,CAClCb,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAEW,IAAI,CAAC,CAE1C,GAAIA,IAAI,CAACL,MAAM,GAAK,IAAI,EAAIK,IAAI,CAACuK,OAAO,EAAIvK,IAAI,CAACuK,OAAO,CAAClK,MAAM,CAAG,CAAC,CAAE,KAAAmK,qBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CACnE,KAAM,CAAAzC,MAAM,CAAGpI,IAAI,CAACuK,OAAO,CAAC,CAAC,CAAC,CAC9B,KAAM,CAAAO,iBAAiB,CAAG1C,MAAM,CAAC2C,kBAAkB,CAEnD;AACA,KAAM,CAAAC,YAAY,CAAG,EAAAR,qBAAA,CAAAM,iBAAiB,CAACxG,IAAI,CAAC2G,IAAI,EAC9CA,IAAI,CAACC,KAAK,CAACpH,QAAQ,CAAC,eAAe,CAAC,CAAC,UAAA0G,qBAAA,iBADlBA,qBAAA,CACoBW,SAAS,KAAAV,sBAAA,CAChDK,iBAAiB,CAACxG,IAAI,CAAC2G,IAAI,EAC3BA,IAAI,CAACC,KAAK,CAACpH,QAAQ,CAAC,SAAS,CAAC,CAAC,UAAA2G,sBAAA,iBAD/BA,sBAAA,CACiCU,SAAS,GAAI,EAAE,CAElD,KAAM,CAAAC,KAAK,CAAG,EAAAV,sBAAA,CAAAI,iBAAiB,CAACxG,IAAI,CAAC2G,IAAI,EACvCA,IAAI,CAACC,KAAK,CAACpH,QAAQ,CAAC,OAAO,CAAC,CAAC,UAAA4G,sBAAA,iBADjBA,sBAAA,CACmBS,SAAS,GAAI,EAAE,CAEhD,KAAM,CAAApC,QAAQ,CAAG,EAAA4B,sBAAA,CAAAG,iBAAiB,CAACxG,IAAI,CAAC2G,IAAI,EAC1CA,IAAI,CAACC,KAAK,CAACpH,QAAQ,CAAC,UAAU,CAAC,CAAC,UAAA6G,sBAAA,iBADjBA,sBAAA,CACmBQ,SAAS,KAAAP,sBAAA,CAC3CE,iBAAiB,CAACxG,IAAI,CAAC2G,IAAI,EAC3BA,IAAI,CAACC,KAAK,CAACpH,QAAQ,CAAC,6BAA6B,CAAC,CAAC,UAAA8G,sBAAA,iBADnDA,sBAAA,CACqDO,SAAS,GAAI,EAAE,CAEtE,KAAM,CAAAjC,OAAO,CAAG,EAAA2B,sBAAA,CAAAC,iBAAiB,CAACxG,IAAI,CAAC2G,IAAI,EACzCA,IAAI,CAACC,KAAK,CAACpH,QAAQ,CAAC,SAAS,CAAC,CAAC,UAAA+G,sBAAA,iBADjBA,sBAAA,CACmBM,SAAS,GAAI,SAAS,CAEzD,GAAIH,YAAY,EAAII,KAAK,CAAE,CACzB3D,WAAW,CAAG,CACZY,QAAQ,CAAE2C,YAAY,CACtBtC,MAAM,CAAE0C,KAAK,CACbrQ,IAAI,CAAEgO,QAAQ,CACdG,OAAO,CAAEA,OACX,CAAC,CACD9J,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAC,CACvC,CACF,CACF,CACF,CAAE,MAAOgM,QAAQ,CAAE,CACjBjM,OAAO,CAACkM,IAAI,CAAC,wBAAwB,CAAED,QAAQ,CAAC,CAClD,CACF,CAEA;AACA,GAAI,CAAC5D,WAAW,CAAE,CAChBrI,OAAO,CAACC,GAAG,CAAC,qCAAqC,CAAC,CAElD;AACA,KAAM,CAAAkM,cAAc,CAAG7D,mBAAmB,EAAIA,mBAAmB,GAAK,+BAA+B,CACrG,KAAM,CAAA8D,OAAO,CAAG7D,OAAO,CAACC,GAAG,CAAC0B,sBAAsB,EAAI3B,OAAO,CAACC,GAAG,CAAC0B,sBAAsB,GAAK,wBAAwB,CACrH,KAAM,CAAAmC,aAAa,CAAGpB,mBAAmB,EAAIA,mBAAmB,GAAK,+BAA+B,CAEpG,GAAI,CAACkB,cAAc,EAAI,CAACC,OAAO,EAAI,CAACC,aAAa,CAAE,CACjD9O,eAAe,yCAAAyF,MAAA,CAAwCqC,gBAAgB,kfAQmB,CAAC,CAC7F,CAAC,IAAM,CACL9H,eAAe,mCAAAyF,MAAA,CAAkCqC,gBAAgB,2DAAwD,CAAC,CAC5H,CACA,OACF,CAGA,GAAIgD,WAAW,CAAE,CACf;AACAlN,WAAW,CAACmK,IAAI,EAAAN,aAAA,CAAAA,aAAA,IACXM,IAAI,MACP5I,eAAe,CAAE2L,WAAW,CAACY,QAAQ,EAAI,EAAE,CAC3CtM,aAAa,CAAE0L,WAAW,CAACiB,MAAM,EAAI,EAAE,CACvC1M,WAAW,CAAEyL,WAAW,CAAC1M,IAAI,EAAI,EAAE,CACnCkB,cAAc,CAAEwL,WAAW,CAACyB,OAAO,EAAI,SAAS,CAChDhN,eAAe,CAAEuI,gBAAgB,EACjC,CAAC,CAEH9H,eAAe,CAAC,EAAE,CAAC,CACrB,CACF,CAAE,MAAO+D,KAAK,CAAE,CACdtB,OAAO,CAACsB,KAAK,CAAC,2BAA2B,CAAEA,KAAK,CAAC,CACjD/D,eAAe,CAAC,gFAAgF,CAAC,CACnG,CAAC,OAAS,CACRJ,mBAAmB,CAAC,KAAK,CAAC,CAC5B,CACF,CAAC,CAED;AACA,KAAM,CAAAmP,kBAAkB,CAAG,KAAAA,CAAA,GAAY,CACrC,GAAI,CAACC,SAAS,CAACC,WAAW,CAAE,CAC1BjP,eAAe,CAAC,+CAA+C,CAAC,CAChE,OACF,CAEAF,oBAAoB,CAAC,IAAI,CAAC,CAC1BE,eAAe,CAAC,EAAE,CAAC,CACnByC,OAAO,CAACC,GAAG,CAAC,iCAAiC,CAAC,CAE9C,GAAI,CACF,KAAM,CAAAwM,QAAQ,CAAG,KAAM,IAAI,CAAAC,OAAO,CAAC,CAACC,OAAO,CAAEC,MAAM,GAAK,CACtDL,SAAS,CAACC,WAAW,CAACK,kBAAkB,CACtCF,OAAO,CACPC,MAAM,CACN,CACEE,kBAAkB,CAAE,IAAI,CACxBC,OAAO,CAAE,KAAK,CACdC,UAAU,CAAE,KAAM;AACpB,CACF,CAAC,CACH,CAAC,CAAC,CAEF,KAAM,CAAEC,QAAQ,CAAEC,SAAU,CAAC,CAAGT,QAAQ,CAACU,MAAM,CAC/CnN,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAE,CAAEgN,QAAQ,CAAEC,SAAU,CAAC,CAAC,CAE1D;AACA,KAAM,CAAAjC,mBAAmB,CAAG1C,OAAO,CAACC,GAAG,CAAC0C,6BAA6B,CACrElL,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAE,CAAC,CAACgL,mBAAmB,CAAC,CAEpE,GAAIA,mBAAmB,CAAE,CACvB,GAAI,CACF,KAAM,CAAAmC,UAAU,6DAAApK,MAAA,CAA+DiK,QAAQ,MAAAjK,MAAA,CAAIkK,SAAS,UAAAlK,MAAA,CAAQiI,mBAAmB,CAAE,CACjIjL,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAC,CAE1C,KAAM,CAAAK,QAAQ,CAAG,KAAM,CAAAuI,KAAK,CAACuE,UAAU,CAAC,CACxCpN,OAAO,CAACC,GAAG,CAAC,4BAA4B,CAAEK,QAAQ,CAACC,MAAM,CAAC,CAE1D,GAAID,QAAQ,CAACE,EAAE,CAAE,CACf,KAAM,CAAAI,IAAI,CAAG,KAAM,CAAAN,QAAQ,CAACO,IAAI,CAAC,CAAC,CAClCb,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAEW,IAAI,CAAC,CAEpC,GAAIA,IAAI,CAACL,MAAM,GAAK,IAAI,EAAIK,IAAI,CAACuK,OAAO,EAAIvK,IAAI,CAACuK,OAAO,CAAClK,MAAM,CAAG,CAAC,CAAE,KAAAoM,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,uBAAA,CAAAC,uBAAA,CAAAC,uBAAA,CAAAC,uBAAA,CACnE,KAAM,CAAA7E,MAAM,CAAGpI,IAAI,CAACuK,OAAO,CAAC,CAAC,CAAC,CAC9B,KAAM,CAAAO,iBAAiB,CAAG1C,MAAM,CAAC2C,kBAAkB,CACnD3L,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAEyL,iBAAiB,CAAC,CAErD;AACA,KAAM,CAAAE,YAAY,CAAG,EAAAyB,sBAAA,CAAA3B,iBAAiB,CAACxG,IAAI,CAAC2G,IAAI,EAC9CA,IAAI,CAACC,KAAK,CAACpH,QAAQ,CAAC,eAAe,CAAC,CAAC,UAAA2I,sBAAA,iBADlBA,sBAAA,CACoBtB,SAAS,KAAAuB,sBAAA,CAChD5B,iBAAiB,CAACxG,IAAI,CAAC2G,IAAI,EAC3BA,IAAI,CAACC,KAAK,CAACpH,QAAQ,CAAC,SAAS,CAAC,CAAC,UAAA4I,sBAAA,iBAD/BA,sBAAA,CACiCvB,SAAS,GAC1CnI,IAAI,CAACiD,KAAK,CAACjD,IAAI,CAACC,MAAM,CAAC,CAAC,CAAG,GAAG,CAAC,CAAG,CAAC,CAErC,KAAM,CAAAmI,KAAK,CAAG,EAAAuB,sBAAA,CAAA7B,iBAAiB,CAACxG,IAAI,CAAC2G,IAAI,EACvCA,IAAI,CAACC,KAAK,CAACpH,QAAQ,CAAC,OAAO,CAAC,CAAC,UAAA6I,sBAAA,iBADjBA,sBAAA,CACmBxB,SAAS,KAAAyB,sBAAA,CACxC9B,iBAAiB,CAACxG,IAAI,CAAC2G,IAAI,EAC3BA,IAAI,CAACC,KAAK,CAACpH,QAAQ,CAAC,aAAa,CAAC,CAAC,UAAA8I,sBAAA,iBADnCA,sBAAA,CACqCzB,SAAS,KAAA0B,sBAAA,CAC9C/B,iBAAiB,CAACxG,IAAI,CAAC2G,IAAI,EAC3BA,IAAI,CAACC,KAAK,CAACpH,QAAQ,CAAC,cAAc,CAAC,CAAC,UAAA+I,sBAAA,iBADpCA,sBAAA,CACsC1B,SAAS,GAAI,aAAa,CAElE,KAAM,CAAApC,QAAQ,CAAG,EAAA+D,uBAAA,CAAAhC,iBAAiB,CAACxG,IAAI,CAAC2G,IAAI,EAC1CA,IAAI,CAACC,KAAK,CAACpH,QAAQ,CAAC,UAAU,CAAC,EAAImH,IAAI,CAACC,KAAK,CAACpH,QAAQ,CAAC,6BAA6B,CAAC,CAAC,UAAAgJ,uBAAA,iBADvEA,uBAAA,CACyE3B,SAAS,KAAA4B,uBAAA,CACjGjC,iBAAiB,CAACxG,IAAI,CAAC2G,IAAI,EAC3BA,IAAI,CAACC,KAAK,CAACpH,QAAQ,CAAC,6BAA6B,CAAC,CAAC,UAAAiJ,uBAAA,iBADnDA,uBAAA,CACqD5B,SAAS,GAAI,kBAAkB,CAEtF,KAAM,CAAAjC,OAAO,CAAG,EAAA8D,uBAAA,CAAAlC,iBAAiB,CAACxG,IAAI,CAAC2G,IAAI,EACzCA,IAAI,CAACC,KAAK,CAACpH,QAAQ,CAAC,SAAS,CAAC,CAAC,UAAAkJ,uBAAA,iBADjBA,uBAAA,CACmB7B,SAAS,GAAI,SAAS,CAEzD,KAAM,CAAA+B,UAAU,CAAG,EAAAD,uBAAA,CAAAnC,iBAAiB,CAACxG,IAAI,CAAC2G,IAAI,EAC5CA,IAAI,CAACC,KAAK,CAACpH,QAAQ,CAAC,aAAa,CAAC,CAAC,UAAAmJ,uBAAA,iBADlBA,uBAAA,CACoB9B,SAAS,GAAI,EAAE,CAEtD/L,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAE,CAAE2L,YAAY,CAAEI,KAAK,CAAErC,QAAQ,CAAEG,OAAO,CAAEgE,UAAW,CAAC,CAAC,CAEzF;AACA3S,WAAW,CAACmK,IAAI,EAAAN,aAAA,CAAAA,aAAA,IACXM,IAAI,MACP5I,eAAe,CAAEkP,YAAY,CAACpI,QAAQ,CAAC,CAAC,CACxC7G,aAAa,CAAEqP,KAAK,CACpBpP,WAAW,CAAE+M,QAAQ,CACrB9M,cAAc,CAAEiN,OAAO,CACvBhN,eAAe,CAAEgR,UAAU,CAC3B/Q,cAAc,CAAE+Q,UAAU,CAAE;AAC5B3R,OAAO,CAAE2R,UAAW;AAAA,EACpB,CAAC,CAEHvQ,eAAe,CAAC,EAAE,CAAC,CACnByC,OAAO,CAACC,GAAG,CAAC,sCAAsC,CAAC,CACrD,CAAC,IAAM,CACLD,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAEW,IAAI,CAACL,MAAM,CAAEK,IAAI,CAACmN,aAAa,CAAC,CACjE;AACA,KAAM,CAAAC,YAAY,CAAG,CAAC,aAAa,CAAE,eAAe,CAAE,aAAa,CAAE,eAAe,CAAE,eAAe,CAAE,aAAa,CAAE,eAAe,CAAE,WAAW,CAAC,CACnJ,KAAM,CAAAC,YAAY,CAAGD,YAAY,CAACpK,IAAI,CAACiD,KAAK,CAACjD,IAAI,CAACC,MAAM,CAAC,CAAC,CAAGmK,YAAY,CAAC/M,MAAM,CAAC,CAAC,CAClF,KAAM,CAAAiN,cAAc,CAAGtK,IAAI,CAACiD,KAAK,CAACjD,IAAI,CAACC,MAAM,CAAC,CAAC,CAAG,GAAG,CAAC,CAAG,CAAC,CAE1D1I,WAAW,CAACmK,IAAI,EAAAN,aAAA,CAAAA,aAAA,IACXM,IAAI,MACP5I,eAAe,CAAEwR,cAAc,CAAC1K,QAAQ,CAAC,CAAC,CAC1C7G,aAAa,CAAEsR,YAAY,CAC3BrR,WAAW,CAAE,kBAAkB,CAC/BC,cAAc,CAAE,SAAS,CACzBC,eAAe,CAAE,EAAE,CACnBC,cAAc,CAAE,EAAG;AAAA,EACnB,CAAC,CACHQ,eAAe,CAAC,mFAAmF,CAAC,CACtG,CACF,CAAC,IAAM,CACLyC,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAEK,QAAQ,CAACC,MAAM,CAAC,CACzD,KAAM,IAAI,CAAA4N,KAAK,CAAC,0BAA0B,CAAC,CAC7C,CACF,CAAE,MAAO7M,KAAK,CAAE,CACdtB,OAAO,CAACsB,KAAK,CAAC,+BAA+B,CAAEA,KAAK,CAAC,CACrD;AACAnG,WAAW,CAACmK,IAAI,EAAAN,aAAA,CAAAA,aAAA,IACXM,IAAI,MACP5I,eAAe,CAAEkH,IAAI,CAACiD,KAAK,CAACjD,IAAI,CAACC,MAAM,CAAC,CAAC,CAAG,GAAG,CAAC,CAAG,CAAC,CACpDlH,aAAa,kBAAAqG,MAAA,CAAmBiK,QAAQ,CAACmB,OAAO,CAAC,CAAC,CAAC,OAAApL,MAAA,CAAKkK,SAAS,CAACkB,OAAO,CAAC,CAAC,CAAC,KAAG,CAC/ExR,WAAW,CAAE,kBAAkB,CAC/BC,cAAc,CAAE,SAAS,CACzBC,eAAe,CAAE,EAAE,CACnBC,cAAc,CAAE,EAAG;AAAA,EACnB,CAAC,CACHQ,eAAe,CAAC,uEAAuE,CAAC,CAC1F,CACF,CAAC,IAAM,CACL;AACAyC,OAAO,CAACC,GAAG,CAAC,qCAAqC,CAAC,CAElD,GAAI,CACF;AACA,KAAM,CAAAK,QAAQ,CAAG,KAAM,CAAAuI,KAAK,sEAAA7F,MAAA,CAC2CiK,QAAQ,gBAAAjK,MAAA,CAAckK,SAAS,wBACtG,CAAC,CAED,GAAI5M,QAAQ,CAACE,EAAE,CAAE,CACf,KAAM,CAAAI,IAAI,CAAG,KAAM,CAAAN,QAAQ,CAACO,IAAI,CAAC,CAAC,CAClCb,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAEW,IAAI,CAAC,CAEhD;AACAZ,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAEkB,IAAI,CAAC+G,SAAS,CAACtH,IAAI,CAAE,IAAI,CAAE,CAAC,CAAC,CAAC,CAEzE;AACA,KAAM,CAAAuI,cAAc,CAAGvF,IAAI,CAACiD,KAAK,CAACjD,IAAI,CAACC,MAAM,CAAC,CAAC,CAAG,GAAG,CAAC,CAAG,CAAC,CAE1D;AACA,KAAM,CAAAwK,UAAU,CAAGzN,IAAI,CAAC0N,IAAI,EACX1N,IAAI,CAAC2N,aAAa,EAClB3N,IAAI,CAAC4N,MAAM,EACX5N,IAAI,CAAC+I,QAAQ,EACb/I,IAAI,CAAC6N,oBAAoB,EACzB,aAAa,CAE9B;AACA,KAAM,CAAAC,QAAQ,CAAG9N,IAAI,CAACjF,IAAI,EACXiF,IAAI,CAAC+I,QAAQ,EACb/I,IAAI,CAAC6N,oBAAoB,EACzB7N,IAAI,CAAC+N,WAAW,EAChB,kBAAkB,CAEjCxT,WAAW,CAACmK,IAAI,EAAAN,aAAA,CAAAA,aAAA,IACXM,IAAI,MACP5I,eAAe,CAAEyM,cAAc,CAAC3F,QAAQ,CAAC,CAAC,CAC1C7G,aAAa,CAAE0R,UAAU,CACzBzR,WAAW,CAAE8R,QAAQ,CACrB7R,cAAc,CAAE+D,IAAI,CAAC+N,WAAW,EAAI,SAAS,CAC7C7R,eAAe,CAAE8D,IAAI,CAAChF,QAAQ,EAAI,EAAE,CACpCmB,cAAc,CAAE6D,IAAI,CAAChF,QAAQ,EAAI,EAAG;AAAA,EACpC,CAAC,CAEHoE,OAAO,CAACC,GAAG,CAAC,wCAAwC,CAAE,CACpDgJ,QAAQ,CAAEE,cAAc,CAAC3F,QAAQ,CAAC,CAAC,CACnC8F,MAAM,CAAE+E,UAAU,CAClB1S,IAAI,CAAE+S,QAAQ,CACd5E,OAAO,CAAElJ,IAAI,CAAC+N,WAAW,EAAI,SAAS,CACtC/S,QAAQ,CAAEgF,IAAI,CAAChF,QAAQ,EAAI,EAC7B,CAAC,CAAC,CAEF2B,eAAe,CAAC,EAAE,CAAC,CAAE;AACvB,CAAC,IAAM,CACL,KAAM,IAAI,CAAA4Q,KAAK,CAAC,4BAA4B,CAAC,CAC/C,CACF,CAAE,MAAO7M,KAAK,CAAE,CACdtB,OAAO,CAACC,GAAG,CAAC,kDAAkD,CAAC,CAC/D;AACA,KAAM,CAAA2O,WAAW,CAAG,CAAC,QAAQ,CAAE,MAAM,CAAE,QAAQ,CAAE,UAAU,CAAE,WAAW,CAAE,UAAU,CAAE,SAAS,CAAE,QAAQ,CAAC,CAC1G,KAAM,CAAAZ,YAAY,CAAG,CAAC,aAAa,CAAE,eAAe,CAAE,aAAa,CAAE,eAAe,CAAE,eAAe,CAAE,aAAa,CAAE,eAAe,CAAE,WAAW,CAAE,cAAc,CAAE,aAAa,CAAC,CAClL,KAAM,CAAAa,UAAU,CAAGD,WAAW,CAAChL,IAAI,CAACiD,KAAK,CAACjD,IAAI,CAACC,MAAM,CAAC,CAAC,CAAG+K,WAAW,CAAC3N,MAAM,CAAC,CAAC,CAC9E,KAAM,CAAAgN,YAAY,CAAGD,YAAY,CAACpK,IAAI,CAACiD,KAAK,CAACjD,IAAI,CAACC,MAAM,CAAC,CAAC,CAAGmK,YAAY,CAAC/M,MAAM,CAAC,CAAC,CAClF,KAAM,CAAAiN,cAAc,CAAGtK,IAAI,CAACiD,KAAK,CAACjD,IAAI,CAACC,MAAM,CAAC,CAAC,CAAG,GAAG,CAAC,CAAG,CAAC,CAE1D1I,WAAW,CAACmK,IAAI,EAAAN,aAAA,CAAAA,aAAA,IACXM,IAAI,MACP5I,eAAe,CAAEwR,cAAc,CAAC1K,QAAQ,CAAC,CAAC,CAC1C7G,aAAa,CAAEsR,YAAY,CAC3BrR,WAAW,CAAEiS,UAAU,CACvBhS,cAAc,CAAE,SAAS,CACzBC,eAAe,CAAE,EAAE,CACnBC,cAAc,CAAE,EAAG;AAAA,EACnB,CAAC,CAEHQ,eAAe,CAAC,EAAE,CAAC,CAAE;AACvB,CACF,CACF,CAAE,MAAO+D,KAAK,CAAE,CACdtB,OAAO,CAACsB,KAAK,CAAC,yBAAyB,CAAEA,KAAK,CAAC,CAC/C,GAAIA,KAAK,CAACwN,IAAI,GAAK,CAAC,CAAE,CACpBvR,eAAe,CAAC,wEAAwE,CAAC,CAC3F,CAAC,IAAM,IAAI+D,KAAK,CAACwN,IAAI,GAAK,CAAC,CAAE,CAC3BvR,eAAe,CAAC,0DAA0D,CAAC,CAC7E,CAAC,IAAM,IAAI+D,KAAK,CAACwN,IAAI,GAAK,CAAC,CAAE,CAC3BvR,eAAe,CAAC,+CAA+C,CAAC,CAClE,CAAC,IAAM,CACLA,eAAe,CAAC,wDAAwD,CAAC,CAC3E,CACF,CAAC,OAAS,CACRF,oBAAoB,CAAC,KAAK,CAAC,CAC3B2C,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAC,CAC9C,CACF,CAAC,CAED,mBACEhH,KAAA,QAAKuO,SAAS,CAAC,kCAAkC,CAAAC,QAAA,eAE/C1O,IAAA,QAAKyO,SAAS,CAAC,0BAA0B,CAAAC,QAAA,cACvCxO,KAAA,QAAKuO,SAAS,CAAC,UAAU,CAAAC,QAAA,eACvB1O,IAAA,WACEgW,OAAO,CAAEA,CAAA,GAAM9T,oBAAoB,CAAC,CAACD,iBAAiB,CAAE,CACxDwM,SAAS,qBAAAxE,MAAA,CAAsBxD,KAAK,CAAClG,YAAY,MAAA0J,MAAA,CAAIxD,KAAK,CAACjG,YAAY,kEAAiE,CAAAkO,QAAA,cAExI1O,IAAA,CAACd,OAAO,EAAC+W,IAAI,CAAE,EAAG,CAAE,CAAC,CACf,CAAC,CAGRhU,iBAAiB,eAChB/B,KAAA,QAAKuO,SAAS,CAAC,uJAAuJ,CAAAC,QAAA,eACpKxO,KAAA,QAAKuO,SAAS,CAAC,8BAA8B,CAAAC,QAAA,eAC3C1O,IAAA,OAAIyO,SAAS,CAAC,6BAA6B,CAAAC,QAAA,CAAC,cAAY,CAAI,CAAC,cAC7D1O,IAAA,MAAGyO,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,2BAAyB,CAAG,CAAC,EAC/D,CAAC,cACN1O,IAAA,QAAKyO,SAAS,CAAC,8BAA8B,CAAAC,QAAA,CAC1CK,MAAM,CAACD,OAAO,CAAC3O,MAAM,CAAC,CAACyO,GAAG,CAACsH,KAAA,MAAC,CAACjH,GAAG,CAAEkH,WAAW,CAAC,CAAAD,KAAA,oBAC7ClW,IAAA,WAEEgW,OAAO,CAAEA,CAAA,GAAMlJ,iBAAiB,CAACmC,GAAG,CAAE,CACtCR,SAAS,yEAAAxE,MAAA,CAA0ErI,YAAY,GAAKqN,GAAG,CAAG,gDAAgD,CAAG,EAAE,CAC1J,CAAAP,QAAA,cAELxO,KAAA,QAAKuO,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1C1O,IAAA,QAAKyO,SAAS,wCAAAxE,MAAA,CAAyCkM,WAAW,CAACtV,QAAQ,cAAa,CAAM,CAAC,cAC/FX,KAAA,QAAAwO,QAAA,eACE1O,IAAA,QAAKyO,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CAAEyH,WAAW,CAAC9V,IAAI,CAAM,CAAC,CAClEuB,YAAY,GAAKqN,GAAG,eACnB/O,KAAA,QAAKuO,SAAS,CAAC,mDAAmD,CAAAC,QAAA,eAChE1O,IAAA,CAACb,KAAK,EAAC8W,IAAI,CAAE,EAAG,CAAE,CAAC,cACnBjW,IAAA,SAAA0O,QAAA,CAAM,QAAM,CAAM,CAAC,EAChB,CACN,EACE,CAAC,EACH,CAAC,EAhBDO,GAiBC,CAAC,EACV,CAAC,CACC,CAAC,EACH,CACN,EACE,CAAC,CACH,CAAC,cAENjP,IAAA,WAAQyO,SAAS,qBAAAxE,MAAA,CAAsBxD,KAAK,CAACnG,OAAO,cAAa,CAAAoO,QAAA,cAC/D1O,IAAA,QAAKyO,SAAS,CAAC,wCAAwC,CAAAC,QAAA,cAErDxO,KAAA,QAAKuO,SAAS,CAAC,iDAAiD,CAAAC,QAAA,eAG9D1O,IAAA,QAAKyO,SAAS,CAAC,sDAAsD,CAAAC,QAAA,cACnE1O,IAAA,QAAKoW,GAAG,CAAC,mBAAmB,CAACC,GAAG,CAAC,eAAe,CAAC5H,SAAS,CAAC,aAAa,CAAE,CAAC,CACxE,CAAC,cAGNvO,KAAA,QAAKuO,SAAS,CAAC,gDAAgD,CAAAC,QAAA,eAC7D1O,IAAA,QAAKyO,SAAS,CAAC,iCAAiC,CAAAC,QAAA,CAAC,uCAEjD,CAAK,CAAC,cACN1O,IAAA,QAAKyO,SAAS,CAAC,uCAAuC,CAAAC,QAAA,CAAC,0DAEvD,CAAK,CAAC,EACH,CAAC,EACH,CAAC,CAEH,CAAC,CACA,CAAC,cAGT1O,IAAA,YAASyO,SAAS,CAAC,OAAO,CAAAC,QAAA,cACxBxO,KAAA,QAAKuO,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1CxO,KAAA,QAAKuO,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChC1O,IAAA,OAAIyO,SAAS,CAAC,uCAAuC,CAAAC,QAAA,CAAC,wBAAsB,CAAI,CAAC,cACjF1O,IAAA,MAAGyO,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,wDAAsD,CAAG,CAAC,EACpF,CAAC,cAGN1O,IAAA,QAAKyO,SAAS,CAAC,2BAA2B,CAAAC,QAAA,cACxCxO,KAAA,QAAKuO,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1C1O,IAAA,QAAKyO,SAAS,2BAAAxE,MAAA,CAA4B3I,WAAW,GAAK,CAAC,CAAGmF,KAAK,CAAClG,YAAY,CAAG,aAAa,8DAA6D,CAAAmO,QAAA,CAAC,GAE9J,CAAK,CAAC,cACN1O,IAAA,QAAKyO,SAAS,aAAAxE,MAAA,CAAc3I,WAAW,GAAK,CAAC,CAAGmF,KAAK,CAAClG,YAAY,CAAG,aAAa,CAAG,CAAM,CAAC,cAC5FP,IAAA,QAAKyO,SAAS,2BAAAxE,MAAA,CAA4B3I,WAAW,GAAK,CAAC,CAAGmF,KAAK,CAAClG,YAAY,CAAG,aAAa,MAAA0J,MAAA,CAAI3I,WAAW,GAAK,CAAC,CAAG,YAAY,CAAG,eAAe,mDAAkD,CAAAoN,QAAA,CAAC,GAEzM,CAAK,CAAC,EACH,CAAC,CACH,CAAC,CAELpN,WAAW,GAAK,CAAC,cAChBpB,KAAA,QAAKuO,SAAS,CAAC,gDAAgD,CAAAC,QAAA,eAC7DxO,KAAA,QAAKuO,SAAS,CAAC,2BAA2B,CAAAC,QAAA,eAExCxO,KAAA,QAAKuO,SAAS,CAAC,8BAA8B,CAAAC,QAAA,eAC3CxO,KAAA,QAAKuO,SAAS,CAAC,kCAAkC,CAAAC,QAAA,eAC/C1O,IAAA,CAACjB,KAAK,EAAC0P,SAAS,CAAEhI,KAAK,CAAChG,MAAO,CAACwV,IAAI,CAAE,EAAG,CAAE,CAAC,cAC5CjW,IAAA,OAAIyO,SAAS,CAAC,qCAAqC,CAAAC,QAAA,CAAC,qBAAmB,CAAI,CAAC,EACzE,CAAC,cACN1O,IAAA,MAAGyO,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CAAC,wBAAsB,CAAG,CAAC,cAE5DxO,KAAA,QAAKuO,SAAS,CAAC,WAAW,CAAAC,QAAA,eAExBxO,KAAA,QAAAwO,QAAA,eACExO,KAAA,UAAOuO,SAAS,CAAC,8CAA8C,CAAAC,QAAA,EAAC,qBAC3C,cAAA1O,IAAA,SAAMyO,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAC,GAAC,CAAM,CAAC,EACrD,CAAC,cACRxO,KAAA,WACEG,IAAI,CAAC,kBAAkB,CACvByL,KAAK,CAAE3J,QAAQ,CAACE,gBAAiB,CACjCiU,QAAQ,CAAE1K,iBAAkB,CAC5B2K,QAAQ,MACR9H,SAAS,CAAC,sIAAsI,CAAAC,QAAA,eAEhJ1O,IAAA,WAAQ8L,KAAK,CAAC,EAAE,CAAA4C,QAAA,CAAC,2BAAyB,CAAQ,CAAC,cACnD1O,IAAA,WAAQ8L,KAAK,CAAC,sBAAsB,CAAA4C,QAAA,CAAC,sBAAoB,CAAQ,CAAC,cAClE1O,IAAA,WAAQ8L,KAAK,CAAC,WAAW,CAAA4C,QAAA,CAAC,uBAAqB,CAAQ,CAAC,cACxD1O,IAAA,WAAQ8L,KAAK,CAAC,sBAAsB,CAAA4C,QAAA,CAAC,sBAAoB,CAAQ,CAAC,cAClE1O,IAAA,WAAQ8L,KAAK,CAAC,cAAc,CAAA4C,QAAA,CAAC,cAAY,CAAQ,CAAC,cAClD1O,IAAA,WAAQ8L,KAAK,CAAC,UAAU,CAAA4C,QAAA,CAAC,kBAAgB,CAAQ,CAAC,cAClD1O,IAAA,WAAQ8L,KAAK,CAAC,WAAW,CAAA4C,QAAA,CAAC,WAAS,CAAQ,CAAC,cAC5C1O,IAAA,WAAQ8L,KAAK,CAAC,OAAO,CAAA4C,QAAA,CAAC,OAAK,CAAQ,CAAC,EAC9B,CAAC,EACN,CAAC,cAENxO,KAAA,QAAKuO,SAAS,CAAC,2BAA2B,CAAAC,QAAA,eACxCxO,KAAA,QAAAwO,QAAA,eACExO,KAAA,UAAOuO,SAAS,CAAC,8CAA8C,CAAAC,QAAA,EAAC,aACnD,cAAA1O,IAAA,SAAMyO,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAC,GAAC,CAAM,CAAC,EAC7C,CAAC,cACR1O,IAAA,UACEqN,IAAI,CAAC,MAAM,CACXhN,IAAI,CAAC,WAAW,CAChByL,KAAK,CAAE3J,QAAQ,CAACG,SAAU,CAC1BgU,QAAQ,CAAE1K,iBAAkB,CAC5B4K,WAAW,CAAC,uBAAuB,CACnC/H,SAAS,CAAC,6HAA6H,CACxI,CAAC,EACC,CAAC,cACNvO,KAAA,QAAAwO,QAAA,eACExO,KAAA,UAAOuO,SAAS,CAAC,8CAA8C,CAAAC,QAAA,EAAC,YACpD,cAAA1O,IAAA,SAAMyO,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAC,GAAC,CAAM,CAAC,EAC5C,CAAC,cACR1O,IAAA,UACEqN,IAAI,CAAC,MAAM,CACXhN,IAAI,CAAC,UAAU,CACfyL,KAAK,CAAE3J,QAAQ,CAACI,QAAS,CACzB+T,QAAQ,CAAE1K,iBAAkB,CAC5B4K,WAAW,CAAC,sBAAsB,CAClC/H,SAAS,CAAC,6HAA6H,CACxI,CAAC,EACC,CAAC,EACH,CAAC,cACNvO,KAAA,QAAKuO,SAAS,CAAC,2BAA2B,CAAAC,QAAA,eACxCxO,KAAA,QAAAwO,QAAA,eACExO,KAAA,UAAOuO,SAAS,CAAC,8CAA8C,CAAAC,QAAA,EAAC,gBAChD,cAAA1O,IAAA,SAAMyO,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAC,GAAC,CAAM,CAAC,EAChD,CAAC,cACR1O,IAAA,UACEqN,IAAI,CAAC,MAAM,CACXhN,IAAI,CAAC,aAAa,CAClByL,KAAK,CAAE3J,QAAQ,CAACM,WAAY,CAC5B6T,QAAQ,CAAE1K,iBAAkB,CAC5B6C,SAAS,CAAC,6HAA6H,CACxI,CAAC,EACC,CAAC,cACNvO,KAAA,QAAAwO,QAAA,eACExO,KAAA,UAAOuW,OAAO,CAAC,QAAQ,CAAChI,SAAS,CAAC,8CAA8C,CAAAC,QAAA,EAAC,SACxE,cAAA1O,IAAA,SAAMyO,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAC,GAAC,CAAM,CAAC,EACzC,CAAC,cACRxO,KAAA,WACEyG,EAAE,CAAC,QAAQ,CACXtG,IAAI,CAAC,QAAQ,CACbyL,KAAK,CAAE3J,QAAQ,CAACkD,MAAO,CACvBiR,QAAQ,CAAE1K,iBAAkB,CAC5B2K,QAAQ,MACR9H,SAAS,CAAC,sIAAsI,CAChJiI,QAAQ,CAAEjR,kBAAmB,CAAAiJ,QAAA,eAE7B1O,IAAA,WAAQ8L,KAAK,CAAC,EAAE,CAAA4C,QAAA,CACbjJ,kBAAkB,CAAG,oBAAoB,CAAG,oBAAoB,CAC3D,CAAC,CACRN,YAAY,CAACE,MAAM,CAACuJ,GAAG,CAAE+H,UAAU,eAClC3W,IAAA,WAA4B8L,KAAK,CAAE6K,UAAU,CAAC7N,EAAG,CAAA4F,QAAA,CAC9CiI,UAAU,CAAC5N,UAAU,EADX4N,UAAU,CAAC7N,EAEhB,CACT,CAAC,EACI,CAAC,EACN,CAAC,EACH,CAAC,cAEN5I,KAAA,QAAKuO,SAAS,CAAC,2BAA2B,CAAAC,QAAA,eACxCxO,KAAA,QAAAwO,QAAA,eACE1O,IAAA,UAAOyO,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,YAAU,CAAO,CAAC,cAClF1O,IAAA,UACEqN,IAAI,CAAC,MAAM,CACXhN,IAAI,CAAC,WAAW,CAChByL,KAAK,CAAE3J,QAAQ,CAACY,SAAU,CAC1BuT,QAAQ,CAAE1K,iBAAkB,CAC5B4K,WAAW,CAAC,uBAAuB,CACnC/H,SAAS,CAAC,6HAA6H,CACxI,CAAC,EACC,CAAC,cACNvO,KAAA,QAAAwO,QAAA,eACE1O,IAAA,UAAOyW,OAAO,CAAC,WAAW,CAAChI,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,YAEpF,CAAO,CAAC,cACR1O,IAAA,UACEqN,IAAI,CAAC,MAAM,CACX1G,EAAE,CAAC,WAAW,CACdtG,IAAI,CAAC,WAAW,CAChByL,KAAK,CAAE3J,QAAQ,CAACe,SAAU,CAC1BoT,QAAQ,CAAE1K,iBAAkB,CAC5B6C,SAAS,CAAC,6HAA6H,CACxI,CAAC,EACC,CAAC,EACH,CAAC,cACNvO,KAAA,QAAKuO,SAAS,CAAC,2BAA2B,CAAAC,QAAA,eACxCxO,KAAA,QAAAwO,QAAA,eACExO,KAAA,UAAOuO,SAAS,CAAC,8CAA8C,CAAAC,QAAA,EAAC,iBAC/C,cAAA1O,IAAA,SAAMyO,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAC,GAAC,CAAM,CAAC,EACjD,CAAC,cACR1O,IAAA,UACEqN,IAAI,CAAC,KAAK,CACVhN,IAAI,CAAC,aAAa,CAClByL,KAAK,CAAE3J,QAAQ,CAACO,WAAY,CAC5B4T,QAAQ,CAAE1K,iBAAkB,CAC5B4K,WAAW,CAAC,kBAAkB,CAC9B/H,SAAS,CAAC,6HAA6H,CACxI,CAAC,EACC,CAAC,cACNvO,KAAA,QAAAwO,QAAA,eACE1O,IAAA,UAAOyO,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,eAAa,CAAO,CAAC,cACrF1O,IAAA,UACEqN,IAAI,CAAC,OAAO,CACZhN,IAAI,CAAC,OAAO,CACZyL,KAAK,CAAE3J,QAAQ,CAACQ,KAAM,CACtB2T,QAAQ,CAAE1K,iBAAkB,CAC5B4K,WAAW,CAAC,gBAAgB,CAC5B/H,SAAS,CAAC,6HAA6H,CACxI,CAAC,EACC,CAAC,EACH,CAAC,cACNvO,KAAA,QAAKuO,SAAS,CAAC,2BAA2B,CAAAC,QAAA,eACxCxO,KAAA,QAAAwO,QAAA,eACExO,KAAA,UAAOuW,OAAO,CAAC,IAAI,CAAChI,SAAS,CAAC,8CAA8C,CAAAC,QAAA,EAAC,uBACtD,cAAA1O,IAAA,SAAMyO,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAC,GAAC,CAAM,CAAC,EACvD,CAAC,cACRxO,KAAA,WACEyG,EAAE,CAAC,IAAI,CACPtG,IAAI,CAAC,IAAI,CACTyL,KAAK,CAAE3J,QAAQ,CAACa,EAAG,CACnBsT,QAAQ,CAAE1K,iBAAkB,CAC5B2K,QAAQ,MACR9H,SAAS,CAAC,sIAAsI,CAChJiI,QAAQ,CAAEjR,kBAAmB,CAAAiJ,QAAA,eAE7B1O,IAAA,WAAQ8L,KAAK,CAAC,EAAE,CAAA4C,QAAA,CACbjJ,kBAAkB,CACf,oBAAoB,oBAAAwE,MAAA,CACDO,cAAc,CAAC,CAAC,CAACtC,MAAM,eAAa,CAErD,CAAC,CACRsC,cAAc,CAAC,CAAC,CAACoE,GAAG,CAAE9E,MAAM,eAC3B9J,IAAA,WAA0B8L,KAAK,CAAEhC,MAAM,CAACZ,IAAK,CAAAwF,QAAA,CAC1C5E,MAAM,CAACX,MAAM,EADHW,MAAM,CAACZ,IAEZ,CACT,CAAC,EACI,CAAC,EACN,CAAC,cACNhJ,KAAA,QAAAwO,QAAA,eACExO,KAAA,UAAOuW,OAAO,CAAC,SAAS,CAAChI,SAAS,CAAC,8CAA8C,CAAAC,QAAA,EAAC,UACxE,cAAA1O,IAAA,SAAMyO,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAC,GAAC,CAAM,CAAC,EAC1C,CAAC,cACRxO,KAAA,WACEyG,EAAE,CAAC,SAAS,CACZtG,IAAI,CAAC,SAAS,CACdyL,KAAK,CAAE3J,QAAQ,CAACc,OAAQ,CACxBqT,QAAQ,CAAE1K,iBAAkB,CAC5B2K,QAAQ,MACR9H,SAAS,CAAC,sIAAsI,CAChJiI,QAAQ,CAAEjR,kBAAmB,CAAAiJ,QAAA,eAE7B1O,IAAA,WAAQ8L,KAAK,CAAC,EAAE,CAAA4C,QAAA,CACbjJ,kBAAkB,CAAG,sBAAsB,CAAG,qBAAqB,CAC9D,CAAC,cACTzF,IAAA,WAAQ8L,KAAK,CAAC,KAAK,CAAA4C,QAAA,CAAC,eAAa,CAAQ,CAAC,CACzCvJ,YAAY,CAACI,SAAS,CAACqJ,GAAG,CAAE3L,OAAO,eAClCjD,IAAA,WAAgC8L,KAAK,CAAE7I,OAAO,CAACwG,SAAU,CAAAiF,QAAA,CACtDzL,OAAO,CAACyG,WAAW,EADTzG,OAAO,CAACwG,SAEb,CACT,CAAC,EACI,CAAC,EACN,CAAC,EACH,CAAC,EAGH,CAAC,EACH,CAAC,cAGNvJ,KAAA,QAAKuO,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BxO,KAAA,QAAKuO,SAAS,CAAC,kCAAkC,CAAAC,QAAA,eAC/C1O,IAAA,CAACnB,MAAM,EAAC4P,SAAS,CAAEhI,KAAK,CAAChG,MAAO,CAACwV,IAAI,CAAE,EAAG,CAAE,CAAC,cAC7CjW,IAAA,OAAIyO,SAAS,CAAC,qCAAqC,CAAAC,QAAA,CAAC,UAAQ,CAAI,CAAC,EAC9D,CAAC,cACN1O,IAAA,MAAGyO,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CAAC,6BAA2B,CAAG,CAAC,cAMjExO,KAAA,QAAAwO,QAAA,eACExO,KAAA,UAAOuO,SAAS,CAAC,8CAA8C,CAAAC,QAAA,eAC7D1O,IAAA,CAACZ,MAAM,EAAC6W,IAAI,CAAE,EAAG,CAACxH,SAAS,CAAC,aAAa,CAAE,CAAC,iBAE9C,EAAO,CAAC,cACRvO,KAAA,QAAKuO,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBxO,KAAA,QAAKuO,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9B1O,IAAA,UACEqN,IAAI,CAAC,MAAM,CACXhN,IAAI,CAAC,SAAS,CACdyL,KAAK,CAAE3J,QAAQ,CAACiB,OAAQ,CACxBkT,QAAQ,CAAE1K,iBAAkB,CAC5B4K,WAAW,CAAC,eAAe,CAC3B/H,SAAS,sIAAAxE,MAAA,CAAuI9F,gBAAgB,CAAG,YAAY,CAAG,EAAE,CAAG,CACvLuS,QAAQ,CAAEvS,gBAAiB,CAC5B,CAAC,CACDA,gBAAgB,cACfnE,IAAA,QAAKyO,SAAS,CAAC,qDAAqD,CAAAC,QAAA,cAClE1O,IAAA,QAAKyO,SAAS,CAAC,8DAA8D,CAAM,CAAC,CACjF,CAAC,cAENzO,IAAA,CAACZ,MAAM,EAAC6W,IAAI,CAAE,EAAG,CAACxH,SAAS,CAAC,mEAAmE,CAAE,CAClG,EACE,CAAC,cACNzO,IAAA,WACEqN,IAAI,CAAC,QAAQ,CACb2I,OAAO,CAAEzC,kBAAmB,CAC5BmD,QAAQ,CAAErS,iBAAiB,EAAIF,gBAAiB,CAChDsK,SAAS,cAAAxE,MAAA,CAAexD,KAAK,CAAClG,YAAY,MAAA0J,MAAA,CAAIxD,KAAK,CAACjG,YAAY,yFAAAyJ,MAAA,CAAuF5F,iBAAiB,EAAIF,gBAAgB,CAAG,+BAA+B,CAAG,2CAA2C,CAAG,CAC/QyS,KAAK,CAAEvS,iBAAiB,CAAG,0BAA0B,CAAG,sBAAuB,CAC/E,aAAW,6CAA6C,CAAAqK,QAAA,CAEvDrK,iBAAiB,cAChBrE,IAAA,QAAKyO,SAAS,CAAC,2DAA2D,CAAM,CAAC,cAEjFzO,IAAA,CAACnB,MAAM,EAACoX,IAAI,CAAE,EAAG,CAAE,CACpB,CACK,CAAC,EACN,CAAC,CACL1R,YAAY,eACXrE,KAAA,MAAGuO,SAAS,CAAC,6CAA6C,CAAAC,QAAA,eACxD1O,IAAA,SAAMyO,SAAS,CAAC,MAAM,CAAAC,QAAA,CAAC,cAAE,CAAM,CAAC,CAC/BnK,YAAY,EACZ,CACJ,CACApC,QAAQ,CAACiB,OAAO,EAAI,CAACe,gBAAgB,EAAI,CAACI,YAAY,EAAIpC,QAAQ,CAAC0B,WAAW,eAC7E3D,KAAA,MAAGuO,SAAS,CAAC,+CAA+C,CAAAC,QAAA,eAC1D1O,IAAA,SAAMyO,SAAS,CAAC,MAAM,CAAAC,QAAA,CAAC,QAAC,CAAM,CAAC,wDAEjC,EAAG,CACJ,CACA,CAACvM,QAAQ,CAACiB,OAAO,EAAI,CAACiB,iBAAiB,EAAI,CAACE,YAAY,EAAIpC,QAAQ,CAAC0B,WAAW,eAC/E3D,KAAA,MAAGuO,SAAS,CAAC,+CAA+C,CAAAC,QAAA,eAC1D1O,IAAA,SAAMyO,SAAS,CAAC,MAAM,CAAAC,QAAA,CAAC,cAAE,CAAM,CAAC,gDAElC,EAAG,CACJ,EAEE,CAAC,cAENxO,KAAA,QAAKuO,SAAS,CAAC,wCAAwC,CAAAC,QAAA,eACrD1O,IAAA,OAAIyO,SAAS,CAAC,qCAAqC,CAAAC,QAAA,CAAC,eAAa,CAAI,CAAC,cAEtExO,KAAA,UAAOuO,SAAS,CAAC,4CAA4C,CAAAC,QAAA,eAC3D1O,IAAA,UACEqN,IAAI,CAAC,UAAU,CACfoB,SAAS,CAAC,qCAAqC,CAC/CtB,OAAO,CAAElJ,wBAAyB,CAClCqS,QAAQ,CAAErJ,8BAA+B,CAC1C,CAAC,cACFjN,IAAA,SAAMyO,SAAS,CAAC,qCAAqC,CAAAC,QAAA,CAAC,yBAAuB,CAAM,CAAC,EAC/E,CAAC,EACL,CAAC,cAENxO,KAAA,QAAKuO,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBxO,KAAA,QAAKuO,SAAS,CAAC,wBAAwB,CAAAC,QAAA,eAErCxO,KAAA,QAAAwO,QAAA,eACExO,KAAA,UAAOuO,SAAS,CAAC,8CAA8C,CAAAC,QAAA,EAAC,gBAChD,cAAA1O,IAAA,SAAMyO,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAC,GAAC,CAAM,CAAC,EAChD,CAAC,cACR1O,IAAA,UACEqN,IAAI,CAAC,MAAM,CACXhN,IAAI,CAAC,cAAc,CACnByL,KAAK,CAAE3J,QAAQ,CAACkB,YAAa,CAC7BiT,QAAQ,CAAE1K,iBAAkB,CAC5B4K,WAAW,CAAC,iBAAiB,CAC7B/H,SAAS,CAAC,6HAA6H,CACxI,CAAC,EACC,CAAC,cACNvO,KAAA,QAAAwO,QAAA,eACExO,KAAA,UAAOuO,SAAS,CAAC,8CAA8C,CAAAC,QAAA,EAAC,SACvD,cAAA1O,IAAA,SAAMyO,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAC,GAAC,CAAM,CAAC,EACzC,CAAC,cACR1O,IAAA,UACEqN,IAAI,CAAC,MAAM,CACXhN,IAAI,CAAC,YAAY,CACjByL,KAAK,CAAE3J,QAAQ,CAACmB,UAAW,CAC3BgT,QAAQ,CAAE1K,iBAAkB,CAC5B4K,WAAW,CAAC,aAAa,CACzB/H,SAAS,CAAC,6HAA6H,CACxI,CAAC,EACC,CAAC,EACH,CAAC,cACNvO,KAAA,QAAKuO,SAAS,CAAC,wBAAwB,CAAAC,QAAA,eACrCxO,KAAA,QAAAwO,QAAA,eACE1O,IAAA,UAAOyO,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,MAAI,CAAO,CAAC,cAC5E1O,IAAA,UACEqN,IAAI,CAAC,MAAM,CACXhN,IAAI,CAAC,UAAU,CACfyL,KAAK,CAAE3J,QAAQ,CAACoB,QAAS,CACzB+S,QAAQ,CAAE1K,iBAAkB,CAC5B4K,WAAW,CAAC,MAAM,CAClB/H,SAAS,CAAC,6HAA6H,CACxI,CAAC,EACC,CAAC,cACNvO,KAAA,QAAAwO,QAAA,eACE1O,IAAA,UAAOyO,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,SAAO,CAAO,CAAC,cAC/E1O,IAAA,UACEqN,IAAI,CAAC,MAAM,CACXhN,IAAI,CAAC,aAAa,CAClByL,KAAK,CAAE3J,QAAQ,CAACqB,WAAY,CAC5B8S,QAAQ,CAAE1K,iBAAkB,CAC5B4K,WAAW,CAAC,SAAS,CACrB/H,SAAS,CAAC,6HAA6H,CACxI,CAAC,EACC,CAAC,EACH,CAAC,cAGNvO,KAAA,QAAAwO,QAAA,eACE1O,IAAA,UAAOyO,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,SAAO,CAAO,CAAC,cAC/E1O,IAAA,UACEqN,IAAI,CAAC,MAAM,CACXhN,IAAI,CAAC,aAAa,CAClByL,KAAK,CAAE3J,QAAQ,CAACuB,WAAY,CAC5B4S,QAAQ,CAAE1K,iBAAkB,CAC5B4K,WAAW,CAAC,eAAe,CAC3B/H,SAAS,CAAC,6HAA6H,CACxI,CAAC,EACC,CAAC,EAEH,CAAC,cACNzO,IAAA,OAAIyO,SAAS,CAAC,0CAA0C,CAAAC,QAAA,CAAC,kBAAgB,CAAI,CAAC,cAG9ExO,KAAA,QAAKuO,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBxO,KAAA,QAAKuO,SAAS,CAAC,wBAAwB,CAAAC,QAAA,eAErCxO,KAAA,QAAAwO,QAAA,eACExO,KAAA,UAAOuO,SAAS,CAAC,8CAA8C,CAAAC,QAAA,EAAC,gBAChD,cAAA1O,IAAA,SAAMyO,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAC,GAAC,CAAM,CAAC,EAChD,CAAC,cACR1O,IAAA,UACEqN,IAAI,CAAC,MAAM,CACXhN,IAAI,CAAC,iBAAiB,CACtByL,KAAK,CAAE3J,QAAQ,CAACwB,eAAgB,CAChC2S,QAAQ,CAAE1K,iBAAkB,CAC5B4K,WAAW,CAAC,iBAAiB,CAC7BE,QAAQ,CAAEzS,wBAAyB,CACnCwK,SAAS,gIAAAxE,MAAA,CAAiIhG,wBAAwB,CAAG,gCAAgC,CAAG,EAAE,CAAG,CAC9M,CAAC,EACC,CAAC,cACN/D,KAAA,QAAAwO,QAAA,eACExO,KAAA,UAAOuO,SAAS,CAAC,8CAA8C,CAAAC,QAAA,EAAC,SACvD,cAAA1O,IAAA,SAAMyO,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAC,GAAC,CAAM,CAAC,EACzC,CAAC,cACR1O,IAAA,UACEqN,IAAI,CAAC,MAAM,CACXhN,IAAI,CAAC,eAAe,CACpByL,KAAK,CAAE3J,QAAQ,CAACyB,aAAc,CAC9B0S,QAAQ,CAAE1K,iBAAkB,CAC5B4K,WAAW,CAAC,aAAa,CACzBE,QAAQ,CAAEzS,wBAAyB,CACnCwK,SAAS,gIAAAxE,MAAA,CAAiIhG,wBAAwB,CAAG,gCAAgC,CAAG,EAAE,CAAG,CAC9M,CAAC,EACC,CAAC,EACH,CAAC,cACN/D,KAAA,QAAKuO,SAAS,CAAC,wBAAwB,CAAAC,QAAA,eACrCxO,KAAA,QAAAwO,QAAA,eACE1O,IAAA,UAAOyO,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,MAAI,CAAO,CAAC,cAC5E1O,IAAA,UACEqN,IAAI,CAAC,MAAM,CACXhN,IAAI,CAAC,aAAa,CAClByL,KAAK,CAAE3J,QAAQ,CAAC0B,WAAY,CAC5ByS,QAAQ,CAAE1K,iBAAkB,CAC5B4K,WAAW,CAAC,MAAM,CAClBE,QAAQ,CAAEzS,wBAAyB,CACnCwK,SAAS,gIAAAxE,MAAA,CAAiIhG,wBAAwB,CAAG,gCAAgC,CAAG,EAAE,CAAG,CAC9M,CAAC,EACC,CAAC,cACN/D,KAAA,QAAAwO,QAAA,eACE1O,IAAA,UAAOyO,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,SAAO,CAAO,CAAC,cAC/E1O,IAAA,UACEqN,IAAI,CAAC,MAAM,CACXhN,IAAI,CAAC,gBAAgB,CACrByL,KAAK,CAAE3J,QAAQ,CAAC2B,cAAe,CAC/BwS,QAAQ,CAAE1K,iBAAkB,CAC5B4K,WAAW,CAAC,SAAS,CACrBE,QAAQ,CAAEzS,wBAAyB,CACnCwK,SAAS,gIAAAxE,MAAA,CAAiIhG,wBAAwB,CAAG,gCAAgC,CAAG,EAAE,CAAG,CAC9M,CAAC,EACC,CAAC,EACH,CAAC,cAGN/D,KAAA,QAAAwO,QAAA,eACE1O,IAAA,UAAOyO,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,SAAO,CAAO,CAAC,cAC/E1O,IAAA,UACEqN,IAAI,CAAC,MAAM,CACXhN,IAAI,CAAC,gBAAgB,CACrByL,KAAK,CAAE3J,QAAQ,CAAC6B,cAAe,CAC/BsS,QAAQ,CAAE1K,iBAAkB,CAC5B4K,WAAW,CAAC,eAAe,CAC3BE,QAAQ,CAAEzS,wBAAyB,CACnCwK,SAAS,gIAAAxE,MAAA,CAAiIhG,wBAAwB,CAAG,gCAAgC,CAAG,EAAE,CAAG,CAC9M,CAAC,EACC,CAAC,EAEH,CAAC,EACH,CAAC,EACH,CAAC,cAGNjE,IAAA,QAAKyO,SAAS,CAAC,uCAAuC,CAAAC,QAAA,cACpD1O,IAAA,WACEgW,OAAO,CAAEA,CAAA,GAAMzU,cAAc,CAAC,CAAC,CAAE,CACjCkN,SAAS,WAAAxE,MAAA,CAAYxD,KAAK,CAAClG,YAAY,MAAA0J,MAAA,CAAIxD,KAAK,CAACjG,YAAY,uEAAsE,CAAAkO,QAAA,CACpI,+BAED,CAAQ,CAAC,CACN,CAAC,EACH,CAAC,cAEN;AACA1O,IAAA,QAAKyO,SAAS,CAAC,gDAAgD,CAAAC,QAAA,cAC7DxO,KAAA,QAAKuO,SAAS,CAAC,KAAK,CAAAC,QAAA,eAClBxO,KAAA,QAAKuO,SAAS,CAAC,kCAAkC,CAAAC,QAAA,EAC9CtI,oBAAoB,CAAC,CAAC,cACrBpG,IAAA,CAAChB,KAAK,EAACyP,SAAS,CAAEhI,KAAK,CAAChG,MAAO,CAACwV,IAAI,CAAE,EAAG,CAAE,CAAC,cAE5CjW,IAAA,CAACnB,MAAM,EAAC4P,SAAS,CAAEhI,KAAK,CAAChG,MAAO,CAACwV,IAAI,CAAE,EAAG,CAAE,CAC7C,cACDjW,IAAA,OAAIyO,SAAS,CAAC,qCAAqC,CAAAC,QAAA,CAChDtI,oBAAoB,CAAC,CAAC,CAAG,kBAAkB,CAAG,2BAA2B,CACxE,CAAC,EACF,CAAC,cACNpG,IAAA,MAAGyO,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CAC9BtI,oBAAoB,CAAC,CAAC,wCAAA6D,MAAA,CACoBoF,yBAAyB,CAAC,CAAC,CAAC9B,WAAW,CAAC,CAAC,EAChF,sCAAsC,CAEzC,CAAC,cAGJrN,KAAA,QAAKuO,SAAS,CAAC,gCAAgC,CAAAC,QAAA,eAE7CxO,KAAA,QAAAwO,QAAA,eACExO,KAAA,UAAOuW,OAAO,CAAC,iBAAiB,CAAChI,SAAS,CAAC,8CAA8C,CAAAC,QAAA,EAAC,mBACvE,cAAA1O,IAAA,SAAMyO,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAC,GAAC,CAAM,CAAC,EACnD,CAAC,cACRxO,KAAA,WACEyG,EAAE,CAAC,iBAAiB,CACpBtG,IAAI,CAAC,iBAAiB,CACtByL,KAAK,CAAE3J,QAAQ,CAACgB,eAAgB,CAChCmT,QAAQ,CAAE1K,iBAAkB,CAC5B2K,QAAQ,MACR9H,SAAS,CAAC,sIAAsI,CAChJiI,QAAQ,CAAEjR,kBAAmB,CAAAiJ,QAAA,eAE7B1O,IAAA,WAAQ8L,KAAK,CAAC,EAAE,CAAA4C,QAAA,CACbjJ,kBAAkB,CAAG,8BAA8B,CAAG,8BAA8B,CAC/E,CAAC,CACRN,YAAY,CAACK,gBAAgB,CAACoJ,GAAG,CAAEzL,eAAe,eACjDnD,IAAA,WAAyC8L,KAAK,CAAE3I,eAAe,CAACkG,UAAW,CAAAqF,QAAA,CACxEvL,eAAe,CAACmG,QAAQ,EADdnG,eAAe,CAACkG,UAErB,CACT,CAAC,EACI,CAAC,EACN,CAAC,CAGLlH,QAAQ,CAACgB,eAAe,eACvBjD,KAAA,QAAKuO,SAAS,mBAAAxE,MAAA,CAAoBxD,KAAK,CAAC/F,QAAQ,UAAS,CAAAgO,QAAA,eACvDxO,KAAA,QAAKuO,SAAS,CAAC,kCAAkC,CAAAC,QAAA,EAC9C,CAAC,IAAM,CACN,KAAM,CAAAmI,YAAY,CAAG1R,YAAY,CAACK,gBAAgB,CAAC2G,IAAI,CACrDkB,IAAI,EAAIA,IAAI,CAAChE,UAAU,CAACoB,QAAQ,CAAC,CAAC,GAAKtI,QAAQ,CAACgB,eAAe,CAACsH,QAAQ,CAAC,CAC3E,CAAC,CACD,KAAM,CAAA6C,QAAQ,CAAG,CAAAuJ,YAAY,SAAZA,YAAY,iBAAZA,YAAY,CAAEvN,QAAQ,CAACiE,WAAW,CAAC,CAAC,GAAI,EAAE,CAE3D,GAAID,QAAQ,CAAC3B,QAAQ,CAAC,OAAO,CAAC,CAAE,CAC9B,mBAAO3L,IAAA,CAAChB,KAAK,EAACiX,IAAI,CAAE,EAAG,CAACxH,SAAS,CAAEhI,KAAK,CAAChG,MAAO,CAAE,CAAC,CACrD,CAAC,IAAM,IAAI6M,QAAQ,CAAC3B,QAAQ,CAAC,OAAO,CAAC,CAAE,CACrC,mBAAO3L,IAAA,CAAClB,KAAK,EAACmX,IAAI,CAAE,EAAG,CAACxH,SAAS,CAAEhI,KAAK,CAAChG,MAAO,CAAE,CAAC,CACrD,CAAC,IAAM,CACL,mBAAOT,IAAA,CAACnB,MAAM,EAACoX,IAAI,CAAE,EAAG,CAACxH,SAAS,CAAEhI,KAAK,CAAChG,MAAO,CAAE,CAAC,CACtD,CACF,CAAC,EAAE,CAAC,cACJT,IAAA,SAAMyO,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CACxCW,yBAAyB,CAAC,CAAC,CACxB,CAAC,EACJ,CAAC,cACNrP,IAAA,MAAGyO,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CACjC,CAAC,IAAM,CACN,KAAM,CAAAmI,YAAY,CAAG1R,YAAY,CAACK,gBAAgB,CAAC2G,IAAI,CACrDkB,IAAI,EAAIA,IAAI,CAAChE,UAAU,CAACoB,QAAQ,CAAC,CAAC,GAAKtI,QAAQ,CAACgB,eAAe,CAACsH,QAAQ,CAAC,CAC3E,CAAC,CACD,KAAM,CAAA6C,QAAQ,CAAG,CAAAuJ,YAAY,SAAZA,YAAY,iBAAZA,YAAY,CAAEvN,QAAQ,CAACiE,WAAW,CAAC,CAAC,GAAI,EAAE,CAE3D,GAAID,QAAQ,CAAC3B,QAAQ,CAAC,OAAO,CAAC,CAAE,CAC9B,MAAO,uEAAuE,CAChF,CAAC,IAAM,IAAI2B,QAAQ,CAAC3B,QAAQ,CAAC,OAAO,CAAC,CAAE,CACrC,MAAO,gFAAgF,CACzF,CAAC,IAAM,CACL,MAAO,kDAAkD,CAC3D,CACF,CAAC,EAAE,CAAC,CACH,CAAC,EACD,CACN,EACE,CAAC,CAGL,CAACvF,oBAAoB,CAAC,CAAC,eACtBpG,IAAA,QAAKyO,SAAS,CAAC,6BAA6B,CAAAC,QAAA,CACzChI,OAAO,CAACkI,GAAG,CAAEjC,MAAM,eAClBzM,KAAA,QAEE8V,OAAO,CAAEA,CAAA,GAAMtJ,kBAAkB,CAACC,MAAM,CAAE,CAC1C8B,SAAS,0EAAAxE,MAAA,CAA2E,CAAAzI,cAAc,SAAdA,cAAc,iBAAdA,cAAc,CAAEmF,EAAE,IAAKgG,MAAM,CAAChG,EAAE,IAAAsD,MAAA,CAC7GxD,KAAK,CAAC9F,MAAM,MAAAsJ,MAAA,CAAIxD,KAAK,CAAC/F,QAAQ,EACjC,uCAAuC,CACtC,CAAAgO,QAAA,eAEL1O,IAAA,OAAIyO,SAAS,CAAC,0CAA0C,CAAAC,QAAA,CAAE/B,MAAM,CAACtM,IAAI,CAAK,CAAC,cAC3EL,IAAA,QAAKyO,SAAS,CAAC,4BAA4B,CAAAC,QAAA,cACzCxO,KAAA,QAAKuO,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eAChD1O,IAAA,SAAA0O,QAAA,CAAO/B,MAAM,CAAC/F,QAAQ,CAAO,CAAC,cAC9B1G,KAAA,QAAKuO,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1C1O,IAAA,CAACf,IAAI,EAACgX,IAAI,CAAE,EAAG,CAACxH,SAAS,CAAC,8BAA8B,CAAE,CAAC,cAC3DzO,IAAA,SAAA0O,QAAA,CAAO/B,MAAM,CAAC9F,MAAM,CAAO,CAAC,EACzB,CAAC,EACH,CAAC,CACH,CAAC,cACN7G,IAAA,QAAKyO,SAAS,CAAC,YAAY,CAAAC,QAAA,cACzB1O,IAAA,SAAMyO,SAAS,sBAAAxE,MAAA,CAAuBxD,KAAK,CAAChG,MAAM,CAAG,CAAAiO,QAAA,CAAE/B,MAAM,CAACtG,KAAK,CAAO,CAAC,CACxE,CAAC,GAnBDsG,MAAM,CAAChG,EAoBT,CACN,CAAC,CACC,CACN,CAGA,CAACP,oBAAoB,CAAC,CAAC,EAAI5E,cAAc,gBACxCtB,KAAA,QAAKuO,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnB1O,IAAA,OAAIyO,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAC7CtI,oBAAoB,CAAC,CAAC,6BAAA6D,MAAA,CACSoF,yBAAyB,CAAC,CAAC,kCAAApF,MAAA,CAC3BzI,cAAc,CAACnB,IAAI,KAAG,CAEpD,CAAC,cACLL,IAAA,QAAKyO,SAAS,CAAC,wBAAwB,CAAAC,QAAA,CACpCU,qBAAqB,CAAC,CAAC,CAACR,GAAG,CAAC,CAAC/B,IAAI,CAAEgC,KAAK,gBACvC7O,IAAA,WAEEgW,OAAO,CAAEA,CAAA,GAAMpJ,gBAAgB,CAACC,IAAI,CAAE,CACtC4B,SAAS,+DAAAxE,MAAA,CAAgEvI,YAAY,GAAKmL,IAAI,IAAA5C,MAAA,CACvFxD,KAAK,CAAClG,YAAY,gBACrB,sEAAsE,CACrE,CAAAmO,QAAA,CAEJ7B,IAAI,EAPAgC,KAQC,CACT,CAAC,CACC,CAAC,EACH,CACN,cAGD3O,KAAA,QAAKuO,SAAS,CAAC,gBAAgB,CAAAC,QAAA,EAE5B,CAAEtI,oBAAoB,CAAC,CAAC,EAAI1E,YAAY,EAAMF,cAAc,EAAIE,YAAa,gBAC5ExB,KAAA,QAAKuO,SAAS,mBAAAxE,MAAA,CAAoBxD,KAAK,CAAC/F,QAAQ,SAAQ,CAAAgO,QAAA,eACtD1O,IAAA,OAAIyO,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAC,iBAAe,CAAI,CAAC,cACrExO,KAAA,QAAKuO,SAAS,CAAC,iCAAiC,CAAAC,QAAA,eAC9CxO,KAAA,MAAAwO,QAAA,EAAG,qBAAS,CAACW,yBAAyB,CAAC,CAAC,EAAI,CAAC,CAC5C,CAACjJ,oBAAoB,CAAC,CAAC,eACtBlG,KAAA,MAAAwO,QAAA,EAAG,uBAAW,CAAClN,cAAc,CAACnB,IAAI,EAAI,CACvC,cACDH,KAAA,MAAAwO,QAAA,EAAG,qBAAS,CAAChN,YAAY,EAAI,CAAC,cAC9BxB,KAAA,MAAAwO,QAAA,EAAG,wBAAY,CAACvM,QAAQ,CAACK,QAAQ,EAAI,GAAAyH,MAAA,CAAG9H,QAAQ,CAACG,SAAS,MAAA2H,MAAA,CAAI9H,QAAQ,CAACI,QAAQ,EAAGyG,IAAI,CAAC,CAAC,EAAI,eAAe,EAAI,CAAC,cAChH9I,KAAA,MAAAwO,QAAA,EAAG,sBAAU,CAACvM,QAAQ,CAACQ,KAAK,EAAI,eAAe,EAAI,CAAC,cACpDzC,KAAA,MAAAwO,QAAA,EAAG,sBAAU,CAACvM,QAAQ,CAACO,WAAW,EAAI,eAAe,EAAI,CAAC,CACzD0D,oBAAoB,CAAC,CAAC,eACrBpG,IAAA,MAAGyO,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CACrCvM,QAAQ,CAACgB,eAAe,GAAK,IAAI,CAC9B,0CAA0C,CAC1C,kDAAkD,CAErD,CACJ,EACE,CAAC,cACNjD,KAAA,QAAKuO,SAAS,CAAC,oCAAoC,CAAAC,QAAA,eACjDxO,KAAA,QAAKuO,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eAChD1O,IAAA,SAAMyO,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,QAAM,CAAM,CAAC,cAC7CxO,KAAA,SAAMuO,SAAS,uBAAAxE,MAAA,CAAwBxD,KAAK,CAAChG,MAAM,CAAG,CAAAiO,QAAA,EAAC,QACpD,CAAC/I,aAAa,EACX,CAAC,EACJ,CAAC,CACLM,cAAc,eACb/F,KAAA,QAAKuO,SAAS,CAAC,iDAAiD,CAAAC,QAAA,eAC9D1O,IAAA,CAACb,KAAK,EAACsP,SAAS,CAAC,SAAS,CAAE,CAAC,cAC7BzO,IAAA,SAAMyO,SAAS,CAAC,qBAAqB,CAAAC,QAAA,CAAC,mBAAiB,CAAM,CAAC,EAC3D,CACN,CACA3I,YAAY,eACX7F,KAAA,QAAKuO,SAAS,CAAC,2BAA2B,CAAAC,QAAA,EAAC,kBACzB,CAAC3I,YAAY,EAC1B,CACN,EACE,CAAC,EACH,CACN,CAGA,CAAEK,oBAAoB,CAAC,CAAC,EAAI1E,YAAY,EAAMF,cAAc,EAAIE,YAAa,gBAC5E1B,IAAA,QAAKyO,SAAS,CAAC,MAAM,CAAAC,QAAA,cACnB1O,IAAA,CAACN,QAAQ,EAACoX,MAAM,CAAEnX,aAAc,CAACoX,OAAO,CAAE,CAAEC,UAAU,CAAEpX,aAAa,CAACqX,UAAW,CAAE,CAAAvI,QAAA,cACjF1O,IAAA,CAACF,aAAa,EACZoX,MAAM,CAAEvR,aAAc,CACtBwR,gBAAgB,CAAEzM,oBAAqB,CACvC0M,cAAc,CAAEnM,kBAAmB,CACnCoM,YAAY,CAAExR,mBAAoB,CAClCyR,eAAe,CAAExR,sBAAuB,CACxCyR,WAAW,CAAEpV,QAAS,CACvB,CAAC,CACM,CAAC,CACR,CACN,EACE,CAAC,cAGNnC,IAAA,QAAKyO,SAAS,CAAC,uCAAuC,CAAAC,QAAA,cACpDxO,KAAA,QAAKuO,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7B1O,IAAA,WACEgW,OAAO,CAAEA,CAAA,GAAMzU,cAAc,CAAC,CAAC,CAAE,CACjCkN,SAAS,CAAC,qHAAqH,CAAAC,QAAA,CAChI,iBAED,CAAQ,CAAC,cACTxO,KAAA,WACE8V,OAAO,CAAEhI,qBAAsB,CAC/BS,SAAS,WAAAxE,MAAA,CAAYxD,KAAK,CAAClG,YAAY,MAAA0J,MAAA,CAAIxD,KAAK,CAACjG,YAAY,uEAAsE,CACnIkW,QAAQ,CAAEtQ,oBAAoB,CAAC,CAAC,CAAG,CAAC1E,YAAY,CAAI,CAACF,cAAc,EAAI,CAACE,YAAc,CAAAgN,QAAA,EACvF,yBACwB,CAACtI,oBAAoB,CAAC,CAAC,CAAG,KAAK,CAAI,CAAA5E,cAAc,SAAdA,cAAc,iBAAdA,cAAc,CAAE6E,KAAK,GAAI,EAAG,EAChF,CAAC,EACN,CAAC,CACH,CAAC,EACH,CAAC,CACH,CACN,EACE,CAAC,CACC,CAAC,CAGT5B,gBAAgB,eACfzE,IAAA,QAAKyO,SAAS,CAAC,gFAAgF,CAAAC,QAAA,cAC7FxO,KAAA,QAAKuO,SAAS,CAAC,iDAAiD,CAAAC,QAAA,eAE9DxO,KAAA,QAAKuO,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9B1O,IAAA,QAAKyO,SAAS,cAAAxE,MAAA,CAAexD,KAAK,CAAC/F,QAAQ,+DAA8D,CAAAgO,QAAA,cACvG1O,IAAA,CAACb,KAAK,EAAC8W,IAAI,CAAE,EAAG,CAACxH,SAAS,CAAEhI,KAAK,CAAChG,MAAO,CAAE,CAAC,CACzC,CAAC,cACNT,IAAA,OAAIyO,SAAS,CAAC,sCAAsC,CAAAC,QAAA,CAAC,oBAAkB,CAAI,CAAC,cAC5E1O,IAAA,MAAGyO,SAAS,sBAAAxE,MAAA,CAAuBxD,KAAK,CAAChG,MAAM,SAAQ,CAAAiO,QAAA,CAAE/J,gBAAgB,CAAI,CAAC,EAC3E,CAAC,cAGNzE,KAAA,QAAKuO,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBxO,KAAA,QAAKuO,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBxO,KAAA,QAAKuO,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eAChD1O,IAAA,SAAMyO,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,UAAQ,CAAM,CAAC,cAC/C1O,IAAA,SAAMyO,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CACxCvM,QAAQ,CAACK,QAAQ,EAAI,GAAAyH,MAAA,CAAG9H,QAAQ,CAACG,SAAS,MAAA2H,MAAA,CAAI9H,QAAQ,CAACI,QAAQ,EAAGyG,IAAI,CAAC,CAAC,EAAI,KAAK,CAC9E,CAAC,EACJ,CAAC,cAEN9I,KAAA,QAAKuO,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eAChD1O,IAAA,SAAMyO,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,OAAK,CAAM,CAAC,cAC5C1O,IAAA,SAAMyO,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CACxCW,yBAAyB,CAAC,CAAC,CACxB,CAAC,EACJ,CAAC,CAEL,CAACjJ,oBAAoB,CAAC,CAAC,EAAI5E,cAAc,eACxCtB,KAAA,QAAKuO,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eAChD1O,IAAA,SAAMyO,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,SAAO,CAAM,CAAC,cAC9C1O,IAAA,SAAMyO,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CAAElN,cAAc,CAACnB,IAAI,CAAO,CAAC,EACrE,CACN,CAEAqB,YAAY,eACXxB,KAAA,QAAKuO,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eAChD1O,IAAA,SAAMyO,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,OAAK,CAAM,CAAC,cAC5C1O,IAAA,SAAMyO,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CAAEhN,YAAY,CAAO,CAAC,EAC9D,CACN,cAEDxB,KAAA,QAAKuO,SAAS,CAAC,iEAAiE,CAAAC,QAAA,eAC9E1O,IAAA,SAAMyO,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,SAAO,CAAM,CAAC,cAC9C1O,IAAA,SAAMyO,SAAS,sBAAAxE,MAAA,CAAuBxD,KAAK,CAAChG,MAAM,CAAG,CAAAiO,QAAA,CAClDtI,oBAAoB,CAAC,CAAC,CAAG,KAAK,CAAI,CAAA5E,cAAc,SAAdA,cAAc,iBAAdA,cAAc,CAAE6E,KAAK,GAAI,KAAM,CAC9D,CAAC,EACJ,CAAC,EACH,CAAC,cAGNrG,IAAA,WACEgW,OAAO,CAAE/H,uBAAwB,CACjCQ,SAAS,gBAAAxE,MAAA,CAAiBxD,KAAK,CAAClG,YAAY,MAAA0J,MAAA,CAAIxD,KAAK,CAACjG,YAAY,6GAA4G,CAAAkO,QAAA,CAC/K,IAED,CAAQ,CAAC,EACN,CAAC,EACH,CAAC,CACH,CACN,CAGA7J,eAAe,eACd7E,IAAA,QAAKyO,SAAS,CAAC,gFAAgF,CAAAC,QAAA,cAC7FxO,KAAA,QAAKuO,SAAS,CAAC,+EAA+E,CAAAC,QAAA,eAE5F1O,IAAA,QAAKyO,SAAS,CAAC,8BAA8B,CAAAC,QAAA,cAC3CxO,KAAA,QAAKuO,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eAChD1O,IAAA,OAAIyO,SAAS,CAAC,iCAAiC,CAAAC,QAAA,CAAC,kBAAgB,CAAI,CAAC,cACrE1O,IAAA,WACEgW,OAAO,CAAE5H,sBAAuB,CAChCK,SAAS,CAAC,qDAAqD,CAAAC,QAAA,cAE/D1O,IAAA,QAAKyO,SAAS,CAAC,SAAS,CAAC+I,IAAI,CAAC,MAAM,CAACC,MAAM,CAAC,cAAc,CAACC,OAAO,CAAC,WAAW,CAAAhJ,QAAA,cAC5E1O,IAAA,SAAM2X,aAAa,CAAC,OAAO,CAACC,cAAc,CAAC,OAAO,CAACC,WAAW,CAAE,CAAE,CAACC,CAAC,CAAC,sBAAsB,CAAE,CAAC,CAC3F,CAAC,CACA,CAAC,EACN,CAAC,CACH,CAAC,cAGN9X,IAAA,QAAKyO,SAAS,CAAC,8BAA8B,CAAAC,QAAA,CAC1C3J,eAAe,cACd7E,KAAA,QAAKuO,SAAS,CAAC,WAAW,CAAAC,QAAA,eAExBxO,KAAA,QAAKuO,SAAS,+CAAAxE,MAAA,CACZlF,eAAe,CAACwD,KAAK,CACjB,wBAAwB,CACxB,4BAA4B,CAC/B,CAAAmG,QAAA,EACA3J,eAAe,CAACwD,KAAK,cACpBvI,IAAA,QAAKyO,SAAS,CAAC,SAAS,CAAC+I,IAAI,CAAC,cAAc,CAACE,OAAO,CAAC,WAAW,CAAAhJ,QAAA,cAC9D1O,IAAA,SAAM+X,QAAQ,CAAC,SAAS,CAACD,CAAC,CAAC,yNAAyN,CAACE,QAAQ,CAAC,SAAS,CAAE,CAAC,CACvQ,CAAC,cAENhY,IAAA,QAAKyO,SAAS,CAAC,SAAS,CAAC+I,IAAI,CAAC,cAAc,CAACE,OAAO,CAAC,WAAW,CAAAhJ,QAAA,cAC9D1O,IAAA,SAAM+X,QAAQ,CAAC,SAAS,CAACD,CAAC,CAAC,uIAAuI,CAACE,QAAQ,CAAC,SAAS,CAAE,CAAC,CACrL,CACN,cACDhY,IAAA,SAAMyO,SAAS,CAAC,aAAa,CAAAC,QAAA,CAC1B3J,eAAe,CAACwD,KAAK,CAAG,gBAAgB,CAAG,kBAAkB,CAC1D,CAAC,EACJ,CAAC,cAGNrI,KAAA,QAAKuO,SAAS,CAAC,4CAA4C,CAAAC,QAAA,eACzD1O,IAAA,QAAKyO,SAAS,CAAC,+CAA+C,CAAAC,QAAA,cAC5D1O,IAAA,OAAIyO,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAAC,eAAa,CAAI,CAAC,CACjE,CAAC,cACN1O,IAAA,QAAKyO,SAAS,CAAC,KAAK,CAAAC,QAAA,CACjBL,iBAAiB,CAACtJ,eAAe,CAAC,CAChC,CAAC,EACH,CAAC,CAGLA,eAAe,CAACyC,MAAM,eACrBtH,KAAA,QAAKuO,SAAS,CAAC,2BAA2B,CAAAC,QAAA,eACxC1O,IAAA,OAAIyO,SAAS,CAAC,wCAAwC,CAAAC,QAAA,CAAC,eAAa,CAAI,CAAC,cACzExO,KAAA,QAAKuO,SAAS,CAAC,iCAAiC,CAAAC,QAAA,eAC9CxO,KAAA,MAAAwO,QAAA,eAAG1O,IAAA,WAAA0O,QAAA,CAAQ,SAAO,CAAQ,CAAC,IAAC,CAAC3J,eAAe,CAACyC,MAAM,CAAC,GAAC,CAACzC,eAAe,CAACuF,UAAU,EAAI,CAAC,cACrFpK,KAAA,MAAAwO,QAAA,eAAG1O,IAAA,WAAA0O,QAAA,CAAQ,YAAU,CAAQ,CAAC,IAAC,CAAC,GAAI,CAAAf,IAAI,CAAC,CAAC,CAACsK,cAAc,CAAC,CAAC,EAAI,CAAC,EAC7D,CAAC,EACH,CACN,EACE,CAAC,cAEN/X,KAAA,QAAKuO,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/B1O,IAAA,QAAKyO,SAAS,CAAC,2EAA2E,CAAM,CAAC,cACjGzO,IAAA,MAAGyO,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,6BAA2B,CAAG,CAAC,EACzD,CACN,CACE,CAAC,cAGN1O,IAAA,QAAKyO,SAAS,CAAC,8BAA8B,CAAAC,QAAA,cAC3C1O,IAAA,WACEgW,OAAO,CAAE5H,sBAAuB,CAChCK,SAAS,WAAAxE,MAAA,CAAYxD,KAAK,CAAClG,YAAY,MAAA0J,MAAA,CAAIxD,KAAK,CAACjG,YAAY,6GAA4G,CAAAkO,QAAA,CAC1K,OAED,CAAQ,CAAC,CACN,CAAC,EACH,CAAC,CACH,CACN,EACE,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}